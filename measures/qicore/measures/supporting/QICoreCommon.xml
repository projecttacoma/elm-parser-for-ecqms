<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:t name="author" value="Bryn Rhodes"/>
      <a:t name="description" value="This library defines common terminology and functions&#xa;used in writing CQL with FHIR and QICore profiles."/>
   </annotation>
   <identifier id="QICoreCommon" version="1.3.000"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localIdentifier="QICore" uri="http://hl7.org/fhir"/>
   </usings>
   <includes>
      <def localIdentifier="FHIRHelpers" path="FHIRHelpers" version="4.1.000"/>
   </includes>
   <codeSystems>
      <def name="LOINC" id="http://loinc.org" accessLevel="Public"/>
      <def name="SNOMEDCT" id="http://snomed.info/sct" accessLevel="Public"/>
      <def name="ActCode" id="http://terminology.hl7.org/CodeSystem/v3-ActCode" accessLevel="Public"/>
      <def name="RoleCode" id="http://terminology.hl7.org/CodeSystem/v3-RoleCode" accessLevel="Public"/>
      <def name="Diagnosis Role" id="http://terminology.hl7.org/CodeSystem/diagnosis-role" accessLevel="Public"/>
      <def name="RequestIntent" id="http://hl7.org/fhir/request-intent" accessLevel="Public"/>
      <def name="MedicationRequestCategory" id="http://terminology.hl7.org/CodeSystem/medicationrequest-category" accessLevel="Public"/>
      <def name="ConditionClinicalStatusCodes" id="http://terminology.hl7.org/CodeSystem/condition-clinical" accessLevel="Public"/>
      <def name="ConditionVerificationStatusCodes" id="http://terminology.hl7.org/CodeSystem/condition-ver-status" accessLevel="Public"/>
      <def name="AllergyIntoleranceClinicalStatusCodes" id="http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical" accessLevel="Public"/>
      <def name="AllergyIntoleranceVerificationStatusCodes" id="http://terminology.hl7.org/CodeSystem/allergyintolerance-verification" accessLevel="Public"/>
      <def name="ObservationCategoryCodes" id="http://terminology.hl7.org/CodeSystem/observation-category" accessLevel="Public"/>
      <def name="USCoreObservationCategory" id="http://hl7.org/fhir/us/core/CodeSystem/us-core-observation-category" accessLevel="Public"/>
      <def name="ConditionCategory" id="http://terminology.hl7.org/CodeSystem/condition-category" accessLevel="Public"/>
      <def name="USCoreConditionCategory" id="http://hl7.org/fhir/us/core/CodeSystem/condition-category" accessLevel="Public"/>
   </codeSystems>
   <codes>
      <def name="Birthdate" id="21112-8" display="Birth date" accessLevel="Public">
         <codeSystem name="LOINC"/>
      </def>
      <def name="Dead" id="419099009" display="Dead" accessLevel="Public">
         <codeSystem name="SNOMEDCT"/>
      </def>
      <def name="ER" id="ER" display="Emergency room" accessLevel="Public">
         <codeSystem name="RoleCode"/>
      </def>
      <def name="ICU" id="ICU" display="Intensive care unit" accessLevel="Public">
         <codeSystem name="RoleCode"/>
      </def>
      <def name="Billing" id="billing" display="Billing" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="ambulatory" id="AMB" display="ambulatory" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="emergency" id="EMER" display="emergency" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="field" id="FLD" display="field" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="home health" id="HH" display="home health" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="inpatient encounter" id="IMP" display="inpatient encounter" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="inpatient acute" id="ACUTE" display="inpatient acute" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="inpatient non-acute" id="NONAC" display="inpatient non-acute" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="observation encounter" id="OBSENC" display="observation encounter" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="pre-admission" id="PRENC" display="pre-admission" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="short stay" id="SS" display="short stay" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="virtual" id="VR" display="VR" accessLevel="Public">
         <codeSystem name="ActCode"/>
      </def>
      <def name="problem-list-item" id="problem-list-item" display="Problem List Item" accessLevel="Public">
         <codeSystem name="ConditionCategory"/>
      </def>
      <def name="encounter-diagnosis" id="encounter-diagnosis" display="Encounter Diagnosis" accessLevel="Public">
         <codeSystem name="ConditionCategory"/>
      </def>
      <def name="health-concern" id="health-concern" display="Health Concern" accessLevel="Public">
         <codeSystem name="USCoreConditionCategory"/>
      </def>
      <def name="active" id="active" accessLevel="Public">
         <codeSystem name="ConditionClinicalStatusCodes"/>
      </def>
      <def name="recurrence" id="recurrence" accessLevel="Public">
         <codeSystem name="ConditionClinicalStatusCodes"/>
      </def>
      <def name="relapse" id="relapse" accessLevel="Public">
         <codeSystem name="ConditionClinicalStatusCodes"/>
      </def>
      <def name="inactive" id="inactive" accessLevel="Public">
         <codeSystem name="ConditionClinicalStatusCodes"/>
      </def>
      <def name="remission" id="remission" accessLevel="Public">
         <codeSystem name="ConditionClinicalStatusCodes"/>
      </def>
      <def name="resolved" id="resolved" accessLevel="Public">
         <codeSystem name="ConditionClinicalStatusCodes"/>
      </def>
      <def name="unconfirmed" id="unconfirmed" accessLevel="Public">
         <codeSystem name="ConditionVerificationStatusCodes"/>
      </def>
      <def name="provisional" id="provisional" accessLevel="Public">
         <codeSystem name="ConditionVerificationStatusCodes"/>
      </def>
      <def name="differential" id="differential" accessLevel="Public">
         <codeSystem name="ConditionVerificationStatusCodes"/>
      </def>
      <def name="confirmed" id="confirmed" accessLevel="Public">
         <codeSystem name="ConditionVerificationStatusCodes"/>
      </def>
      <def name="refuted" id="refuted" accessLevel="Public">
         <codeSystem name="ConditionVerificationStatusCodes"/>
      </def>
      <def name="entered-in-error" id="entered-in-error" accessLevel="Public">
         <codeSystem name="ConditionVerificationStatusCodes"/>
      </def>
      <def name="allergy-active" id="active" accessLevel="Public">
         <codeSystem name="AllergyIntoleranceClinicalStatusCodes"/>
      </def>
      <def name="allergy-inactive" id="inactive" accessLevel="Public">
         <codeSystem name="AllergyIntoleranceClinicalStatusCodes"/>
      </def>
      <def name="allergy-resolved" id="resolved" accessLevel="Public">
         <codeSystem name="AllergyIntoleranceClinicalStatusCodes"/>
      </def>
      <def name="allergy-unconfirmed" id="unconfirmed" accessLevel="Public">
         <codeSystem name="AllergyIntoleranceVerificationStatusCodes"/>
      </def>
      <def name="allergy-confirmed" id="confirmed" accessLevel="Public">
         <codeSystem name="AllergyIntoleranceVerificationStatusCodes"/>
      </def>
      <def name="allergy-refuted" id="refuted" accessLevel="Public">
         <codeSystem name="AllergyIntoleranceVerificationStatusCodes"/>
      </def>
      <def name="Inpatient" id="inpatient" display="Inpatient" accessLevel="Public">
         <codeSystem name="MedicationRequestCategory"/>
      </def>
      <def name="Outpatient" id="outpatient" display="Outpatient" accessLevel="Public">
         <codeSystem name="MedicationRequestCategory"/>
      </def>
      <def name="Community" id="community" display="Community" accessLevel="Public">
         <codeSystem name="MedicationRequestCategory"/>
      </def>
      <def name="Discharge" id="discharge" display="Discharge" accessLevel="Public">
         <codeSystem name="MedicationRequestCategory"/>
      </def>
      <def name="AD" id="AD" display="Admission diagnosis" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="DD" id="DD" display="Discharge diagnosis" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="CC" id="CC" display="Chief complaint" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="CM" id="CM" display="Comorbidity diagnosis" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="pre-op" id="pre-op" display="pre-op diagnosis" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="post-op" id="post-op" display="post-op diagnosis" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="billing" id="billing" display="billing diagnosis" accessLevel="Public">
         <codeSystem name="Diagnosis Role"/>
      </def>
      <def name="social-history" id="social-history" display="Social History" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="vital-signs" id="vital-signs" display="Vital Signs" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="imaging" id="imaging" display="Imaging" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="laboratory" id="laboratory" display="Laboratory" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="procedure" id="procedure" display="Procedure" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="survey" id="survey" display="Survey" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="exam" id="exam" display="Exam" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="therapy" id="therapy" display="Therapy" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="activity" id="activity" display="Activity" accessLevel="Public">
         <codeSystem name="ObservationCategoryCodes"/>
      </def>
      <def name="clinical-test" id="clinical-test" display="Clinical Test" accessLevel="Public">
         <codeSystem name="USCoreObservationCategory"/>
      </def>
   </codes>
   <contexts>
      <def name="Patient"/>
   </contexts>
   <statements>
      <def name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand dataType="fhir:Patient" templateId="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def name="isActive" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given condition has a clinical status of active, recurrence, or relapse"/>
         </annotation>
         <expression xsi:type="Or">
            <operand xsi:type="Or">
               <operand xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="clinicalStatus" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand name="active" xsi:type="CodeRef"/>
                  </operand>
               </operand>
               <operand xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="clinicalStatus" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand name="recurrence" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </operand>
            <operand xsi:type="Equivalent">
               <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand path="clinicalStatus" xsi:type="Property">
                     <source name="condition" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand xsi:type="ToConcept">
                  <operand name="relapse" xsi:type="CodeRef"/>
               </operand>
            </operand>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="hasCategory" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given condition has the given category"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="category" xsi:type="OperandRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="category">
            <operandTypeSpecifier name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isProblemListItem" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given condition is a problem list item."/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="problem-list-item" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isEncounterDiagnosis" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given condition is an encounter diagnosis"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="encounter-diagnosis" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isHealthConcern" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given condition is a health concern"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="health-concern" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="hasCategory" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation has the given category"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="category" xsi:type="OperandRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="category">
            <operandTypeSpecifier name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isSocialHistory" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is a social history observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="social-history" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isVitalSign" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is a vital sign"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="vital-signs" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isImaging" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is an imaging observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="imaging" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isLaboratory" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is a laboratory observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="laboratory" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isProcedure" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="REturns true if the given observation is a procedure observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="procedure" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isSurvey" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is a survey observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="survey" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isExam" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is an exam observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="exam" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isTherapy" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is a therapy observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="therapy" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isActivity" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is an activity observation"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="activity" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isClinicalTest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given observation is a clinical test result"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="observation" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="clinical-test" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="observation">
            <operandTypeSpecifier name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isCommunity" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given MedicationRequest has a category of Community"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="medicationRequest" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="Community" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="medicationRequest">
            <operandTypeSpecifier name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isCommunity" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given MedicationRequest has a category of Community"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="medicationRequest" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="Community" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="medicationRequest">
            <operandTypeSpecifier name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isDischarge" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given MedicationRequest has a category of Discharge"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="medicationRequest" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="Discharge" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="medicationRequest">
            <operandTypeSpecifier name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="isDischarge" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given MedicationRequest has a category of Discharge"/>
         </annotation>
         <expression xsi:type="Exists">
            <operand xsi:type="Query">
               <source alias="C">
                  <expression xsi:type="Query">
                     <source alias="$this">
                        <expression path="category" xsi:type="Property">
                           <source name="medicationRequest" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return distinct="false">
                        <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where xsi:type="Equivalent">
                  <operand name="C" xsi:type="AliasRef"/>
                  <operand xsi:type="ToConcept">
                     <operand name="Discharge" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
         <operand name="medicationRequest">
            <operandTypeSpecifier name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="doNotPerform" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given DeviceRequest is a negation (i.e. do not perform this order)"/>
         </annotation>
         <expression xsi:type="SingletonFrom">
            <operand xsi:type="Query">
               <source alias="E">
                  <expression path="modifierExtension" xsi:type="Property">
                     <source name="deviceRequest" xsi:type="OperandRef"/>
                  </expression>
               </source>
               <where xsi:type="Equal">
                  <operand path="value" xsi:type="Property">
                     <source path="url" scope="E" xsi:type="Property"/>
                  </operand>
                  <operand valueType="t:String" value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-doNotPerform" xsi:type="Literal"/>
               </where>
               <return>
                  <expression strict="false" xsi:type="As">
                     <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="value" scope="E" xsi:type="Property"/>
                     </operand>
                     <asTypeSpecifier name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </return>
            </operand>
         </expression>
         <operand name="deviceRequest">
            <operandTypeSpecifier name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="ToInterval" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Normalizes a value that is a choice of timing-valued types to an equivalent interval"/>
            <a:t name="comment" value="Normalizes a choice type of DateTime, Quanitty, Interval&lt;DateTime>, or Interval&lt;Quantity> types&#xa;to an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible&#xa;representations for timing-valued elements in QICore, allowing this function to be used across any resource.&#xa;The input can be provided as a DateTime, Quantity, Interval&lt;DateTime> or Interval&lt;Quantity>.&#xa;The intent of this function is to provide a clear and concise mechanism to treat single&#xa;elements that have multiple possible representations as intervals so that logic doesn't have to account&#xa;for the variability. More complex calculations (such as medication request period or dispense period&#xa;calculation) need specific guidance and consideration. That guidance may make use of this function, but&#xa;the focus of this function is on single element calculations where the semantics are unambiguous.&#xa;If the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.&#xa;If the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,&#xa;and the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.&#xa;If the input is a DateTime Interval, the result is the input.&#xa;If the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result&#xa;is a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending&#xa;immediately before one year later than the date the patient turned the age given as the end of the quantity interval.&#xa;Any other input will reslt in a null DateTime Interval"/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `toInterval()` instead"/>
         </annotation>
         <expression xsi:type="Case">
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then lowClosed="true" highClosed="true" xsi:type="Interval">
                  <low strict="false" xsi:type="As">
                     <operand name="choice" xsi:type="OperandRef"/>
                     <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </low>
                  <high strict="false" xsi:type="As">
                     <operand name="choice" xsi:type="OperandRef"/>
                     <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </high>
               </then>
            </caseItem>
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </isTypeSpecifier>
               </when>
               <then strict="false" xsi:type="As">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </asTypeSpecifier>
               </then>
            </caseItem>
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <operand path="low" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand name="choice" xsi:type="OperandRef"/>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <operand path="high" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand name="choice" xsi:type="OperandRef"/>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </highClosedExpression>
               </then>
            </caseItem>
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  </isTypeSpecifier>
               </when>
               <then xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <operand path="low" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source name="choice" xsi:type="OperandRef"/>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source name="choice" xsi:type="OperandRef"/>
                              </operand>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <operand path="high" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source name="choice" xsi:type="OperandRef"/>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source name="choice" xsi:type="OperandRef"/>
                              </operand>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </highClosedExpression>
               </then>
            </caseItem>
            <else strict="false" xsi:type="As">
               <operand xsi:type="Null"/>
               <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier xsi:type="ChoiceTypeSpecifier">
               <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </choice>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </choice>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="toInterval" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Normalizes a value that is a choice of timing-valued types to an equivalent interval"/>
            <a:t name="comment" value="Normalizes a choice type of DateTime, Quanitty, Interval&lt;DateTime>, or Interval&lt;Quantity> types&#xa;to an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible&#xa;representations for timing-valued elements in QICore, allowing this function to be used across any resource.&#xa;The input can be provided as a DateTime, Quantity, Interval&lt;DateTime> or Interval&lt;Quantity>.&#xa;The intent of this function is to provide a clear and concise mechanism to treat single&#xa;elements that have multiple possible representations as intervals so that logic doesn't have to account&#xa;for the variability. More complex calculations (such as medication request period or dispense period&#xa;calculation) need specific guidance and consideration. That guidance may make use of this function, but&#xa;the focus of this function is on single element calculations where the semantics are unambiguous.&#xa;If the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.&#xa;If the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,&#xa;and the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.&#xa;If the input is a DateTime Interval, the result is the input.&#xa;If the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result&#xa;is a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending&#xa;immediately before one year later than the date the patient turned the age given as the end of the quantity interval.&#xa;Any other input will reslt in a null DateTime Interval"/>
         </annotation>
         <expression xsi:type="Case">
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then lowClosed="true" highClosed="true" xsi:type="Interval">
                  <low strict="false" xsi:type="As">
                     <operand name="choice" xsi:type="OperandRef"/>
                     <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </low>
                  <high strict="false" xsi:type="As">
                     <operand name="choice" xsi:type="OperandRef"/>
                     <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </high>
               </then>
            </caseItem>
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </isTypeSpecifier>
               </when>
               <then strict="false" xsi:type="As">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </asTypeSpecifier>
               </then>
            </caseItem>
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <operand path="low" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand name="choice" xsi:type="OperandRef"/>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <operand path="high" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand name="choice" xsi:type="OperandRef"/>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </highClosedExpression>
               </then>
            </caseItem>
            <caseItem>
               <when xsi:type="Is">
                  <operand name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  </isTypeSpecifier>
               </when>
               <then xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <operand path="low" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source name="choice" xsi:type="OperandRef"/>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source name="choice" xsi:type="OperandRef"/>
                              </operand>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <operand path="high" xsi:type="Property">
                        <source lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </low>
                           <high xsi:type="Add">
                              <operand xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source name="choice" xsi:type="OperandRef"/>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                              <operand value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low xsi:type="Add">
                           <operand path="value" xsi:type="Property">
                              <source path="birthDate" xsi:type="Property">
                                 <source name="Patient" xsi:type="ExpressionRef"/>
                              </source>
                           </operand>
                           <operand strict="false" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source name="choice" xsi:type="OperandRef"/>
                              </operand>
                              <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </low>
                        <high xsi:type="Add">
                           <operand xsi:type="Add">
                              <operand path="value" xsi:type="Property">
                                 <source path="birthDate" xsi:type="Property">
                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                 </source>
                              </operand>
                              <operand strict="false" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source name="choice" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </highClosedExpression>
               </then>
            </caseItem>
            <else strict="false" xsi:type="As">
               <operand xsi:type="Null"/>
               <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier xsi:type="ChoiceTypeSpecifier">
               <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </choice>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </choice>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="ToAbatementInterval" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns an interval representing the normalized abatement of a given Condition."/>
            <a:t name="comment" value="If the abatement element of the Condition is represented as a DateTime, the result&#xa;is an interval beginning and ending on that DateTime.&#xa;If the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The&#xa;result is an interval from the date the patient turned that age to immediately before one year later.&#xa;If the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during&#xa;which the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately&#xa;before one year later than the date the patient turned the ending age of the quantity interval."/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `abatementInterval()` instead."/>
         </annotation>
         <expression xsi:type="If">
            <condition xsi:type="Is">
               <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand path="abatement" xsi:type="Property">
                     <source name="condition" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <isTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </condition>
            <then lowClosed="true" highClosed="true" xsi:type="Interval">
               <low strict="false" xsi:type="As">
                  <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="abatement" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </low>
               <high strict="false" xsi:type="As">
                  <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="abatement" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </high>
            </then>
            <else xsi:type="Interval">
               <low asType="t:DateTime" xsi:type="As">
                  <operand path="low" xsi:type="Property">
                     <source xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then xsi:type="Interval">
                              <low xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </highClosedExpression>
                           </then>
                           <else xsi:type="If">
                              <condition xsi:type="Is">
                                 <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </operand>
                                 <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </isTypeSpecifier>
                              </condition>
                              <then lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low path="low" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </low>
                                 <high path="high" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </high>
                              </then>
                              <else xsi:type="Interval">
                                 <low xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </low>
                                 <lowClosedExpression path="lowClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </lowClosedExpression>
                                 <high xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </high>
                                 <highClosedExpression path="highClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </highClosedExpression>
                              </else>
                           </else>
                        </else>
                     </source>
                  </operand>
               </low>
               <lowClosedExpression path="lowClosed" xsi:type="Property">
                  <source xsi:type="If">
                     <condition xsi:type="Is">
                        <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand path="abatement" xsi:type="Property">
                              <source name="condition" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                        <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </condition>
                     <then xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="high" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </highClosedExpression>
                     </then>
                     <else xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </isTypeSpecifier>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low path="low" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </low>
                              <high path="high" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </high>
                           </then>
                           <else xsi:type="Interval">
                              <low xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </highClosedExpression>
                           </else>
                        </else>
                     </else>
                  </source>
               </lowClosedExpression>
               <high asType="t:DateTime" xsi:type="As">
                  <operand path="high" xsi:type="Property">
                     <source xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then xsi:type="Interval">
                              <low xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </highClosedExpression>
                           </then>
                           <else xsi:type="If">
                              <condition xsi:type="Is">
                                 <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </operand>
                                 <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </isTypeSpecifier>
                              </condition>
                              <then lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low path="low" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </low>
                                 <high path="high" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </high>
                              </then>
                              <else xsi:type="Interval">
                                 <low xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </low>
                                 <lowClosedExpression path="lowClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </lowClosedExpression>
                                 <high xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </high>
                                 <highClosedExpression path="highClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </highClosedExpression>
                              </else>
                           </else>
                        </else>
                     </source>
                  </operand>
               </high>
               <highClosedExpression path="highClosed" xsi:type="Property">
                  <source xsi:type="If">
                     <condition xsi:type="Is">
                        <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand path="abatement" xsi:type="Property">
                              <source name="condition" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                        <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </condition>
                     <then xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="high" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </highClosedExpression>
                     </then>
                     <else xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </isTypeSpecifier>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low path="low" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </low>
                              <high path="high" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </high>
                           </then>
                           <else xsi:type="Interval">
                              <low xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </highClosedExpression>
                           </else>
                        </else>
                     </else>
                  </source>
               </highClosedExpression>
            </else>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="abatementInterval" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns an interval representing the normalized abatement of a given Condition."/>
            <a:t name="comment" value="If the abatement element of the Condition is represented as a DateTime, the result&#xa;is an interval beginning and ending on that DateTime.&#xa;If the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The&#xa;result is an interval from the date the patient turned that age to immediately before one year later.&#xa;If the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during&#xa;which the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately&#xa;before one year later than the date the patient turned the ending age of the quantity interval."/>
         </annotation>
         <expression xsi:type="If">
            <condition xsi:type="Is">
               <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand path="abatement" xsi:type="Property">
                     <source name="condition" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <isTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </condition>
            <then lowClosed="true" highClosed="true" xsi:type="Interval">
               <low strict="false" xsi:type="As">
                  <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="abatement" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </low>
               <high strict="false" xsi:type="As">
                  <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="abatement" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <asTypeSpecifier name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </high>
            </then>
            <else xsi:type="Interval">
               <low asType="t:DateTime" xsi:type="As">
                  <operand path="low" xsi:type="Property">
                     <source xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then xsi:type="Interval">
                              <low xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </highClosedExpression>
                           </then>
                           <else xsi:type="If">
                              <condition xsi:type="Is">
                                 <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </operand>
                                 <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </isTypeSpecifier>
                              </condition>
                              <then lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low path="low" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </low>
                                 <high path="high" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </high>
                              </then>
                              <else xsi:type="Interval">
                                 <low xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </low>
                                 <lowClosedExpression path="lowClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </lowClosedExpression>
                                 <high xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </high>
                                 <highClosedExpression path="highClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </highClosedExpression>
                              </else>
                           </else>
                        </else>
                     </source>
                  </operand>
               </low>
               <lowClosedExpression path="lowClosed" xsi:type="Property">
                  <source xsi:type="If">
                     <condition xsi:type="Is">
                        <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand path="abatement" xsi:type="Property">
                              <source name="condition" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                        <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </condition>
                     <then xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="high" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </highClosedExpression>
                     </then>
                     <else xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </isTypeSpecifier>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low path="low" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </low>
                              <high path="high" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </high>
                           </then>
                           <else xsi:type="Interval">
                              <low xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </highClosedExpression>
                           </else>
                        </else>
                     </else>
                  </source>
               </lowClosedExpression>
               <high asType="t:DateTime" xsi:type="As">
                  <operand path="high" xsi:type="Property">
                     <source xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then xsi:type="Interval">
                              <low xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="ToDateTime">
                                 <operand asType="t:Date" xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                          <low xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="low" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </low>
                                          <high xsi:type="Add">
                                             <operand xsi:type="Add">
                                                <operand path="value" xsi:type="Property">
                                                   <source path="birthDate" xsi:type="Property">
                                                      <source name="Patient" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </operand>
                                                <operand strict="false" xsi:type="As">
                                                   <operand path="high" xsi:type="Property">
                                                      <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                         <operand path="abatement" xsi:type="Property">
                                                            <source name="condition" xsi:type="OperandRef"/>
                                                         </operand>
                                                      </source>
                                                   </operand>
                                                   <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand value="1" unit="year" xsi:type="Quantity"/>
                                          </high>
                                       </source>
                                    </operand>
                                 </operand>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="low" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="high" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </highClosedExpression>
                           </then>
                           <else xsi:type="If">
                              <condition xsi:type="Is">
                                 <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </operand>
                                 <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </isTypeSpecifier>
                              </condition>
                              <then lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low path="low" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </low>
                                 <high path="high" xsi:type="Property">
                                    <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </source>
                                 </high>
                              </then>
                              <else xsi:type="Interval">
                                 <low xsi:type="As">
                                    <operand path="low" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </low>
                                 <lowClosedExpression path="lowClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </lowClosedExpression>
                                 <high xsi:type="As">
                                    <operand path="high" xsi:type="Property">
                                       <source strict="false" xsi:type="As">
                                          <operand xsi:type="Null"/>
                                          <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                             <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                          </asTypeSpecifier>
                                       </source>
                                    </operand>
                                    <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                       <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </high>
                                 <highClosedExpression path="highClosed" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </highClosedExpression>
                              </else>
                           </else>
                        </else>
                     </source>
                  </operand>
               </high>
               <highClosedExpression path="highClosed" xsi:type="Property">
                  <source xsi:type="If">
                     <condition xsi:type="Is">
                        <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand path="abatement" xsi:type="Property">
                              <source name="condition" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                        <isTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </condition>
                     <then xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="low" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand asType="t:Date" xsi:type="As">
                              <operand path="high" xsi:type="Property">
                                 <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </low>
                                    <high xsi:type="Add">
                                       <operand xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low xsi:type="Add">
                                 <operand path="value" xsi:type="Property">
                                    <source path="birthDate" xsi:type="Property">
                                       <source name="Patient" xsi:type="ExpressionRef"/>
                                    </source>
                                 </operand>
                                 <operand strict="false" xsi:type="As">
                                    <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="abatement" xsi:type="Property">
                                          <source name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                    </operand>
                                    <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </low>
                              <high xsi:type="Add">
                                 <operand xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand path="abatement" xsi:type="Property">
                                             <source name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                                 <operand value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </highClosedExpression>
                     </then>
                     <else xsi:type="If">
                        <condition xsi:type="Is">
                           <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand path="abatement" xsi:type="Property">
                                 <source name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                           <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           </isTypeSpecifier>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand asType="t:Date" xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                       <low xsi:type="Add">
                                          <operand path="value" xsi:type="Property">
                                             <source path="birthDate" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                             </source>
                                          </operand>
                                          <operand strict="false" xsi:type="As">
                                             <operand path="low" xsi:type="Property">
                                                <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand path="abatement" xsi:type="Property">
                                                      <source name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                </source>
                                             </operand>
                                             <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </low>
                                       <high xsi:type="Add">
                                          <operand xsi:type="Add">
                                             <operand path="value" xsi:type="Property">
                                                <source path="birthDate" xsi:type="Property">
                                                   <source name="Patient" xsi:type="ExpressionRef"/>
                                                </source>
                                             </operand>
                                             <operand strict="false" xsi:type="As">
                                                <operand path="high" xsi:type="Property">
                                                   <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                      <operand path="abatement" xsi:type="Property">
                                                         <source name="condition" xsi:type="OperandRef"/>
                                                      </operand>
                                                   </source>
                                                </operand>
                                                <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                             </operand>
                                          </operand>
                                          <operand value="1" unit="year" xsi:type="Quantity"/>
                                       </high>
                                    </source>
                                 </operand>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low xsi:type="Add">
                                    <operand path="value" xsi:type="Property">
                                       <source path="birthDate" xsi:type="Property">
                                          <source name="Patient" xsi:type="ExpressionRef"/>
                                       </source>
                                    </operand>
                                    <operand strict="false" xsi:type="As">
                                       <operand path="low" xsi:type="Property">
                                          <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand path="abatement" xsi:type="Property">
                                                <source name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                          </source>
                                       </operand>
                                       <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </low>
                                 <high xsi:type="Add">
                                    <operand xsi:type="Add">
                                       <operand path="value" xsi:type="Property">
                                          <source path="birthDate" xsi:type="Property">
                                             <source name="Patient" xsi:type="ExpressionRef"/>
                                          </source>
                                       </operand>
                                       <operand strict="false" xsi:type="As">
                                          <operand path="high" xsi:type="Property">
                                             <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand path="abatement" xsi:type="Property">
                                                   <source name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                             </source>
                                          </operand>
                                          <asTypeSpecifier name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                    <operand value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else xsi:type="If">
                           <condition xsi:type="Is">
                              <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="abatement" xsi:type="Property">
                                    <source name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </operand>
                              <isTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </isTypeSpecifier>
                           </condition>
                           <then lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low path="low" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </low>
                              <high path="high" xsi:type="Property">
                                 <source name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand path="abatement" xsi:type="Property">
                                       <source name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </source>
                              </high>
                           </then>
                           <else xsi:type="Interval">
                              <low xsi:type="As">
                                 <operand path="low" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </lowClosedExpression>
                              <high xsi:type="As">
                                 <operand path="high" xsi:type="Property">
                                    <source strict="false" xsi:type="As">
                                       <operand xsi:type="Null"/>
                                       <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </asTypeSpecifier>
                                    </source>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source strict="false" xsi:type="As">
                                    <operand xsi:type="Null"/>
                                    <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </asTypeSpecifier>
                                 </source>
                              </highClosedExpression>
                           </else>
                        </else>
                     </else>
                  </source>
               </highClosedExpression>
            </else>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="ToPrevalenceInterval" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns an interval representing the normalized prevalence period of a given Condition."/>
            <a:t name="comment" value="Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from&#xa;onset to abatement as specified in the given Condition. If the condition is active, the resulting interval will have&#xa;a closed ending boundary. If the condition is not active, the resulting interval will have an open ending boundary."/>
            <a:t name="deprecated" value="This function is deprecated. Use the `prevalenceInterval()` fluent function instead"/>
         </annotation>
         <expression xsi:type="If">
            <condition xsi:type="Or">
               <operand xsi:type="Or">
                  <operand xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="clinicalStatus" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand name="active" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="clinicalStatus" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand name="recurrence" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="clinicalStatus" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand name="relapse" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </condition>
            <then lowClosed="true" highClosed="true" xsi:type="Interval">
               <low xsi:type="Start">
                  <operand name="ToInterval" xsi:type="FunctionRef">
                     <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="onset" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </low>
               <high xsi:type="End">
                  <operand name="ToAbatementInterval" xsi:type="FunctionRef">
                     <operand name="condition" xsi:type="OperandRef"/>
                  </operand>
               </high>
            </then>
            <else lowClosed="true" highClosed="false" xsi:type="Interval">
               <low xsi:type="Start">
                  <operand name="ToInterval" xsi:type="FunctionRef">
                     <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="onset" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </low>
               <high xsi:type="End">
                  <operand name="ToAbatementInterval" xsi:type="FunctionRef">
                     <operand name="condition" xsi:type="OperandRef"/>
                  </operand>
               </high>
            </else>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="prevalenceInterval" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns an interval representing the normalized prevalence period of a given Condition."/>
            <a:t name="comment" value="Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from&#xa;onset to abatement as specified in the given Condition. If the condition is active, the resulting interval will have&#xa;a closed ending boundary. If the condition is not active, the resulting interval will have an open ending boundary."/>
         </annotation>
         <expression xsi:type="If">
            <condition xsi:type="Or">
               <operand xsi:type="Or">
                  <operand xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="clinicalStatus" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand name="active" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="clinicalStatus" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand name="recurrence" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand path="clinicalStatus" xsi:type="Property">
                        <source name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand name="relapse" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </condition>
            <then lowClosed="true" highClosed="true" xsi:type="Interval">
               <low xsi:type="Start">
                  <operand name="toInterval" xsi:type="FunctionRef">
                     <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="onset" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </low>
               <high xsi:type="End">
                  <operand name="abatementInterval" xsi:type="FunctionRef">
                     <operand name="condition" xsi:type="OperandRef"/>
                  </operand>
               </high>
            </then>
            <else lowClosed="true" highClosed="false" xsi:type="Interval">
               <low xsi:type="Start">
                  <operand name="toInterval" xsi:type="FunctionRef">
                     <operand name="ToValue" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand path="onset" xsi:type="Property">
                           <source name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </low>
               <high xsi:type="End">
                  <operand name="abatementInterval" xsi:type="FunctionRef">
                     <operand name="condition" xsi:type="OperandRef"/>
                  </operand>
               </high>
            </else>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="GetId" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns the tail of the given uri (i.e. everything after the last slash in the URI)."/>
            <a:t name="comment" value="This function can be used to determine the logical id of a given resource. It can be used in&#xa;a single-server environment to trace references. However, this function does not attempt to resolve&#xa;or distinguish the base of the given url, and so cannot be used safely in multi-server environments."/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `getId()` instead"/>
         </annotation>
         <expression xsi:type="Last">
            <source xsi:type="Split">
               <stringToSplit name="uri" xsi:type="OperandRef"/>
               <separator valueType="t:String" value="/" xsi:type="Literal"/>
            </source>
         </expression>
         <operand name="uri">
            <operandTypeSpecifier name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="getId" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns the tail of the given uri (i.e. everything after the last slash in the URI)."/>
            <a:t name="comment" value="This function can be used to determine the logical id of a given resource. It can be used in&#xa;a single-server environment to trace references. However, this function does not attempt to resolve&#xa;or distinguish the base of the given url, and so cannot be used safely in multi-server environments."/>
         </annotation>
         <expression xsi:type="Last">
            <source xsi:type="Split">
               <stringToSplit name="uri" xsi:type="OperandRef"/>
               <separator valueType="t:String" value="/" xsi:type="Literal"/>
            </source>
         </expression>
         <operand name="uri">
            <operandTypeSpecifier name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="HasStart" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, return true if the interval has a starting boundary specified&#xa;(i.e. the start of the interval is not null and not the minimum DateTime value)"/>
            <a:t name="deprecated" value="This function is deprecated. Uee the fluent function `hasStart()` instead"/>
         </annotation>
         <expression xsi:type="Not">
            <operand xsi:type="Or">
               <operand xsi:type="IsNull">
                  <operand xsi:type="Start">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand xsi:type="Equal">
                  <operand xsi:type="Start">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand valueType="t:DateTime" xsi:type="MinValue"/>
               </operand>
            </operand>
         </expression>
         <operand name="period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="hasStart" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, return true if the interval has a starting boundary specified&#xa;(i.e. the start of the interval is not null and not the minimum DateTime value)"/>
         </annotation>
         <expression xsi:type="Not">
            <operand xsi:type="Or">
               <operand xsi:type="IsNull">
                  <operand xsi:type="Start">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand xsi:type="Equal">
                  <operand xsi:type="Start">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand valueType="t:DateTime" xsi:type="MinValue"/>
               </operand>
            </operand>
         </expression>
         <operand name="period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="HasEnd" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, returns true if the interval has an ending boundary specified&#xa;(i.e. the end of the interval is not null and not the maximum DateTime value)"/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `hasEnd()` instead"/>
         </annotation>
         <expression xsi:type="Not">
            <operand xsi:type="Or">
               <operand xsi:type="IsNull">
                  <operand xsi:type="End">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand xsi:type="Equal">
                  <operand xsi:type="End">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand valueType="t:DateTime" xsi:type="MaxValue"/>
               </operand>
            </operand>
         </expression>
         <operand name="period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="hasEnd" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, returns true if the interval has an ending boundary specified&#xa;(i.e. the end of the interval is not null and not the maximum DateTime value)"/>
         </annotation>
         <expression xsi:type="Not">
            <operand xsi:type="Or">
               <operand xsi:type="IsNull">
                  <operand xsi:type="End">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand xsi:type="Equal">
                  <operand xsi:type="End">
                     <operand name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand valueType="t:DateTime" xsi:type="MaxValue"/>
               </operand>
            </operand>
         </expression>
         <operand name="period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="Latest" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, returns the ending point if the interval has an ending boundary specified,&#xa;otherwise, returns the starting point"/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `latest()` instead"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="period">
               <expression name="toInterval" xsi:type="FunctionRef">
                  <operand name="choice" xsi:type="OperandRef"/>
               </expression>
            </source>
            <return>
               <expression xsi:type="If">
                  <condition name="HasEnd" xsi:type="FunctionRef">
                     <operand name="period" xsi:type="AliasRef"/>
                  </condition>
                  <then xsi:type="End">
                     <operand name="period" xsi:type="AliasRef"/>
                  </then>
                  <else xsi:type="Start">
                     <operand name="period" xsi:type="AliasRef"/>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier xsi:type="ChoiceTypeSpecifier">
               <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </choice>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </choice>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="latest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, returns the ending point if the interval has an ending boundary specified,&#xa;otherwise, returns the starting point"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="period">
               <expression name="toInterval" xsi:type="FunctionRef">
                  <operand name="choice" xsi:type="OperandRef"/>
               </expression>
            </source>
            <return>
               <expression xsi:type="If">
                  <condition name="HasEnd" xsi:type="FunctionRef">
                     <operand name="period" xsi:type="AliasRef"/>
                  </condition>
                  <then xsi:type="End">
                     <operand name="period" xsi:type="AliasRef"/>
                  </then>
                  <else xsi:type="Start">
                     <operand name="period" xsi:type="AliasRef"/>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier xsi:type="ChoiceTypeSpecifier">
               <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </choice>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </choice>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="Earliest" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, return the starting point if the interval has a starting boundary specified,&#xa;otherwise, return the ending point"/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `earliest()` instead"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="period">
               <expression name="toInterval" xsi:type="FunctionRef">
                  <operand name="choice" xsi:type="OperandRef"/>
               </expression>
            </source>
            <return>
               <expression xsi:type="If">
                  <condition name="HasStart" xsi:type="FunctionRef">
                     <operand name="period" xsi:type="AliasRef"/>
                  </condition>
                  <then xsi:type="Start">
                     <operand name="period" xsi:type="AliasRef"/>
                  </then>
                  <else xsi:type="End">
                     <operand name="period" xsi:type="AliasRef"/>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier xsi:type="ChoiceTypeSpecifier">
               <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </choice>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </choice>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="earliest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Given an interval, return the starting point if the interval has a starting boundary specified,&#xa;otherwise, return the ending point"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="period">
               <expression name="toInterval" xsi:type="FunctionRef">
                  <operand name="choice" xsi:type="OperandRef"/>
               </expression>
            </source>
            <return>
               <expression xsi:type="If">
                  <condition name="HasStart" xsi:type="FunctionRef">
                     <operand name="period" xsi:type="AliasRef"/>
                  </condition>
                  <then xsi:type="Start">
                     <operand name="period" xsi:type="AliasRef"/>
                  </then>
                  <else xsi:type="End">
                     <operand name="period" xsi:type="AliasRef"/>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier xsi:type="ChoiceTypeSpecifier">
               <choice name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </choice>
               <choice xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </choice>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="Interval To Day Numbers" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for&#xa;the final day if it is less than 24 hours. This also includes the first 24 hour period."/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `toDayNumbers()` instead"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="DayNumber">
               <expression xsi:type="Expand">
                  <operand xsi:type="List">
                     <element lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low valueType="t:Integer" value="1" xsi:type="Literal"/>
                        <high precision="Day" xsi:type="DurationBetween">
                           <operand xsi:type="Start">
                              <operand name="Period" xsi:type="OperandRef"/>
                           </operand>
                           <operand xsi:type="End">
                              <operand name="Period" xsi:type="OperandRef"/>
                           </operand>
                        </high>
                     </element>
                  </operand>
                  <operand resultTypeName="t:Quantity" xsi:type="Null"/>
               </expression>
            </source>
            <return>
               <expression xsi:type="End">
                  <operand name="DayNumber" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="toDayNumbers" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for&#xa;the final day if it is less than 24 hours. This also includes the first 24 hour period."/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="DayNumber">
               <expression xsi:type="Expand">
                  <operand xsi:type="List">
                     <element lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low valueType="t:Integer" value="1" xsi:type="Literal"/>
                        <high precision="Day" xsi:type="DurationBetween">
                           <operand xsi:type="Start">
                              <operand name="Period" xsi:type="OperandRef"/>
                           </operand>
                           <operand xsi:type="End">
                              <operand name="Period" xsi:type="OperandRef"/>
                           </operand>
                        </high>
                     </element>
                  </operand>
                  <operand resultTypeName="t:Quantity" xsi:type="Null"/>
               </expression>
            </source>
            <return>
               <expression xsi:type="End">
                  <operand name="DayNumber" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="Days In Period" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.&#xa;Note that the result will include intervals that are closed at the beginning and open at the end"/>
            <a:t name="deprecated" value="This function is deprecated. Use the fluent function `daysInPeriod()` instead"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="DayIndex">
               <expression name="Interval To Day Numbers" xsi:type="FunctionRef">
                  <operand name="Period" xsi:type="OperandRef"/>
               </expression>
            </source>
            <let identifier="startPeriod">
               <expression xsi:type="Add">
                  <operand xsi:type="Start">
                     <operand name="Period" xsi:type="OperandRef"/>
                  </operand>
                  <operand xsi:type="Multiply">
                     <operand value="24" unit="hours" xsi:type="Quantity"/>
                     <operand xsi:type="ToQuantity">
                        <operand xsi:type="Subtract">
                           <operand name="DayIndex" xsi:type="AliasRef"/>
                           <operand valueType="t:Integer" value="1" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
               </expression>
            </let>
            <let identifier="endPeriod">
               <expression xsi:type="If">
                  <condition xsi:type="Less">
                     <operand precision="Hour" xsi:type="DurationBetween">
                        <operand name="startPeriod" xsi:type="QueryLetRef"/>
                        <operand xsi:type="End">
                           <operand name="Period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </condition>
                  <then name="startPeriod" xsi:type="QueryLetRef"/>
                  <else xsi:type="Add">
                     <operand xsi:type="Start">
                        <operand name="Period" xsi:type="OperandRef"/>
                     </operand>
                     <operand xsi:type="Multiply">
                        <operand value="24" unit="hours" xsi:type="Quantity"/>
                        <operand xsi:type="ToQuantity">
                           <operand name="DayIndex" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </else>
               </expression>
            </let>
            <return>
               <expression xsi:type="Tuple">
                  <element name="dayIndex">
                     <value name="DayIndex" xsi:type="AliasRef"/>
                  </element>
                  <element name="dayPeriod">
                     <value lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low name="startPeriod" xsi:type="QueryLetRef"/>
                        <high name="endPeriod" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def name="daysInPeriod" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.&#xa;Note that the result will include intervals that are closed at the beginning and open at the end"/>
         </annotation>
         <expression xsi:type="Query">
            <source alias="DayIndex">
               <expression name="Interval To Day Numbers" xsi:type="FunctionRef">
                  <operand name="Period" xsi:type="OperandRef"/>
               </expression>
            </source>
            <let identifier="startPeriod">
               <expression xsi:type="Add">
                  <operand xsi:type="Start">
                     <operand name="Period" xsi:type="OperandRef"/>
                  </operand>
                  <operand xsi:type="Multiply">
                     <operand value="24" unit="hours" xsi:type="Quantity"/>
                     <operand xsi:type="ToQuantity">
                        <operand xsi:type="Subtract">
                           <operand name="DayIndex" xsi:type="AliasRef"/>
                           <operand valueType="t:Integer" value="1" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
               </expression>
            </let>
            <let identifier="endPeriod">
               <expression xsi:type="If">
                  <condition xsi:type="Less">
                     <operand precision="Hour" xsi:type="DurationBetween">
                        <operand name="startPeriod" xsi:type="QueryLetRef"/>
                        <operand xsi:type="End">
                           <operand name="Period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </condition>
                  <then name="startPeriod" xsi:type="QueryLetRef"/>
                  <else xsi:type="Add">
                     <operand xsi:type="Start">
                        <operand name="Period" xsi:type="OperandRef"/>
                     </operand>
                     <operand xsi:type="Multiply">
                        <operand value="24" unit="hours" xsi:type="Quantity"/>
                        <operand xsi:type="ToQuantity">
                           <operand name="DayIndex" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </else>
               </expression>
            </let>
            <return>
               <expression xsi:type="Tuple">
                  <element name="dayIndex">
                     <value name="DayIndex" xsi:type="AliasRef"/>
                  </element>
                  <element name="dayPeriod">
                     <value lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low name="startPeriod" xsi:type="QueryLetRef"/>
                        <high name="endPeriod" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
   </statements>
</library>