<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,EnableResultTypes" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="590">
         <a:s>library Status version '1.6.000'</a:s>
      </a:s>
   </annotation>
   <identifier id="Status" version="1.6.000"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="4:1-4:28" localIdentifier="QICore" uri="http://hl7.org/fhir">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>QICore</a:s>
               </a:s>
               <a:s> version '4.1.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="6:1-6:56" localIdentifier="FHIRHelpers" path="FHIRHelpers" version="4.3.000">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.3.000' called FHIRHelpers</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <codeSystems>
      <def localId="3" locator="8:1-8:99" resultTypeName="t:CodeSystem" name="ObservationCategoryCodes" id="http://terminology.hl7.org/CodeSystem/observation-category" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>codesystem &quot;ObservationCategoryCodes&quot;: 'http://terminology.hl7.org/CodeSystem/observation-category'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="9:1-9:101" resultTypeName="t:CodeSystem" name="ConditionClinicalStatusCodes" id="http://terminology.hl7.org/CodeSystem/condition-clinical" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>codesystem &quot;ConditionClinicalStatusCodes&quot;: 'http://terminology.hl7.org/CodeSystem/condition-clinical'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <codes>
      <def localId="6" locator="11:1-11:84" resultTypeName="t:Code" name="laboratory" id="laboratory" display="laboratory" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>code &quot;laboratory&quot;: 'laboratory' from </a:s>
               <a:s r="5">
                  <a:s>&quot;ObservationCategoryCodes&quot;</a:s>
               </a:s>
               <a:s> display 'laboratory'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="5" locator="11:38-11:63" resultTypeName="t:CodeSystem" name="ObservationCategoryCodes"/>
      </def>
      <def localId="8" locator="12:1-12:66" resultTypeName="t:Code" name="exam" id="exam" display="exam" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="8">
               <a:s>code &quot;exam&quot;: 'exam' from </a:s>
               <a:s r="7">
                  <a:s>&quot;ObservationCategoryCodes&quot;</a:s>
               </a:s>
               <a:s> display 'exam'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="7" locator="12:26-12:51" resultTypeName="t:CodeSystem" name="ObservationCategoryCodes"/>
      </def>
      <def localId="10" locator="13:1-13:72" resultTypeName="t:Code" name="survey" id="survey" display="survey" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>code &quot;survey&quot;: 'survey' from </a:s>
               <a:s r="9">
                  <a:s>&quot;ObservationCategoryCodes&quot;</a:s>
               </a:s>
               <a:s> display 'survey'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="9" locator="13:30-13:55" resultTypeName="t:CodeSystem" name="ObservationCategoryCodes"/>
      </def>
      <def localId="12" locator="14:1-14:87" resultTypeName="t:Code" name="vital-signs" id="vital-signs" display="vital-signs" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="12">
               <a:s>code &quot;vital-signs&quot;: 'vital-signs' from </a:s>
               <a:s r="11">
                  <a:s>&quot;ObservationCategoryCodes&quot;</a:s>
               </a:s>
               <a:s> display 'vital-signs'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="11" locator="14:40-14:65" resultTypeName="t:CodeSystem" name="ObservationCategoryCodes"/>
      </def>
      <def localId="14" locator="15:1-15:59" resultTypeName="t:Code" name="active" id="active" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="14">
               <a:s>code &quot;active&quot;: 'active' from </a:s>
               <a:s r="13">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="13" locator="15:30-15:59" resultTypeName="t:CodeSystem" name="ConditionClinicalStatusCodes"/>
      </def>
   </codes>
   <contexts>
      <def locator="17:1-17:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="17:1-17:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="17:1-17:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="35" locator="22:1-27:7" name="Final Survey Observation" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="35">
               <a:s>//This library contains functions that are based on QDM 5.6 to QICore 4.1.1 March 2023, used for measures authored by NCQA, with notes on intentional differences. The functions in this library have similarities to QICoreCommon (i.e., category constraints) but different in that there are additional constraints such as status or clinical status for each resource.

//Assessment, Performed
define function &quot;Final Survey Observation&quot;(Obs </a:s>
               <a:s r="16">
                  <a:s>List&lt;</a:s>
                  <a:s r="15">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="34">
                  <a:s r="34">
                     <a:s>
                        <a:s r="18">
                           <a:s r="17">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="33">
                        <a:s>where </a:s>
                        <a:s r="33">
                           <a:s r="25">
                              <a:s r="20">
                                 <a:s r="19">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="20">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="24">
                                 <a:s>{ </a:s>
                                 <a:s r="21">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="22">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="23">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="32">
                              <a:s>exists </a:s>
                              <a:s r="31">
                                 <a:s>( </a:s>
                                 <a:s r="31">
                                    <a:s>
                                       <a:s r="27">
                                          <a:s r="26">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ObservationCategory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="30">
                                       <a:s>where </a:s>
                                       <a:s r="30">
                                          <a:s r="28">
                                             <a:s>( </a:s>
                                             <a:s r="28">
                                                <a:s>ObservationCategory</a:s>
                                             </a:s>
                                             <a:s> )</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="29">
                                             <a:s>&quot;survey&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="34" locator="23:3-27:7" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="18" locator="23:3-23:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="17" locator="23:3-23:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="33" locator="24:5-27:7" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="25" locator="24:11-24:57" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="20" locator="24:11-24:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                     <source path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="24" locator="24:23-24:57" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="21" locator="24:25-24:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="22" locator="24:34-24:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="23" locator="24:45-24:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="32" locator="25:11-27:7" resultTypeName="t:Boolean" xsi:type="Exists">
                  <operand localId="31" locator="25:18-27:7" xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source localId="27" locator="25:20-25:49" alias="ObservationCategory">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <expression localId="26" locator="25:20-25:29" xsi:type="Query">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <source alias="$this">
                              <expression path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="30" locator="26:11-26:50" resultTypeName="t:Boolean" xsi:type="Equivalent">
                        <operand localId="28" locator="26:17-26:39" resultTypeName="t:Concept" name="ObservationCategory" xsi:type="AliasRef"/>
                        <operand xsi:type="ToConcept">
                           <operand localId="29" locator="26:43-26:50" resultTypeName="t:Code" name="survey" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="16" locator="22:48-22:64" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="15" locator="22:53-22:63" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="56" locator="30:1-35:7" name="isAssessmentPerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="56">
               <a:s>//Similar but different from QICoreCommon.isSurvey, which does not have status constraints
define fluent function isAssessmentPerformed(Obs </a:s>
               <a:s r="37">
                  <a:s>List&lt;</a:s>
                  <a:s r="36">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="55">
                  <a:s r="55">
                     <a:s>
                        <a:s r="39">
                           <a:s r="38">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="54">
                        <a:s>where </a:s>
                        <a:s r="54">
                           <a:s r="46">
                              <a:s r="41">
                                 <a:s r="40">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="41">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="45">
                                 <a:s>{ </a:s>
                                 <a:s r="42">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="43">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="44">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
          and </a:s>
                           <a:s r="53">
                              <a:s>exists </a:s>
                              <a:s r="52">
                                 <a:s>( </a:s>
                                 <a:s r="52">
                                    <a:s>
                                       <a:s r="48">
                                          <a:s r="47">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ObservationCategory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="51">
                                       <a:s>where </a:s>
                                       <a:s r="51">
                                          <a:s r="49">
                                             <a:s>( </a:s>
                                             <a:s r="49">
                                                <a:s>ObservationCategory</a:s>
                                             </a:s>
                                             <a:s> )</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="50">
                                             <a:s>&quot;survey&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="55" locator="31:3-35:7" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="39" locator="31:3-31:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="38" locator="31:3-31:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="54" locator="32:5-35:7" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="46" locator="32:11-32:57" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="41" locator="32:11-32:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                     <source path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="45" locator="32:23-32:57" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="42" locator="32:25-32:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="43" locator="32:34-32:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="44" locator="32:45-32:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="53" locator="33:15-35:7" resultTypeName="t:Boolean" xsi:type="Exists">
                  <operand localId="52" locator="33:22-35:7" xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source localId="48" locator="33:24-33:53" alias="ObservationCategory">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <expression localId="47" locator="33:24-33:33" xsi:type="Query">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <source alias="$this">
                              <expression path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="51" locator="34:11-34:50" resultTypeName="t:Boolean" xsi:type="Equivalent">
                        <operand localId="49" locator="34:17-34:39" resultTypeName="t:Concept" name="ObservationCategory" xsi:type="AliasRef"/>
                        <operand xsi:type="ToConcept">
                           <operand localId="50" locator="34:43-34:50" resultTypeName="t:Code" name="survey" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="37" locator="30:50-30:66" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="36" locator="30:55-30:65" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="66" locator="38:1-40:37" name="Active Condition" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="66">
               <a:s>//Diagnosis
define function &quot;Active Condition&quot;(Condition </a:s>
               <a:s r="58">
                  <a:s>List&lt;</a:s>
                  <a:s r="57">
                     <a:s>Condition</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="65">
                  <a:s r="65">
                     <a:s>
                        <a:s r="60">
                           <a:s r="59">
                              <a:s>
                                 <a:s>Condition</a:s>
                              </a:s>
                           </a:s>
                           <a:s> C</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="64">
                        <a:s>where </a:s>
                        <a:s r="64">
                           <a:s r="62">
                              <a:s r="61">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="62">
                                 <a:s>clinicalStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="63">
                              <a:s>&quot;active&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="65" locator="39:3-40:37" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="60" locator="39:3-39:13" alias="C">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="59" locator="39:3-39:11" name="Condition" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="64" locator="40:5-40:37" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="62" locator="40:11-40:26" resultTypeName="t:Concept" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand path="clinicalStatus" scope="C" xsi:type="Property"/>
               </operand>
               <operand xsi:type="ToConcept">
                  <operand localId="63" locator="40:30-40:37" resultTypeName="t:Code" name="active" xsi:type="CodeRef"/>
               </operand>
            </where>
         </expression>
         <operand name="Condition">
            <operandTypeSpecifier localId="58" locator="38:46-38:60" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="57" locator="38:51-38:59" resultTypeName="fhir:Condition" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="76" locator="43:1-45:35" name="isActiveOnly" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="76">
               <a:s>//Similar but different from QICoreCommon.isActive, which has recurrence and relapse as additional constraints
define fluent function isActiveOnly(Condition </a:s>
               <a:s r="68">
                  <a:s>List&lt;</a:s>
                  <a:s r="67">
                     <a:s>Condition</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="75">
                  <a:s r="75">
                     <a:s>
                        <a:s r="70">
                           <a:s r="69">
                              <a:s>
                                 <a:s>Condition</a:s>
                              </a:s>
                           </a:s>
                           <a:s> C</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
  </a:s>
                     <a:s r="74">
                        <a:s>where </a:s>
                        <a:s r="74">
                           <a:s r="72">
                              <a:s r="71">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="72">
                                 <a:s>clinicalStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="73">
                              <a:s>&quot;active&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="75" locator="44:3-45:35" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="70" locator="44:3-44:13" alias="C">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="69" locator="44:3-44:11" name="Condition" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="74" locator="45:3-45:35" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="72" locator="45:9-45:24" resultTypeName="t:Concept" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand path="clinicalStatus" scope="C" xsi:type="Property"/>
               </operand>
               <operand xsi:type="ToConcept">
                  <operand localId="73" locator="45:28-45:35" resultTypeName="t:Code" name="active" xsi:type="CodeRef"/>
               </operand>
            </where>
         </expression>
         <operand name="Condition">
            <operandTypeSpecifier localId="68" locator="43:47-43:61" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="67" locator="43:52-43:60" resultTypeName="fhir:Condition" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="93" locator="48:1-51:28" name="Completed or Ongoing Device Request" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="93">
               <a:s>//Device, Order - Personal Use Devices: active and completed only
define function &quot;Completed or Ongoing Device Request&quot;(DeviceRequest </a:s>
               <a:s r="78">
                  <a:s>List&lt;</a:s>
                  <a:s r="77">
                     <a:s>DeviceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="92">
                  <a:s r="92">
                     <a:s>
                        <a:s r="80">
                           <a:s r="79">
                              <a:s>
                                 <a:s>DeviceRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> D</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="91">
                        <a:s>where </a:s>
                        <a:s r="91">
                           <a:s r="86">
                              <a:s r="82">
                                 <a:s r="81">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="82">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="85">
                                 <a:s>{ </a:s>
                                 <a:s r="83">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="84">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="90">
                              <a:s r="88">
                                 <a:s r="87">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="88">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="89">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="92" locator="49:3-51:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="80" locator="49:3-49:17" alias="D">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="79" locator="49:3-49:15" name="DeviceRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="91" locator="50:5-51:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="86" locator="50:11-50:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="82" locator="50:11-50:18" resultTypeName="fhir:DeviceRequestStatus" path="value" xsi:type="Property">
                     <source path="status" scope="D" xsi:type="Property"/>
                  </operand>
                  <operand localId="85" locator="50:23-50:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="83" locator="50:25-50:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="84" locator="50:35-50:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="90" locator="51:11-51:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="88" locator="51:11-51:18" resultTypeName="fhir:RequestIntent" path="value" xsi:type="Property">
                     <source path="intent" scope="D" xsi:type="Property"/>
                  </operand>
                  <operand localId="89" locator="51:22-51:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="DeviceRequest">
            <operandTypeSpecifier localId="78" locator="48:69-48:87" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="77" locator="48:74-48:86" resultTypeName="fhir:DeviceRequest" name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="110" locator="53:1-56:28" name="isDeviceOrder" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="110">
               <a:s>define fluent function isDeviceOrder(DeviceRequest </a:s>
               <a:s r="95">
                  <a:s>List&lt;</a:s>
                  <a:s r="94">
                     <a:s>DeviceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="109">
                  <a:s r="109">
                     <a:s>
                        <a:s r="97">
                           <a:s r="96">
                              <a:s>
                                 <a:s>DeviceRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> D</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="108">
                        <a:s>where </a:s>
                        <a:s r="108">
                           <a:s r="103">
                              <a:s r="99">
                                 <a:s r="98">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="99">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="102">
                                 <a:s>{ </a:s>
                                 <a:s r="100">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="101">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="107">
                              <a:s r="105">
                                 <a:s r="104">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="105">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="106">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="109" locator="54:3-56:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="97" locator="54:3-54:17" alias="D">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="96" locator="54:3-54:15" name="DeviceRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="108" locator="55:5-56:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="103" locator="55:11-55:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="99" locator="55:11-55:18" resultTypeName="fhir:DeviceRequestStatus" path="value" xsi:type="Property">
                     <source path="status" scope="D" xsi:type="Property"/>
                  </operand>
                  <operand localId="102" locator="55:23-55:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="100" locator="55:25-55:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="101" locator="55:35-55:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="107" locator="56:11-56:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="105" locator="56:11-56:18" resultTypeName="fhir:RequestIntent" path="value" xsi:type="Property">
                     <source path="intent" scope="D" xsi:type="Property"/>
                  </operand>
                  <operand localId="106" locator="56:22-56:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="DeviceRequest">
            <operandTypeSpecifier localId="95" locator="53:52-53:70" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="94" locator="53:57-53:69" resultTypeName="fhir:DeviceRequest" name="fhir:DeviceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="127" locator="61:1-64:28" name="Completed or Ongoing Service Request" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="127">
               <a:s>//Diagnostic Study, Order: active and completed only
//Intervention, Order: active and completed only
//Laboratory Test, Order: active and completed only
define function &quot;Completed or Ongoing Service Request&quot;(ServiceRequest </a:s>
               <a:s r="112">
                  <a:s>List&lt;</a:s>
                  <a:s r="111">
                     <a:s>ServiceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="126">
                  <a:s r="126">
                     <a:s>
                        <a:s r="114">
                           <a:s r="113">
                              <a:s>
                                 <a:s>ServiceRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> S</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="125">
                        <a:s>where </a:s>
                        <a:s r="125">
                           <a:s r="120">
                              <a:s r="116">
                                 <a:s r="115">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="116">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="119">
                                 <a:s>{ </a:s>
                                 <a:s r="117">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="118">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="124">
                              <a:s r="122">
                                 <a:s r="121">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="122">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="123">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="126" locator="62:3-64:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="114" locator="62:3-62:18" alias="S">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="113" locator="62:3-62:16" name="ServiceRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="125" locator="63:5-64:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="120" locator="63:11-63:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="116" locator="63:11-63:18" resultTypeName="fhir:ServiceRequestStatus" path="value" xsi:type="Property">
                     <source path="status" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="119" locator="63:23-63:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="117" locator="63:25-63:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="118" locator="63:35-63:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="124" locator="64:11-64:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="122" locator="64:11-64:18" resultTypeName="fhir:ServiceRequestIntent" path="value" xsi:type="Property">
                     <source path="intent" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="123" locator="64:22-64:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="ServiceRequest">
            <operandTypeSpecifier localId="112" locator="61:71-61:90" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="111" locator="61:76-61:89" resultTypeName="fhir:ServiceRequest" name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="144" locator="66:1-69:28" name="isDiagnosticStudyOrder" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="144">
               <a:s>define fluent function isDiagnosticStudyOrder(ServiceRequest </a:s>
               <a:s r="129">
                  <a:s>List&lt;</a:s>
                  <a:s r="128">
                     <a:s>ServiceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="143">
                  <a:s r="143">
                     <a:s>
                        <a:s r="131">
                           <a:s r="130">
                              <a:s>
                                 <a:s>ServiceRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> S</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="142">
                        <a:s>where </a:s>
                        <a:s r="142">
                           <a:s r="137">
                              <a:s r="133">
                                 <a:s r="132">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="133">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="136">
                                 <a:s>{ </a:s>
                                 <a:s r="134">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="135">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="141">
                              <a:s r="139">
                                 <a:s r="138">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="139">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="140">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="143" locator="67:3-69:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="131" locator="67:3-67:18" alias="S">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="130" locator="67:3-67:16" name="ServiceRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="142" locator="68:5-69:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="137" locator="68:11-68:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="133" locator="68:11-68:18" resultTypeName="fhir:ServiceRequestStatus" path="value" xsi:type="Property">
                     <source path="status" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="136" locator="68:23-68:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="134" locator="68:25-68:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="135" locator="68:35-68:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="141" locator="69:11-69:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="139" locator="69:11-69:18" resultTypeName="fhir:ServiceRequestIntent" path="value" xsi:type="Property">
                     <source path="intent" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="140" locator="69:22-69:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="ServiceRequest">
            <operandTypeSpecifier localId="129" locator="66:62-66:81" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="128" locator="66:67-66:80" resultTypeName="fhir:ServiceRequest" name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="161" locator="71:1-74:28" name="isInterventionOrder" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="161">
               <a:s>define fluent function isInterventionOrder(ServiceRequest </a:s>
               <a:s r="146">
                  <a:s>List&lt;</a:s>
                  <a:s r="145">
                     <a:s>ServiceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="160">
                  <a:s r="160">
                     <a:s>
                        <a:s r="148">
                           <a:s r="147">
                              <a:s>
                                 <a:s>ServiceRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> S</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="159">
                        <a:s>where </a:s>
                        <a:s r="159">
                           <a:s r="154">
                              <a:s r="150">
                                 <a:s r="149">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="150">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="153">
                                 <a:s>{ </a:s>
                                 <a:s r="151">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="152">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="158">
                              <a:s r="156">
                                 <a:s r="155">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="156">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="157">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="160" locator="72:3-74:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="148" locator="72:3-72:18" alias="S">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="147" locator="72:3-72:16" name="ServiceRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="159" locator="73:5-74:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="154" locator="73:11-73:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="150" locator="73:11-73:18" resultTypeName="fhir:ServiceRequestStatus" path="value" xsi:type="Property">
                     <source path="status" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="153" locator="73:23-73:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="151" locator="73:25-73:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="152" locator="73:35-73:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="158" locator="74:11-74:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="156" locator="74:11-74:18" resultTypeName="fhir:ServiceRequestIntent" path="value" xsi:type="Property">
                     <source path="intent" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="157" locator="74:22-74:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="ServiceRequest">
            <operandTypeSpecifier localId="146" locator="71:59-71:78" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="145" locator="71:64-71:77" resultTypeName="fhir:ServiceRequest" name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="178" locator="76:1-79:28" name="isLaboratoryTestOrder" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="178">
               <a:s>define fluent function isLaboratoryTestOrder(ServiceRequest </a:s>
               <a:s r="163">
                  <a:s>List&lt;</a:s>
                  <a:s r="162">
                     <a:s>ServiceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="177">
                  <a:s r="177">
                     <a:s>
                        <a:s r="165">
                           <a:s r="164">
                              <a:s>
                                 <a:s>ServiceRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> S</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="176">
                        <a:s>where </a:s>
                        <a:s r="176">
                           <a:s r="171">
                              <a:s r="167">
                                 <a:s r="166">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="167">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="170">
                                 <a:s>{ </a:s>
                                 <a:s r="168">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="169">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="175">
                              <a:s r="173">
                                 <a:s r="172">
                                    <a:s>S</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="173">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="174">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="177" locator="77:3-79:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="165" locator="77:3-77:18" alias="S">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="164" locator="77:3-77:16" name="ServiceRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="176" locator="78:5-79:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="171" locator="78:11-78:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="167" locator="78:11-78:18" resultTypeName="fhir:ServiceRequestStatus" path="value" xsi:type="Property">
                     <source path="status" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="170" locator="78:23-78:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="168" locator="78:25-78:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="169" locator="78:35-78:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="175" locator="79:11-79:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="173" locator="79:11-79:18" resultTypeName="fhir:ServiceRequestIntent" path="value" xsi:type="Property">
                     <source path="intent" scope="S" xsi:type="Property"/>
                  </operand>
                  <operand localId="174" locator="79:22-79:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="ServiceRequest">
            <operandTypeSpecifier localId="163" locator="76:61-76:80" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="162" locator="76:66-76:79" resultTypeName="fhir:ServiceRequest" name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="191" locator="82:1-84:56" name="Final Observation" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="191">
               <a:s>//Diagnostic Study, Performed
define function &quot;Final Observation&quot;(Obs </a:s>
               <a:s r="180">
                  <a:s>List&lt;</a:s>
                  <a:s r="179">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="190">
                  <a:s r="190">
                     <a:s>
                        <a:s r="182">
                           <a:s r="181">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="189">
                        <a:s>where </a:s>
                        <a:s r="189">
                           <a:s r="184">
                              <a:s r="183">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="184">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="188">
                              <a:s>{</a:s>
                              <a:s r="185">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="186">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="187">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="190" locator="83:3-84:56" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="182" locator="83:3-83:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="181" locator="83:3-83:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="189" locator="84:5-84:56" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="184" locator="84:11-84:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="188" locator="84:23-84:56" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="185" locator="84:24-84:30" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="186" locator="84:33-84:41" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="187" locator="84:44-84:54" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="180" locator="82:41-82:57" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="179" locator="82:46-82:56" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="204" locator="86:1-88:56" name="isDiagnosticStudyPerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="204">
               <a:s>define fluent function isDiagnosticStudyPerformed(Obs </a:s>
               <a:s r="193">
                  <a:s>List&lt;</a:s>
                  <a:s r="192">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="203">
                  <a:s r="203">
                     <a:s>
                        <a:s r="195">
                           <a:s r="194">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="202">
                        <a:s>where </a:s>
                        <a:s r="202">
                           <a:s r="197">
                              <a:s r="196">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="197">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="201">
                              <a:s>{</a:s>
                              <a:s r="198">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="199">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="200">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="203" locator="87:3-88:56" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="195" locator="87:3-87:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="194" locator="87:3-87:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="202" locator="88:5-88:56" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="197" locator="88:11-88:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="201" locator="88:23-88:56" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="198" locator="88:24-88:30" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="199" locator="88:33-88:41" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="200" locator="88:44-88:54" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="193" locator="86:55-86:71" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="192" locator="86:60-86:70" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="219" locator="92:1-94:82" name="Finished Encounter" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="219">
               <a:s>//Encounter, Performed
//General usage unless required otherwise by the measure's specific use case (e.g., follow-up encounters)
define function &quot;Finished Encounter&quot;(Enc </a:s>
               <a:s r="206">
                  <a:s>List&lt;</a:s>
                  <a:s r="205">
                     <a:s>Encounter</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="218">
                  <a:s r="218">
                     <a:s>
                        <a:s r="208">
                           <a:s r="207">
                              <a:s>
                                 <a:s>Enc</a:s>
                              </a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="217">
                        <a:s>where </a:s>
                        <a:s r="217">
                           <a:s r="210">
                              <a:s r="209">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="210">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="216">
                              <a:s>{</a:s>
                              <a:s r="211">
                                 <a:s>'finished'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="212">
                                 <a:s>'arrived'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="213">
                                 <a:s>'triaged'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="214">
                                 <a:s>'in-progress'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="215">
                                 <a:s>'onleave'</a:s>
                              </a:s>
                              <a:s>}</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="218" locator="93:3-94:82" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="208" locator="93:3-93:7" alias="E">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="207" locator="93:3-93:5" name="Enc" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="217" locator="94:5-94:82" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="210" locator="94:11-94:18" resultTypeName="fhir:EncounterStatus" path="value" xsi:type="Property">
                  <source path="status" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="216" locator="94:23-94:82" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="211" locator="94:24-94:33" resultTypeName="t:String" valueType="t:String" value="finished" xsi:type="Literal"/>
                  <element localId="212" locator="94:36-94:44" resultTypeName="t:String" valueType="t:String" value="arrived" xsi:type="Literal"/>
                  <element localId="213" locator="94:47-94:55" resultTypeName="t:String" valueType="t:String" value="triaged" xsi:type="Literal"/>
                  <element localId="214" locator="94:58-94:70" resultTypeName="t:String" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                  <element localId="215" locator="94:73-94:81" resultTypeName="t:String" valueType="t:String" value="onleave" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Enc">
            <operandTypeSpecifier localId="206" locator="92:42-92:56" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="205" locator="92:47-92:55" resultTypeName="fhir:Encounter" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="234" locator="96:1-98:82" name="isEncounterPerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="234">
               <a:s>define fluent function isEncounterPerformed(Enc </a:s>
               <a:s r="221">
                  <a:s>List&lt;</a:s>
                  <a:s r="220">
                     <a:s>Encounter</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="233">
                  <a:s r="233">
                     <a:s>
                        <a:s r="223">
                           <a:s r="222">
                              <a:s>
                                 <a:s>Enc</a:s>
                              </a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="232">
                        <a:s>where </a:s>
                        <a:s r="232">
                           <a:s r="225">
                              <a:s r="224">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="225">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="231">
                              <a:s>{</a:s>
                              <a:s r="226">
                                 <a:s>'finished'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="227">
                                 <a:s>'arrived'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="228">
                                 <a:s>'triaged'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="229">
                                 <a:s>'in-progress'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="230">
                                 <a:s>'onleave'</a:s>
                              </a:s>
                              <a:s>}</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="233" locator="97:3-98:82" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="223" locator="97:3-97:7" alias="E">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="222" locator="97:3-97:5" name="Enc" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="232" locator="98:5-98:82" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="225" locator="98:11-98:18" resultTypeName="fhir:EncounterStatus" path="value" xsi:type="Property">
                  <source path="status" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="231" locator="98:23-98:82" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="226" locator="98:24-98:33" resultTypeName="t:String" valueType="t:String" value="finished" xsi:type="Literal"/>
                  <element localId="227" locator="98:36-98:44" resultTypeName="t:String" valueType="t:String" value="arrived" xsi:type="Literal"/>
                  <element localId="228" locator="98:47-98:55" resultTypeName="t:String" valueType="t:String" value="triaged" xsi:type="Literal"/>
                  <element localId="229" locator="98:58-98:70" resultTypeName="t:String" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                  <element localId="230" locator="98:73-98:81" resultTypeName="t:String" valueType="t:String" value="onleave" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Enc">
            <operandTypeSpecifier localId="221" locator="96:49-96:63" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="220" locator="96:54-96:62" resultTypeName="fhir:Encounter" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="244" locator="109:1-111:32" name="Completed Immunization" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="244">
               <a:s>// //Encounter, Performed: finished and in-progress only
// define function &quot;Finished or Ongoing Encounter&quot;(Enc List&lt;Encounter>):
//   Enc E
//     where E.status in { 'finished', 'in-progress' }

// define fluent function &quot;isEncounterPerformed&quot;(Enc Encounter):
//   Enc.status in { 'finished', 'in-progress' }

//Immunization, Administered: completed only
define function &quot;Completed Immunization&quot;(Immunization </a:s>
               <a:s r="236">
                  <a:s>List&lt;</a:s>
                  <a:s r="235">
                     <a:s>Immunization</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="243">
                  <a:s r="243">
                     <a:s>
                        <a:s r="238">
                           <a:s r="237">
                              <a:s>
                                 <a:s>Immunization</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="242">
                        <a:s>where </a:s>
                        <a:s r="242">
                           <a:s r="240">
                              <a:s r="239">
                                 <a:s>I</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="240">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="241">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="243" locator="110:3-111:32" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="238" locator="110:3-110:16" alias="I">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="237" locator="110:3-110:14" name="Immunization" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="242" locator="111:5-111:32" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="240" locator="111:11-111:18" resultTypeName="t:String" path="value" xsi:type="Property">
                  <source path="status" scope="I" xsi:type="Property"/>
               </operand>
               <operand localId="241" locator="111:22-111:32" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
         <operand name="Immunization">
            <operandTypeSpecifier localId="236" locator="109:55-109:72" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="235" locator="109:60-109:71" resultTypeName="fhir:Immunization" name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="254" locator="113:1-115:32" name="isImmunizationAdministered" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="254">
               <a:s>define fluent function isImmunizationAdministered(Immunization </a:s>
               <a:s r="246">
                  <a:s>List&lt;</a:s>
                  <a:s r="245">
                     <a:s>Immunization</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="253">
                  <a:s r="253">
                     <a:s>
                        <a:s r="248">
                           <a:s r="247">
                              <a:s>
                                 <a:s>Immunization</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="252">
                        <a:s>where </a:s>
                        <a:s r="252">
                           <a:s r="250">
                              <a:s r="249">
                                 <a:s>I</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="250">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="251">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="253" locator="114:3-115:32" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="248" locator="114:3-114:16" alias="I">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="247" locator="114:3-114:14" name="Immunization" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="252" locator="115:5-115:32" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="250" locator="115:11-115:18" resultTypeName="t:String" path="value" xsi:type="Property">
                  <source path="status" scope="I" xsi:type="Property"/>
               </operand>
               <operand localId="251" locator="115:22-115:32" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
         <operand name="Immunization">
            <operandTypeSpecifier localId="246" locator="113:64-113:81" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="245" locator="113:69-113:80" resultTypeName="fhir:Immunization" name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="264" locator="119:1-121:32" name="Completed Procedure" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="264">
               <a:s>//Intervention, Performed
//Procedure, Performed
define function &quot;Completed Procedure&quot;(Proc </a:s>
               <a:s r="256">
                  <a:s>List&lt;</a:s>
                  <a:s r="255">
                     <a:s>Procedure</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="263">
                  <a:s r="263">
                     <a:s>
                        <a:s r="258">
                           <a:s r="257">
                              <a:s>
                                 <a:s>Proc</a:s>
                              </a:s>
                           </a:s>
                           <a:s> P</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="262">
                        <a:s>where </a:s>
                        <a:s r="262">
                           <a:s r="260">
                              <a:s r="259">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="260">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="261">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="263" locator="120:3-121:32" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="258" locator="120:3-120:8" alias="P">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="257" locator="120:3-120:6" name="Proc" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="262" locator="121:5-121:32" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="260" locator="121:11-121:18" resultTypeName="t:String" path="value" xsi:type="Property">
                  <source path="status" scope="P" xsi:type="Property"/>
               </operand>
               <operand localId="261" locator="121:22-121:32" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
         <operand name="Proc">
            <operandTypeSpecifier localId="256" locator="119:44-119:58" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="255" locator="119:49-119:57" resultTypeName="fhir:Procedure" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="274" locator="123:1-125:32" name="isInterventionPerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="274">
               <a:s>define fluent function isInterventionPerformed(Proc </a:s>
               <a:s r="266">
                  <a:s>List&lt;</a:s>
                  <a:s r="265">
                     <a:s>Procedure</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="273">
                  <a:s r="273">
                     <a:s>
                        <a:s r="268">
                           <a:s r="267">
                              <a:s>
                                 <a:s>Proc</a:s>
                              </a:s>
                           </a:s>
                           <a:s> P</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="272">
                        <a:s>where </a:s>
                        <a:s r="272">
                           <a:s r="270">
                              <a:s r="269">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="270">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="271">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="273" locator="124:3-125:32" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="268" locator="124:3-124:8" alias="P">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="267" locator="124:3-124:6" name="Proc" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="272" locator="125:5-125:32" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="270" locator="125:11-125:18" resultTypeName="t:String" path="value" xsi:type="Property">
                  <source path="status" scope="P" xsi:type="Property"/>
               </operand>
               <operand localId="271" locator="125:22-125:32" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
         <operand name="Proc">
            <operandTypeSpecifier localId="266" locator="123:53-123:67" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="265" locator="123:58-123:66" resultTypeName="fhir:Procedure" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="284" locator="127:1-129:32" name="isProcedurePerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="284">
               <a:s>define fluent function isProcedurePerformed(Proc </a:s>
               <a:s r="276">
                  <a:s>List&lt;</a:s>
                  <a:s r="275">
                     <a:s>Procedure</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="283">
                  <a:s r="283">
                     <a:s>
                        <a:s r="278">
                           <a:s r="277">
                              <a:s>
                                 <a:s>Proc</a:s>
                              </a:s>
                           </a:s>
                           <a:s> P</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="282">
                        <a:s>where </a:s>
                        <a:s r="282">
                           <a:s r="280">
                              <a:s r="279">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="280">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="281">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="283" locator="128:3-129:32" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="278" locator="128:3-128:8" alias="P">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="277" locator="128:3-128:6" name="Proc" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="282" locator="129:5-129:32" resultTypeName="t:Boolean" xsi:type="Equivalent">
               <operand localId="280" locator="129:11-129:18" resultTypeName="t:String" path="value" xsi:type="Property">
                  <source path="status" scope="P" xsi:type="Property"/>
               </operand>
               <operand localId="281" locator="129:22-129:32" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
         <operand name="Proc">
            <operandTypeSpecifier localId="276" locator="127:50-127:64" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="275" locator="127:55-127:63" resultTypeName="fhir:Procedure" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="305" locator="132:1-137:7" name="Final Lab Observation" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="305">
               <a:s>//Laboratory Test, Performed
define function &quot;Final Lab Observation&quot;(Obs </a:s>
               <a:s r="286">
                  <a:s>List&lt;</a:s>
                  <a:s r="285">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="304">
                  <a:s r="304">
                     <a:s>
                        <a:s r="288">
                           <a:s r="287">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="303">
                        <a:s>where </a:s>
                        <a:s r="303">
                           <a:s r="295">
                              <a:s r="290">
                                 <a:s r="289">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="290">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="294">
                                 <a:s>{ </a:s>
                                 <a:s r="291">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="292">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="293">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="302">
                              <a:s>exists </a:s>
                              <a:s r="301">
                                 <a:s>( </a:s>
                                 <a:s r="301">
                                    <a:s>
                                       <a:s r="297">
                                          <a:s r="296">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ObservationCategory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="300">
                                       <a:s>where </a:s>
                                       <a:s r="300">
                                          <a:s r="298">
                                             <a:s>( </a:s>
                                             <a:s r="298">
                                                <a:s>ObservationCategory</a:s>
                                             </a:s>
                                             <a:s> )</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="299">
                                             <a:s>&quot;laboratory&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="304" locator="133:3-137:7" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="288" locator="133:3-133:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="287" locator="133:3-133:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="303" locator="134:5-137:7" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="295" locator="134:11-134:57" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="290" locator="134:11-134:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                     <source path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="294" locator="134:23-134:57" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="291" locator="134:25-134:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="292" locator="134:34-134:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="293" locator="134:45-134:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="302" locator="135:11-137:7" resultTypeName="t:Boolean" xsi:type="Exists">
                  <operand localId="301" locator="135:18-137:7" xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source localId="297" locator="135:20-135:49" alias="ObservationCategory">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <expression localId="296" locator="135:20-135:29" xsi:type="Query">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <source alias="$this">
                              <expression path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="300" locator="136:11-136:54" resultTypeName="t:Boolean" xsi:type="Equivalent">
                        <operand localId="298" locator="136:17-136:39" resultTypeName="t:Concept" name="ObservationCategory" xsi:type="AliasRef"/>
                        <operand xsi:type="ToConcept">
                           <operand localId="299" locator="136:43-136:54" resultTypeName="t:Code" name="laboratory" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="286" locator="132:45-132:61" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="285" locator="132:50-132:60" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="326" locator="139:1-144:7" name="isLaboratoryTestPerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="326">
               <a:s>define fluent function isLaboratoryTestPerformed(Obs </a:s>
               <a:s r="307">
                  <a:s>List&lt;</a:s>
                  <a:s r="306">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="325">
                  <a:s r="325">
                     <a:s>
                        <a:s r="309">
                           <a:s r="308">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="324">
                        <a:s>where </a:s>
                        <a:s r="324">
                           <a:s r="316">
                              <a:s r="311">
                                 <a:s r="310">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="311">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="315">
                                 <a:s>{ </a:s>
                                 <a:s r="312">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="313">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="314">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="323">
                              <a:s>exists </a:s>
                              <a:s r="322">
                                 <a:s>( </a:s>
                                 <a:s r="322">
                                    <a:s>
                                       <a:s r="318">
                                          <a:s r="317">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ObservationCategory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="321">
                                       <a:s>where </a:s>
                                       <a:s r="321">
                                          <a:s r="319">
                                             <a:s>( </a:s>
                                             <a:s r="319">
                                                <a:s>ObservationCategory</a:s>
                                             </a:s>
                                             <a:s> )</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="320">
                                             <a:s>&quot;laboratory&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="325" locator="140:3-144:7" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="309" locator="140:3-140:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="308" locator="140:3-140:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="324" locator="141:5-144:7" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="316" locator="141:11-141:57" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="311" locator="141:11-141:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                     <source path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="315" locator="141:23-141:57" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="312" locator="141:25-141:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="313" locator="141:34-141:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="314" locator="141:45-141:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="323" locator="142:11-144:7" resultTypeName="t:Boolean" xsi:type="Exists">
                  <operand localId="322" locator="142:18-144:7" xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source localId="318" locator="142:20-142:49" alias="ObservationCategory">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <expression localId="317" locator="142:20-142:29" xsi:type="Query">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <source alias="$this">
                              <expression path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="321" locator="143:11-143:54" resultTypeName="t:Boolean" xsi:type="Equivalent">
                        <operand localId="319" locator="143:17-143:39" resultTypeName="t:Concept" name="ObservationCategory" xsi:type="AliasRef"/>
                        <operand xsi:type="ToConcept">
                           <operand localId="320" locator="143:43-143:54" resultTypeName="t:Code" name="laboratory" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="307" locator="139:54-139:70" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="306" locator="139:59-139:69" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="341" locator="147:1-150:28" name="Active Medication" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="341">
               <a:s>//Medication, Active
define function &quot;Active Medication&quot;(MedicationRequest </a:s>
               <a:s r="328">
                  <a:s>List&lt;</a:s>
                  <a:s r="327">
                     <a:s>MedicationRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="340">
                  <a:s r="340">
                     <a:s>
                        <a:s r="330">
                           <a:s r="329">
                              <a:s>
                                 <a:s>MedicationRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="339">
                        <a:s>where </a:s>
                        <a:s r="339">
                           <a:s r="334">
                              <a:s r="332">
                                 <a:s r="331">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="332">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="333">
                                 <a:s>'active'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="338">
                              <a:s r="336">
                                 <a:s r="335">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="336">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="337">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="340" locator="148:3-150:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="330" locator="148:3-148:21" alias="M">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="329" locator="148:3-148:19" name="MedicationRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="339" locator="149:5-150:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="334" locator="149:11-149:29" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="332" locator="149:11-149:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="status" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="333" locator="149:22-149:29" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
               </operand>
               <operand localId="338" locator="150:11-150:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="336" locator="150:11-150:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="intent" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="337" locator="150:22-150:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="MedicationRequest">
            <operandTypeSpecifier localId="328" locator="147:55-147:77" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="327" locator="147:60-147:76" resultTypeName="fhir:MedicationRequest" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="356" locator="152:1-155:28" name="isMedicationActive" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="356">
               <a:s>define fluent function isMedicationActive(MedicationRequest </a:s>
               <a:s r="343">
                  <a:s>List&lt;</a:s>
                  <a:s r="342">
                     <a:s>MedicationRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="355">
                  <a:s r="355">
                     <a:s>
                        <a:s r="345">
                           <a:s r="344">
                              <a:s>
                                 <a:s>MedicationRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="354">
                        <a:s>where </a:s>
                        <a:s r="354">
                           <a:s r="349">
                              <a:s r="347">
                                 <a:s r="346">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="347">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="348">
                                 <a:s>'active'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="353">
                              <a:s r="351">
                                 <a:s r="350">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="351">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="352">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="355" locator="153:3-155:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="345" locator="153:3-153:21" alias="M">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="344" locator="153:3-153:19" name="MedicationRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="354" locator="154:5-155:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="349" locator="154:11-154:29" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="347" locator="154:11-154:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="status" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="348" locator="154:22-154:29" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
               </operand>
               <operand localId="353" locator="155:11-155:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="351" locator="155:11-155:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="intent" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="352" locator="155:22-155:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="MedicationRequest">
            <operandTypeSpecifier localId="343" locator="152:61-152:83" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="342" locator="152:66-152:82" resultTypeName="fhir:MedicationRequest" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="369" locator="158:1-160:63" name="Dispensed Medication" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="369">
               <a:s>//Medication, Dispensed
define function &quot;Dispensed Medication&quot;(Med </a:s>
               <a:s r="358">
                  <a:s>List&lt;</a:s>
                  <a:s r="357">
                     <a:s>MedicationDispense</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="368">
                  <a:s r="368">
                     <a:s>
                        <a:s r="360">
                           <a:s r="359">
                              <a:s>
                                 <a:s>Med</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="367">
                        <a:s>where </a:s>
                        <a:s r="367">
                           <a:s r="362">
                              <a:s r="361">
                                 <a:s>M</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="362">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="366">
                              <a:s>{ </a:s>
                              <a:s r="363">
                                 <a:s>'completed'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="364">
                                 <a:s>'in-progress'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="365">
                                 <a:s>'on-hold'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="368" locator="159:3-160:63" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="360" locator="159:3-159:7" alias="M">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="359" locator="159:3-159:5" name="Med" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="367" locator="160:5-160:63" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="362" locator="160:11-160:18" resultTypeName="fhir:MedicationDispenseStatus" path="value" xsi:type="Property">
                  <source path="status" scope="M" xsi:type="Property"/>
               </operand>
               <operand localId="366" locator="160:23-160:63" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="363" locator="160:25-160:35" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  <element localId="364" locator="160:38-160:50" resultTypeName="t:String" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                  <element localId="365" locator="160:53-160:61" resultTypeName="t:String" valueType="t:String" value="on-hold" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Med">
            <operandTypeSpecifier localId="358" locator="158:44-158:67" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="357" locator="158:49-158:66" resultTypeName="fhir:MedicationDispense" name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="382" locator="162:1-164:63" name="isMedicationDispensed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="382">
               <a:s>define fluent function isMedicationDispensed(Med </a:s>
               <a:s r="371">
                  <a:s>List&lt;</a:s>
                  <a:s r="370">
                     <a:s>MedicationDispense</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="381">
                  <a:s r="381">
                     <a:s>
                        <a:s r="373">
                           <a:s r="372">
                              <a:s>
                                 <a:s>Med</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="380">
                        <a:s>where </a:s>
                        <a:s r="380">
                           <a:s r="375">
                              <a:s r="374">
                                 <a:s>M</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="375">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="379">
                              <a:s>{ </a:s>
                              <a:s r="376">
                                 <a:s>'completed'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="377">
                                 <a:s>'in-progress'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="378">
                                 <a:s>'on-hold'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="381" locator="163:3-164:63" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="373" locator="163:3-163:7" alias="M">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="372" locator="163:3-163:5" name="Med" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="380" locator="164:5-164:63" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="375" locator="164:11-164:18" resultTypeName="fhir:MedicationDispenseStatus" path="value" xsi:type="Property">
                  <source path="status" scope="M" xsi:type="Property"/>
               </operand>
               <operand localId="379" locator="164:23-164:63" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="376" locator="164:25-164:35" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  <element localId="377" locator="164:38-164:50" resultTypeName="t:String" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                  <element localId="378" locator="164:53-164:61" resultTypeName="t:String" valueType="t:String" value="on-hold" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Med">
            <operandTypeSpecifier localId="371" locator="162:50-162:73" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="370" locator="162:55-162:72" resultTypeName="fhir:MedicationDispense" name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="399" locator="167:1-170:28" name="Active or Completed Medication Request" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="399">
               <a:s>//Medication, Order: active and completed only
define function &quot;Active or Completed Medication Request&quot;(MedicationRequest </a:s>
               <a:s r="384">
                  <a:s>List&lt;</a:s>
                  <a:s r="383">
                     <a:s>MedicationRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="398">
                  <a:s r="398">
                     <a:s>
                        <a:s r="386">
                           <a:s r="385">
                              <a:s>
                                 <a:s>MedicationRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="397">
                        <a:s>where </a:s>
                        <a:s r="397">
                           <a:s r="392">
                              <a:s r="388">
                                 <a:s r="387">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="388">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="391">
                                 <a:s>{ </a:s>
                                 <a:s r="389">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="390">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="396">
                              <a:s r="394">
                                 <a:s r="393">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="394">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="395">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="398" locator="168:3-170:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="386" locator="168:3-168:21" alias="M">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="385" locator="168:3-168:19" name="MedicationRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="397" locator="169:5-170:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="392" locator="169:11-169:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="388" locator="169:11-169:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="status" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="391" locator="169:23-169:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="389" locator="169:25-169:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="390" locator="169:35-169:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="396" locator="170:11-170:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="394" locator="170:11-170:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="intent" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="395" locator="170:22-170:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="MedicationRequest">
            <operandTypeSpecifier localId="384" locator="167:76-167:98" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="383" locator="167:81-167:97" resultTypeName="fhir:MedicationRequest" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="416" locator="172:1-175:28" name="isMedicationOrder" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="416">
               <a:s>define fluent function isMedicationOrder(MedicationRequest </a:s>
               <a:s r="401">
                  <a:s>List&lt;</a:s>
                  <a:s r="400">
                     <a:s>MedicationRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="415">
                  <a:s r="415">
                     <a:s>
                        <a:s r="403">
                           <a:s r="402">
                              <a:s>
                                 <a:s>MedicationRequest</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="414">
                        <a:s>where </a:s>
                        <a:s r="414">
                           <a:s r="409">
                              <a:s r="405">
                                 <a:s r="404">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="405">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="408">
                                 <a:s>{ </a:s>
                                 <a:s r="406">
                                    <a:s>'active'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="407">
                                    <a:s>'completed'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="413">
                              <a:s r="411">
                                 <a:s r="410">
                                    <a:s>M</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="411">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="412">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="415" locator="173:3-175:28" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="403" locator="173:3-173:21" alias="M">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="402" locator="173:3-173:19" name="MedicationRequest" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="414" locator="174:5-175:28" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="409" locator="174:11-174:47" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="405" locator="174:11-174:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="status" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="408" locator="174:23-174:47" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="406" locator="174:25-174:32" resultTypeName="t:String" valueType="t:String" value="active" xsi:type="Literal"/>
                     <element localId="407" locator="174:35-174:45" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="413" locator="175:11-175:28" resultTypeName="t:Boolean" xsi:type="Equal">
                  <operand localId="411" locator="175:11-175:18" resultTypeName="t:String" path="value" xsi:type="Property">
                     <source path="intent" scope="M" xsi:type="Property"/>
                  </operand>
                  <operand localId="412" locator="175:22-175:28" resultTypeName="t:String" valueType="t:String" value="order" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="MedicationRequest">
            <operandTypeSpecifier localId="401" locator="172:60-172:82" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="400" locator="172:65-172:81" resultTypeName="fhir:MedicationRequest" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="437" locator="178:1-183:7" name="Final Exam Observation" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="437">
               <a:s>//Physical Exam, Performed
define function &quot;Final Exam Observation&quot;(Obs </a:s>
               <a:s r="418">
                  <a:s>List&lt;</a:s>
                  <a:s r="417">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="436">
                  <a:s r="436">
                     <a:s>
                        <a:s r="420">
                           <a:s r="419">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="435">
                        <a:s>where </a:s>
                        <a:s r="435">
                           <a:s r="427">
                              <a:s r="422">
                                 <a:s r="421">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="422">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="426">
                                 <a:s>{ </a:s>
                                 <a:s r="423">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="424">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="425">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="434">
                              <a:s>exists </a:s>
                              <a:s r="433">
                                 <a:s>( </a:s>
                                 <a:s r="433">
                                    <a:s>
                                       <a:s r="429">
                                          <a:s r="428">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ObservationCategory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="432">
                                       <a:s>where </a:s>
                                       <a:s r="432">
                                          <a:s r="430">
                                             <a:s>( </a:s>
                                             <a:s r="430">
                                                <a:s>ObservationCategory</a:s>
                                             </a:s>
                                             <a:s> )</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="431">
                                             <a:s>&quot;exam&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="436" locator="179:3-183:7" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="420" locator="179:3-179:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="419" locator="179:3-179:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="435" locator="180:5-183:7" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="427" locator="180:11-180:57" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="422" locator="180:11-180:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                     <source path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="426" locator="180:23-180:57" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="423" locator="180:25-180:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="424" locator="180:34-180:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="425" locator="180:45-180:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="434" locator="181:11-183:7" resultTypeName="t:Boolean" xsi:type="Exists">
                  <operand localId="433" locator="181:18-183:7" xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source localId="429" locator="181:20-181:49" alias="ObservationCategory">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <expression localId="428" locator="181:20-181:29" xsi:type="Query">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <source alias="$this">
                              <expression path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="432" locator="182:11-182:48" resultTypeName="t:Boolean" xsi:type="Equivalent">
                        <operand localId="430" locator="182:17-182:39" resultTypeName="t:Concept" name="ObservationCategory" xsi:type="AliasRef"/>
                        <operand xsi:type="ToConcept">
                           <operand localId="431" locator="182:43-182:48" resultTypeName="t:Code" name="exam" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="418" locator="178:46-178:62" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="417" locator="178:51-178:61" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="458" locator="185:1-190:7" name="isPhysicalExamPerformed" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="458">
               <a:s>define fluent function isPhysicalExamPerformed(Obs </a:s>
               <a:s r="439">
                  <a:s>List&lt;</a:s>
                  <a:s r="438">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="457">
                  <a:s r="457">
                     <a:s>
                        <a:s r="441">
                           <a:s r="440">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="456">
                        <a:s>where </a:s>
                        <a:s r="456">
                           <a:s r="448">
                              <a:s r="443">
                                 <a:s r="442">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="443">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="447">
                                 <a:s>{ </a:s>
                                 <a:s r="444">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="445">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="446">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="455">
                              <a:s>exists </a:s>
                              <a:s r="454">
                                 <a:s>( </a:s>
                                 <a:s r="454">
                                    <a:s>
                                       <a:s r="450">
                                          <a:s r="449">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ObservationCategory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="453">
                                       <a:s>where </a:s>
                                       <a:s r="453">
                                          <a:s r="451">
                                             <a:s>( </a:s>
                                             <a:s r="451">
                                                <a:s>ObservationCategory</a:s>
                                             </a:s>
                                             <a:s> )</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="452">
                                             <a:s>&quot;exam&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="457" locator="186:3-190:7" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="441" locator="186:3-186:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="440" locator="186:3-186:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="456" locator="187:5-190:7" resultTypeName="t:Boolean" xsi:type="And">
               <operand localId="448" locator="187:11-187:57" resultTypeName="t:Boolean" xsi:type="In">
                  <operand localId="443" locator="187:11-187:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                     <source path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="447" locator="187:23-187:57" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <element localId="444" locator="187:25-187:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="445" locator="187:34-187:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="446" locator="187:45-187:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="455" locator="188:11-190:7" resultTypeName="t:Boolean" xsi:type="Exists">
                  <operand localId="454" locator="188:18-190:7" xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source localId="450" locator="188:20-188:49" alias="ObservationCategory">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <expression localId="449" locator="188:20-188:29" xsi:type="Query">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <source alias="$this">
                              <expression path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="453" locator="189:11-189:48" resultTypeName="t:Boolean" xsi:type="Equivalent">
                        <operand localId="451" locator="189:17-189:39" resultTypeName="t:Concept" name="ObservationCategory" xsi:type="AliasRef"/>
                        <operand xsi:type="ToConcept">
                           <operand localId="452" locator="189:43-189:48" resultTypeName="t:Code" name="exam" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="439" locator="185:52-185:68" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="438" locator="185:57-185:67" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="471" locator="193:1-195:57" name="BloodPressure" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="471">
               <a:s>//Observation Vital Signs
define function &quot;BloodPressure&quot;(Obs </a:s>
               <a:s r="460">
                  <a:s>List&lt;</a:s>
                  <a:s r="459">
                     <a:s>&quot;QICore.observation-bp&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="470">
                  <a:s r="470">
                     <a:s>
                        <a:s r="462">
                           <a:s r="461">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="469">
                        <a:s>where </a:s>
                        <a:s r="469">
                           <a:s r="464">
                              <a:s r="463">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="464">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="468">
                              <a:s>{ </a:s>
                              <a:s r="465">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="466">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="467">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="470" locator="194:3-195:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="462" locator="194:3-194:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="461" locator="194:3-194:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="469" locator="195:5-195:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="464" locator="195:11-195:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="468" locator="195:23-195:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="465" locator="195:25-195:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="466" locator="195:34-195:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="467" locator="195:45-195:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="460" locator="193:37-193:65" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="459" locator="193:42-193:64" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="484" locator="197:1-199:57" name="BodyHeight" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="484">
               <a:s>define function &quot;BodyHeight&quot;(Obs </a:s>
               <a:s r="473">
                  <a:s>List&lt;</a:s>
                  <a:s r="472">
                     <a:s>&quot;QICore.observation-bodyheight&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="483">
                  <a:s r="483">
                     <a:s>
                        <a:s r="475">
                           <a:s r="474">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="482">
                        <a:s>where </a:s>
                        <a:s r="482">
                           <a:s r="477">
                              <a:s r="476">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="477">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="481">
                              <a:s>{ </a:s>
                              <a:s r="478">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="479">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="480">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="483" locator="198:3-199:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="475" locator="198:3-198:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="474" locator="198:3-198:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="482" locator="199:5-199:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="477" locator="199:11-199:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="481" locator="199:23-199:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="478" locator="199:25-199:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="479" locator="199:34-199:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="480" locator="199:45-199:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="473" locator="197:34-197:70" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="472" locator="197:39-197:69" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="497" locator="201:1-203:57" name="BodyWeight" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="497">
               <a:s>define function &quot;BodyWeight&quot;(Obs </a:s>
               <a:s r="486">
                  <a:s>List&lt;</a:s>
                  <a:s r="485">
                     <a:s>&quot;QICore.observation-bodyweight&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="496">
                  <a:s r="496">
                     <a:s>
                        <a:s r="488">
                           <a:s r="487">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="495">
                        <a:s>where </a:s>
                        <a:s r="495">
                           <a:s r="490">
                              <a:s r="489">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="490">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="494">
                              <a:s>{ </a:s>
                              <a:s r="491">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="492">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="493">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="496" locator="202:3-203:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="488" locator="202:3-202:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="487" locator="202:3-202:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="495" locator="203:5-203:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="490" locator="203:11-203:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="494" locator="203:23-203:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="491" locator="203:25-203:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="492" locator="203:34-203:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="493" locator="203:45-203:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="486" locator="201:34-201:70" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="485" locator="201:39-201:69" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="510" locator="205:1-207:57" name="BMI" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="510">
               <a:s>define function &quot;BMI&quot;(Obs </a:s>
               <a:s r="499">
                  <a:s>List&lt;</a:s>
                  <a:s r="498">
                     <a:s>&quot;QICore.observation-bmi&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="509">
                  <a:s r="509">
                     <a:s>
                        <a:s r="501">
                           <a:s r="500">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="508">
                        <a:s>where </a:s>
                        <a:s r="508">
                           <a:s r="503">
                              <a:s r="502">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="503">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="507">
                              <a:s>{ </a:s>
                              <a:s r="504">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="505">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="506">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="509" locator="206:3-207:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="501" locator="206:3-206:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="500" locator="206:3-206:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="508" locator="207:5-207:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="503" locator="207:11-207:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="507" locator="207:23-207:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="504" locator="207:25-207:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="505" locator="207:34-207:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="506" locator="207:45-207:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="499" locator="205:27-205:56" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="498" locator="205:32-205:55" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="523" locator="210:1-212:57" name="isObservationBP" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="523">
               <a:s>//fluent function versions
define fluent function isObservationBP(Obs </a:s>
               <a:s r="512">
                  <a:s>List&lt;</a:s>
                  <a:s r="511">
                     <a:s>&quot;QICore.observation-bp&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="522">
                  <a:s r="522">
                     <a:s>
                        <a:s r="514">
                           <a:s r="513">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="521">
                        <a:s>where </a:s>
                        <a:s r="521">
                           <a:s r="516">
                              <a:s r="515">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="516">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="520">
                              <a:s>{ </a:s>
                              <a:s r="517">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="518">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="519">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="522" locator="211:3-212:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="514" locator="211:3-211:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="513" locator="211:3-211:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="521" locator="212:5-212:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="516" locator="212:11-212:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="520" locator="212:23-212:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="517" locator="212:25-212:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="518" locator="212:34-212:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="519" locator="212:45-212:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="512" locator="210:44-210:72" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="511" locator="210:49-210:71" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="536" locator="214:1-216:57" name="isObservationBodyHeight" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="536">
               <a:s>define fluent function isObservationBodyHeight(Obs </a:s>
               <a:s r="525">
                  <a:s>List&lt;</a:s>
                  <a:s r="524">
                     <a:s>&quot;QICore.observation-bodyheight&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="535">
                  <a:s r="535">
                     <a:s>
                        <a:s r="527">
                           <a:s r="526">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="534">
                        <a:s>where </a:s>
                        <a:s r="534">
                           <a:s r="529">
                              <a:s r="528">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="529">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="533">
                              <a:s>{ </a:s>
                              <a:s r="530">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="531">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="532">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="535" locator="215:3-216:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="527" locator="215:3-215:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="526" locator="215:3-215:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="534" locator="216:5-216:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="529" locator="216:11-216:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="533" locator="216:23-216:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="530" locator="216:25-216:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="531" locator="216:34-216:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="532" locator="216:45-216:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="525" locator="214:52-214:88" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="524" locator="214:57-214:87" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="549" locator="218:1-220:57" name="isObservationBodyWeight" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="549">
               <a:s>define fluent function isObservationBodyWeight(Obs </a:s>
               <a:s r="538">
                  <a:s>List&lt;</a:s>
                  <a:s r="537">
                     <a:s>&quot;QICore.observation-bodyweight&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="548">
                  <a:s r="548">
                     <a:s>
                        <a:s r="540">
                           <a:s r="539">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="547">
                        <a:s>where </a:s>
                        <a:s r="547">
                           <a:s r="542">
                              <a:s r="541">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="542">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="546">
                              <a:s>{ </a:s>
                              <a:s r="543">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="544">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="545">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="548" locator="219:3-220:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="540" locator="219:3-219:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="539" locator="219:3-219:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="547" locator="220:5-220:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="542" locator="220:11-220:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="546" locator="220:23-220:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="543" locator="220:25-220:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="544" locator="220:34-220:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="545" locator="220:45-220:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="538" locator="218:52-218:88" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="537" locator="218:57-218:87" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="562" locator="222:1-224:57" name="isObservationBMI" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="562">
               <a:s>define fluent function isObservationBMI(Obs </a:s>
               <a:s r="551">
                  <a:s>List&lt;</a:s>
                  <a:s r="550">
                     <a:s>&quot;QICore.observation-bmi&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="561">
                  <a:s r="561">
                     <a:s>
                        <a:s r="553">
                           <a:s r="552">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="560">
                        <a:s>where </a:s>
                        <a:s r="560">
                           <a:s r="555">
                              <a:s r="554">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="555">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="559">
                              <a:s>{ </a:s>
                              <a:s r="556">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="557">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="558">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="561" locator="223:3-224:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="553" locator="223:3-223:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="552" locator="223:3-223:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="560" locator="224:5-224:57" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="555" locator="224:11-224:18" resultTypeName="fhir:Status" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="559" locator="224:23-224:57" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="556" locator="224:25-224:31" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="557" locator="224:34-224:42" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="558" locator="224:45-224:55" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="551" locator="222:45-222:74" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="550" locator="222:50-222:73" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="576" locator="227:1-229:72" name="Initial or Final Observation" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="576">
               <a:s>//Symptom
define function &quot;Initial or Final Observation&quot;(Obs </a:s>
               <a:s r="564">
                  <a:s>List&lt;</a:s>
                  <a:s r="563">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="575">
                  <a:s r="575">
                     <a:s>
                        <a:s r="566">
                           <a:s r="565">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="574">
                        <a:s>where </a:s>
                        <a:s r="574">
                           <a:s r="568">
                              <a:s r="567">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="568">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="573">
                              <a:s>{ </a:s>
                              <a:s r="569">
                                 <a:s>'preliminary'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="570">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="571">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="572">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="575" locator="228:3-229:72" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="566" locator="228:3-228:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="565" locator="228:3-228:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="574" locator="229:5-229:72" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="568" locator="229:11-229:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="573" locator="229:23-229:72" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="569" locator="229:25-229:37" resultTypeName="t:String" valueType="t:String" value="preliminary" xsi:type="Literal"/>
                  <element localId="570" locator="229:40-229:46" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="571" locator="229:49-229:57" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="572" locator="229:60-229:70" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="564" locator="227:52-227:68" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="563" locator="227:57-227:67" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="590" locator="231:1-233:72" name="isSymptom" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="590">
               <a:s>define fluent function isSymptom(Obs </a:s>
               <a:s r="578">
                  <a:s>List&lt;</a:s>
                  <a:s r="577">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="589">
                  <a:s r="589">
                     <a:s>
                        <a:s r="580">
                           <a:s r="579">
                              <a:s>
                                 <a:s>Obs</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="588">
                        <a:s>where </a:s>
                        <a:s r="588">
                           <a:s r="582">
                              <a:s r="581">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="582">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="587">
                              <a:s>{ </a:s>
                              <a:s r="583">
                                 <a:s>'preliminary'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="584">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="585">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="586">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="589" locator="232:3-233:72" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="580" locator="232:3-232:7" alias="O">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="579" locator="232:3-232:5" name="Obs" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="588" locator="233:5-233:72" resultTypeName="t:Boolean" xsi:type="In">
               <operand localId="582" locator="233:11-233:18" resultTypeName="fhir:ObservationStatus" path="value" xsi:type="Property">
                  <source path="status" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="587" locator="233:23-233:72" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="583" locator="233:25-233:37" resultTypeName="t:String" valueType="t:String" value="preliminary" xsi:type="Literal"/>
                  <element localId="584" locator="233:40-233:46" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                  <element localId="585" locator="233:49-233:57" resultTypeName="t:String" valueType="t:String" value="amended" xsi:type="Literal"/>
                  <element localId="586" locator="233:60-233:70" resultTypeName="t:String" valueType="t:String" value="corrected" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand name="Obs">
            <operandTypeSpecifier localId="578" locator="231:38-231:54" xsi:type="ListTypeSpecifier">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <elementType localId="577" locator="231:43-231:53" resultTypeName="fhir:Observation" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
   </statements>
</library>