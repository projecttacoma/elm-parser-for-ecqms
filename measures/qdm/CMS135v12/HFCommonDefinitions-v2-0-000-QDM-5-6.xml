<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="86">
         <a:s>library HFCommonDefinitions version '2.0.000'</a:s>
      </a:s>
   </annotation>
   <identifier id="HFCommonDefinitions" version="2.0.000"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:23" localIdentifier="QDM" uri="urn:healthit-gov:qdm:v5_6" version="5.6">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>QDM</a:s>
               </a:s>
               <a:s> version '5.6'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:64" localIdentifier="Global" path="MATGlobalCommonFunctions" version="7.0.000">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>MATGlobalCommonFunctions</a:s>
               </a:s>
               <a:s> version '7.0.000' called Global</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="22" locator="26:1-26:49" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="22">
               <a:s>parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="21">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="20">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
            </a:s>
         </annotation>
         <parameterTypeSpecifier localId="21" locator="26:32-26:49" xsi:type="IntervalTypeSpecifier">
            <pointType localId="20" locator="26:41-26:48" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <codeSystems>
      <def localId="3" locator="7:1-7:55" name="SNOMEDCT" id="urn:oid:2.16.840.1.113883.6.96" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>codesystem &quot;SNOMEDCT&quot;: 'urn:oid:2.16.840.1.113883.6.96'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <valueSets>
      <def localId="4" locator="9:1-9:110" name="Care Services in Long Term Residential Facility" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1014" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>valueset &quot;Care Services in Long Term Residential Facility&quot;: 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1014'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="10:1-10:70" name="Ejection Fraction" id="urn:oid:2.16.840.1.113883.3.526.3.1134" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>valueset &quot;Ejection Fraction&quot;: 'urn:oid:2.16.840.1.113883.3.526.3.1134'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="11:1-11:65" name="Heart Failure" id="urn:oid:2.16.840.1.113883.3.526.3.376" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>valueset &quot;Heart Failure&quot;: 'urn:oid:2.16.840.1.113883.3.526.3.376'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="12:1-12:68" name="Heart Transplant" id="urn:oid:2.16.840.1.113762.1.4.1178.33" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>valueset &quot;Heart Transplant&quot;: 'urn:oid:2.16.840.1.113762.1.4.1178.33'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="8" locator="13:1-13:82" name="Heart Transplant Complications" id="urn:oid:2.16.840.1.113762.1.4.1178.56" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="8">
               <a:s>valueset &quot;Heart Transplant Complications&quot;: 'urn:oid:2.16.840.1.113762.1.4.1178.56'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="9" locator="14:1-14:87" name="Home Healthcare Services" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="9">
               <a:s>valueset &quot;Home Healthcare Services&quot;: 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="10" locator="15:1-15:96" name="Left Ventricular Assist Device Complications" id="urn:oid:2.16.840.1.113762.1.4.1178.58" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>valueset &quot;Left Ventricular Assist Device Complications&quot;: 'urn:oid:2.16.840.1.113762.1.4.1178.58'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="11" locator="16:1-16:92" name="Left Ventricular Assist Device Placement" id="urn:oid:2.16.840.1.113762.1.4.1178.61" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="11">
               <a:s>valueset &quot;Left Ventricular Assist Device Placement&quot;: 'urn:oid:2.16.840.1.113762.1.4.1178.61'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="12" locator="17:1-17:71" name="Moderate or Severe" id="urn:oid:2.16.840.1.113883.3.526.3.1092" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="12">
               <a:s>valueset &quot;Moderate or Severe&quot;: 'urn:oid:2.16.840.1.113883.3.526.3.1092'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="13" locator="18:1-18:76" name="Moderate or Severe LVSD" id="urn:oid:2.16.840.1.113883.3.526.3.1090" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>valueset &quot;Moderate or Severe LVSD&quot;: 'urn:oid:2.16.840.1.113883.3.526.3.1090'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="14" locator="19:1-19:85" name="Nursing Facility Visit" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1012" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="14">
               <a:s>valueset &quot;Nursing Facility Visit&quot;: 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1012'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="15" locator="20:1-20:75" name="Office Visit" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="15">
               <a:s>valueset &quot;Office Visit&quot;: 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="16" locator="21:1-21:86" name="Outpatient Consultation" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="16">
               <a:s>valueset &quot;Outpatient Consultation&quot;: 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="17" locator="22:1-22:81" name="Patient Provider Interaction" id="urn:oid:2.16.840.1.113883.3.526.3.1012" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="17">
               <a:s>valueset &quot;Patient Provider Interaction&quot;: 'urn:oid:2.16.840.1.113883.3.526.3.1012'</a:s>
            </a:s>
         </annotation>
      </def>
   </valueSets>
   <codes>
      <def localId="19" locator="24:1-24:143" name="Left ventricular systolic dysfunction (disorder)" id="134401001" display="Left ventricular systolic dysfunction (disorder)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="19">
               <a:s>code &quot;Left ventricular systolic dysfunction (disorder)&quot;: '134401001' from </a:s>
               <a:s r="18">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Left ventricular systolic dysfunction (disorder)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="18" locator="24:75-24:84" name="SNOMEDCT"/>
      </def>
   </codes>
   <contexts>
      <def locator="28:1-28:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="28:1-28:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="28:1-28:15" xmlns:ns0="urn:healthit-gov:qdm:v5_6" dataType="ns0:Patient" templateId="Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="46" locator="30:1-38:79" name="Heart Failure Outpatient Encounter" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="46">
               <a:s>define &quot;Heart Failure Outpatient Encounter&quot;:
  </a:s>
               <a:s r="45">
                  <a:s>
                     <a:s r="32">
                        <a:s r="31">
                           <a:s>( </a:s>
                           <a:s r="31">
                              <a:s r="29">
                                 <a:s r="27">
                                    <a:s r="25">
                                       <a:s r="23">
                                          <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                          <a:s>
                                             <a:s>&quot;Care Services in Long Term Residential Facility&quot;</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                       <a:s>
    union </a:s>
                                       <a:s r="24">
                                          <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                          <a:s>
                                             <a:s>&quot;Home Healthcare Services&quot;</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    union </a:s>
                                    <a:s r="26">
                                       <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                       <a:s>
                                          <a:s>&quot;Nursing Facility Visit&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    union </a:s>
                                 <a:s r="28">
                                    <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                    <a:s>
                                       <a:s>&quot;Office Visit&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    union </a:s>
                              <a:s r="30">
                                 <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Outpatient Consultation&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> )</a:s>
                        </a:s>
                        <a:s> QualifyingEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="40">
                     <a:s>with </a:s>
                     <a:s r="34">
                        <a:s r="33">
                           <a:s r="33">
                              <a:s>[&quot;Diagnosis&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Heart Failure&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HeartFailure</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="39">
                        <a:s r="36">
                           <a:s r="35">
                              <a:s>HeartFailure</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="36">
                              <a:s>prevalencePeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="39"> overlaps </a:s>
                        <a:s r="38">
                           <a:s r="37">
                              <a:s>QualifyingEncounter</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="38">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="44">
                     <a:s>where </a:s>
                     <a:s r="44">
                        <a:s r="42">
                           <a:s r="41">
                              <a:s>QualifyingEncounter</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="42">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="44"> during day of </a:s>
                        <a:s r="43">
                           <a:s>&quot;Measurement Period&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="45" locator="31:3-38:79" xsi:type="Query">
            <source localId="32" locator="31:3-35:83" alias="QualifyingEncounter">
               <expression localId="31" locator="31:3-35:63" xsi:type="Union">
                  <operand localId="29" locator="31:5-34:50" xsi:type="Union">
                     <operand localId="25" locator="31:5-32:62" xsi:type="Union">
                        <operand localId="23" locator="31:5-31:79" xmlns:ns1="urn:healthit-gov:qdm:v5_6" dataType="ns1:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="31:30-31:78" name="Care Services in Long Term Residential Facility" xsi:type="ValueSetRef"/>
                        </operand>
                        <operand localId="24" locator="32:11-32:62" xmlns:ns2="urn:healthit-gov:qdm:v5_6" dataType="ns2:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="32:36-32:61" name="Home Healthcare Services" xsi:type="ValueSetRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Union">
                        <operand localId="26" locator="33:11-33:60" xmlns:ns3="urn:healthit-gov:qdm:v5_6" dataType="ns3:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="33:36-33:59" name="Nursing Facility Visit" xsi:type="ValueSetRef"/>
                        </operand>
                        <operand localId="28" locator="34:11-34:50" xmlns:ns4="urn:healthit-gov:qdm:v5_6" dataType="ns4:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="34:36-34:49" name="Office Visit" xsi:type="ValueSetRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="30" locator="35:11-35:61" xmlns:ns5="urn:healthit-gov:qdm:v5_6" dataType="ns5:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="35:36-35:60" name="Outpatient Consultation" xsi:type="ValueSetRef"/>
                  </operand>
               </expression>
            </source>
            <relationship localId="40" locator="36:5-37:89" alias="HeartFailure" xsi:type="With">
               <expression localId="33" locator="36:10-36:39" xmlns:ns6="urn:healthit-gov:qdm:v5_6" dataType="ns6:Diagnosis" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="36:24-36:38" name="Heart Failure" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat localId="39" locator="37:17-37:89" xsi:type="Overlaps">
                  <operand localId="36" locator="37:17-37:45" path="prevalencePeriod" scope="HeartFailure" xsi:type="Property"/>
                  <operand localId="38" locator="37:56-37:89" path="relevantPeriod" scope="QualifyingEncounter" xsi:type="Property"/>
               </suchThat>
            </relationship>
            <where localId="44" locator="38:5-38:79" precision="Day" xsi:type="IncludedIn">
               <operand localId="42" locator="38:11-38:44" path="relevantPeriod" scope="QualifyingEncounter" xsi:type="Property"/>
               <operand localId="43" locator="38:60-38:79" name="Measurement Period" xsi:type="ParameterRef"/>
            </where>
         </expression>
      </def>
      <def localId="68" locator="66:1-73:5" name="Has Moderate or Severe LVSD Findings" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="68">
               <a:s>define &quot;Has Moderate or Severe LVSD Findings&quot;:
  </a:s>
               <a:s r="67">
                  <a:s r="59">
                     <a:s r="57">
                        <a:s>( </a:s>
                        <a:s r="57">
                           <a:s>
                              <a:s r="52">
                                 <a:s r="51">
                                    <a:s r="51">
                                       <a:s>[&quot;Diagnostic Study, Performed&quot;: </a:s>
                                       <a:s>
                                          <a:s>&quot;Ejection Fraction&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EjectionFraction</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="56">
                              <a:s>where </a:s>
                              <a:s r="56">
                                 <a:s r="54">
                                    <a:s r="53">
                                       <a:s>EjectionFraction</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="54">
                                       <a:s>result</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> &lt;= </a:s>
                                 <a:s r="55">
                                    <a:s>40 '%'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s>
    union </a:s>
                     <a:s r="58">
                        <a:s>[&quot;Diagnosis&quot;: </a:s>
                        <a:s>
                           <a:s>&quot;Moderate or Severe LVSD&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    union </a:s>
                  <a:s r="66">
                     <a:s>( </a:s>
                     <a:s r="66">
                        <a:s>
                           <a:s r="61">
                              <a:s r="60">
                                 <a:s r="60">
                                    <a:s>[&quot;Diagnosis&quot;: </a:s>
                                    <a:s>
                                       <a:s>&quot;Left ventricular systolic dysfunction (disorder)&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> LVSD</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        </a:s>
                        <a:s r="65">
                           <a:s>where </a:s>
                           <a:s r="65">
                              <a:s r="63">
                                 <a:s r="62">
                                    <a:s>LVSD</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="63">
                                    <a:s>severity</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="64">
                                 <a:s>&quot;Moderate or Severe&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="67" locator="67:3-73:5" xsi:type="Union">
            <operand xsi:type="As">
               <operand localId="59" locator="67:3-70:50" xsi:type="Union">
                  <operand xsi:type="As">
                     <operand localId="57" locator="67:3-69:3" xsi:type="Query">
                        <source localId="52" locator="67:5-67:73" alias="EjectionFraction">
                           <expression localId="51" locator="67:5-67:56" xmlns:ns7="urn:healthit-gov:qdm:v5_6" dataType="ns7:PositiveDiagnosticStudyPerformed" templateId="PositiveDiagnosticStudyPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                              <codes locator="67:37-67:55" name="Ejection Fraction" xsi:type="ValueSetRef"/>
                           </expression>
                        </source>
                        <where localId="56" locator="68:7-68:45" xsi:type="LessOrEqual">
                           <operand asType="t:Quantity" xsi:type="As">
                              <operand localId="54" locator="68:13-68:35" path="result" scope="EjectionFraction" xsi:type="Property"/>
                           </operand>
                           <operand localId="55" locator="68:40-68:45" value="40" unit="%" xsi:type="Quantity"/>
                        </where>
                     </operand>
                     <asTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="ChoiceTypeSpecifier">
                           <choice xmlns:ns8="urn:healthit-gov:qdm:v5_6" name="ns8:Diagnosis" xsi:type="NamedTypeSpecifier"/>
                           <choice xmlns:ns9="urn:healthit-gov:qdm:v5_6" name="ns9:PositiveDiagnosticStudyPerformed" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </asTypeSpecifier>
                  </operand>
                  <operand xsi:type="As">
                     <operand localId="58" locator="70:11-70:50" xmlns:ns10="urn:healthit-gov:qdm:v5_6" dataType="ns10:Diagnosis" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                        <codes locator="70:25-70:49" name="Moderate or Severe LVSD" xsi:type="ValueSetRef"/>
                     </operand>
                     <asTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="ChoiceTypeSpecifier">
                           <choice xmlns:ns11="urn:healthit-gov:qdm:v5_6" name="ns11:Diagnosis" xsi:type="NamedTypeSpecifier"/>
                           <choice xmlns:ns12="urn:healthit-gov:qdm:v5_6" name="ns12:PositiveDiagnosticStudyPerformed" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </asTypeSpecifier>
                  </operand>
               </operand>
               <asTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="ChoiceTypeSpecifier">
                     <choice xmlns:ns13="urn:healthit-gov:qdm:v5_6" name="ns13:Diagnosis" xsi:type="NamedTypeSpecifier"/>
                     <choice xmlns:ns14="urn:healthit-gov:qdm:v5_6" name="ns14:PositiveDiagnosticStudyPerformed" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </asTypeSpecifier>
            </operand>
            <operand xsi:type="As">
               <operand localId="66" locator="71:11-73:5" xsi:type="Query">
                  <source localId="61" locator="71:13-71:82" alias="LVSD">
                     <expression localId="60" locator="71:13-71:77" xmlns:ns15="urn:healthit-gov:qdm:v5_6" dataType="ns15:Diagnosis" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                        <codes xsi:type="ToList">
                           <operand locator="71:27-71:76" name="Left ventricular systolic dysfunction (disorder)" xsi:type="CodeRef"/>
                        </codes>
                     </expression>
                  </source>
                  <where localId="65" locator="72:9-72:51" xsi:type="InValueSet">
                     <code localId="63" locator="72:15-72:27" path="severity" scope="LVSD" xsi:type="Property"/>
                     <valueset localId="64" locator="72:32-72:51" name="Moderate or Severe" xsi:type="ValueSetRef"/>
                  </where>
               </operand>
               <asTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="ChoiceTypeSpecifier">
                     <choice xmlns:ns16="urn:healthit-gov:qdm:v5_6" name="ns16:Diagnosis" xsi:type="NamedTypeSpecifier"/>
                     <choice xmlns:ns17="urn:healthit-gov:qdm:v5_6" name="ns17:PositiveDiagnosticStudyPerformed" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </asTypeSpecifier>
            </operand>
         </expression>
      </def>
      <def localId="86" locator="90:1-94:49" name="Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="86">
               <a:s>define &quot;Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD&quot;:
  </a:s>
               <a:s r="85">
                  <a:s>
                     <a:s r="50">
                        <a:s r="49">
                           <a:s>
                              <a:s>&quot;Heart Failure Outpatient Encounter&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HFOutpatientEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="84">
                     <a:s>with </a:s>
                     <a:s r="70">
                        <a:s r="69">
                           <a:s>
                              <a:s>&quot;Has Moderate or Severe LVSD Findings&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> LVSDFindings</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="83">
                        <a:s r="79">
                           <a:s>Coalesce(</a:s>
                           <a:s r="72">
                              <a:s r="71">
                                 <a:s>LVSDFindings</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="72">
                                 <a:s>prevalencePeriod</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="78">
                              <a:s r="73">
                                 <a:s>Global</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="78">
                                 <a:s>&quot;NormalizeInterval&quot;(</a:s>
                                 <a:s r="75">
                                    <a:s r="74">
                                       <a:s>LVSDFindings</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="75">
                                       <a:s>relevantDatetime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="77">
                                    <a:s r="76">
                                       <a:s>LVSDFindings</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="77">
                                       <a:s>relevantPeriod</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="83">starts before 
      </a:s>
                        <a:s r="82">
                           <a:s>end of </a:s>
                           <a:s r="81">
                              <a:s r="80">
                                 <a:s>HFOutpatientEncounter</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="81">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="85" locator="91:3-94:49" xsi:type="Query">
            <source localId="50" locator="91:3-91:60" alias="HFOutpatientEncounter">
               <expression localId="49" locator="91:3-91:38" name="Heart Failure Outpatient Encounter" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="84" locator="92:5-94:49" alias="LVSDFindings" xsi:type="With">
               <expression localId="69" locator="92:10-92:47" name="Has Moderate or Severe LVSD Findings" xsi:type="ExpressionRef"/>
               <suchThat localId="83" locator="93:17-94:49" xsi:type="Before">
                  <operand locator="93:144-93:149" xsi:type="Start">
                     <operand localId="79" locator="93:17-93:143" xsi:type="Coalesce">
                        <operand localId="72" locator="93:26-93:54" path="prevalencePeriod" scope="LVSDFindings" xsi:type="Property"/>
                        <operand localId="78" locator="93:57-93:142" name="NormalizeInterval" libraryName="Global" xsi:type="FunctionRef">
                           <operand localId="75" locator="93:84-93:112" path="relevantDatetime" scope="LVSDFindings" xsi:type="Property"/>
                           <operand localId="77" locator="93:115-93:141" path="relevantPeriod" scope="LVSDFindings" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="82" locator="94:7-94:49" xsi:type="End">
                     <operand localId="81" locator="94:14-94:49" path="relevantPeriod" scope="HFOutpatientEncounter" xsi:type="Property"/>
                  </operand>
               </suchThat>
            </relationship>
         </expression>
      </def>
      <def localId="102" locator="40:1-44:69" name="Has Heart Transplant Complications" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="102">
               <a:s>define &quot;Has Heart Transplant Complications&quot;:
  </a:s>
               <a:s r="101">
                  <a:s>exists </a:s>
                  <a:s r="100">
                     <a:s>
                        <a:s r="48">
                           <a:s r="47">
                              <a:s r="47">
                                 <a:s>[&quot;Diagnosis&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Heart Transplant Complications&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> HeartTransplantComplications</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="99">
                        <a:s>with </a:s>
                        <a:s r="88">
                           <a:s r="87">
                              <a:s>
                                 <a:s>&quot;Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                        </a:s>
                        <a:s>
      such that </a:s>
                        <a:s r="98">
                           <a:s r="94">
                              <a:s>( </a:s>
                              <a:s r="94">
                                 <a:s r="89">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="94">
                                    <a:s>&quot;NormalizeInterval&quot; ( </a:s>
                                    <a:s r="91">
                                       <a:s r="90">
                                          <a:s>HeartTransplantComplications</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="91">
                                          <a:s>authorDatetime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="93">
                                       <a:s r="92">
                                          <a:s>HeartTransplantComplications</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="93">
                                          <a:s>prevalencePeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> )</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                           <a:s r="98"> starts before 
      </a:s>
                           <a:s r="97">
                              <a:s>end of </a:s>
                              <a:s r="96">
                                 <a:s r="95">
                                    <a:s>ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="96">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="101" locator="41:3-44:69" xsi:type="Exists">
            <operand localId="100" locator="41:10-44:69" xsi:type="Query">
               <source localId="48" locator="41:10-41:85" alias="HeartTransplantComplications">
                  <expression localId="47" locator="41:10-41:56" xmlns:ns18="urn:healthit-gov:qdm:v5_6" dataType="ns18:Diagnosis" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="41:24-41:55" name="Heart Transplant Complications" xsi:type="ValueSetRef"/>
                  </expression>
               </source>
               <relationship localId="99" locator="42:5-44:69" alias="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="With">
                  <expression localId="87" locator="42:10-42:85" name="Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD" xsi:type="ExpressionRef"/>
                  <suchThat localId="98" locator="43:17-44:69" xsi:type="Before">
                     <operand locator="43:143-43:148" xsi:type="Start">
                        <operand localId="94" locator="43:17-43:141" name="NormalizeInterval" libraryName="Global" xsi:type="FunctionRef">
                           <operand localId="91" locator="43:48-43:90" path="authorDatetime" scope="HeartTransplantComplications" xsi:type="Property"/>
                           <operand localId="93" locator="43:93-43:137" path="prevalencePeriod" scope="HeartTransplantComplications" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="97" locator="44:7-44:69" xsi:type="End">
                        <operand localId="96" locator="44:14-44:69" path="relevantPeriod" scope="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="Property"/>
                     </operand>
                  </suchThat>
               </relationship>
            </operand>
         </expression>
      </def>
      <def localId="120" locator="46:1-50:69" name="Has Left Ventricular Assist Device" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="120">
               <a:s>define &quot;Has Left Ventricular Assist Device&quot;:
  </a:s>
               <a:s r="119">
                  <a:s>exists </a:s>
                  <a:s r="118">
                     <a:s>
                        <a:s r="104">
                           <a:s r="103">
                              <a:s r="103">
                                 <a:s>[&quot;Procedure, Performed&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Left Ventricular Assist Device Placement&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> LVADOutpatient</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="117">
                        <a:s>with </a:s>
                        <a:s r="106">
                           <a:s r="105">
                              <a:s>
                                 <a:s>&quot;Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                        </a:s>
                        <a:s>
      such that </a:s>
                        <a:s r="116">
                           <a:s r="112">
                              <a:s>( </a:s>
                              <a:s r="112">
                                 <a:s r="107">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="112">
                                    <a:s>&quot;NormalizeInterval&quot; ( </a:s>
                                    <a:s r="109">
                                       <a:s r="108">
                                          <a:s>LVADOutpatient</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="109">
                                          <a:s>relevantDatetime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="111">
                                       <a:s r="110">
                                          <a:s>LVADOutpatient</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="111">
                                          <a:s>relevantPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> )</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                           <a:s r="116"> starts before 
      </a:s>
                           <a:s r="115">
                              <a:s>end of </a:s>
                              <a:s r="114">
                                 <a:s r="113">
                                    <a:s>ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="114">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="119" locator="47:3-50:69" xsi:type="Exists">
            <operand localId="118" locator="47:10-50:69" xsi:type="Query">
               <source localId="104" locator="47:10-47:92" alias="LVADOutpatient">
                  <expression localId="103" locator="47:10-47:77" xmlns:ns19="urn:healthit-gov:qdm:v5_6" dataType="ns19:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="47:35-47:76" name="Left Ventricular Assist Device Placement" xsi:type="ValueSetRef"/>
                  </expression>
               </source>
               <relationship localId="117" locator="48:5-50:69" alias="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="With">
                  <expression localId="105" locator="48:10-48:85" name="Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD" xsi:type="ExpressionRef"/>
                  <suchThat localId="116" locator="49:17-50:69" xsi:type="Before">
                     <operand locator="49:115-49:120" xsi:type="Start">
                        <operand localId="112" locator="49:17-49:113" name="NormalizeInterval" libraryName="Global" xsi:type="FunctionRef">
                           <operand localId="109" locator="49:48-49:78" path="relevantDatetime" scope="LVADOutpatient" xsi:type="Property"/>
                           <operand localId="111" locator="49:81-49:109" path="relevantPeriod" scope="LVADOutpatient" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="115" locator="50:7-50:69" xsi:type="End">
                        <operand localId="114" locator="50:14-50:69" path="relevantPeriod" scope="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="Property"/>
                     </operand>
                  </suchThat>
               </relationship>
            </operand>
         </expression>
      </def>
      <def localId="138" locator="52:1-56:69" name="Has Left Ventricular Assist Device Complications" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="138">
               <a:s>define &quot;Has Left Ventricular Assist Device Complications&quot;:
  </a:s>
               <a:s r="137">
                  <a:s>exists </a:s>
                  <a:s r="136">
                     <a:s>
                        <a:s r="122">
                           <a:s r="121">
                              <a:s r="121">
                                 <a:s>[&quot;Diagnosis&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Left Ventricular Assist Device Complications&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> LVADComplications</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="135">
                        <a:s>with </a:s>
                        <a:s r="124">
                           <a:s r="123">
                              <a:s>
                                 <a:s>&quot;Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                        </a:s>
                        <a:s>
      such that </a:s>
                        <a:s r="134">
                           <a:s r="130">
                              <a:s>( </a:s>
                              <a:s r="130">
                                 <a:s r="125">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="130">
                                    <a:s>&quot;NormalizeInterval&quot; ( </a:s>
                                    <a:s r="127">
                                       <a:s r="126">
                                          <a:s>LVADComplications</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="127">
                                          <a:s>authorDatetime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="129">
                                       <a:s r="128">
                                          <a:s>LVADComplications</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="129">
                                          <a:s>prevalencePeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> )</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                           <a:s r="134"> starts before 
      </a:s>
                           <a:s r="133">
                              <a:s>end of </a:s>
                              <a:s r="132">
                                 <a:s r="131">
                                    <a:s>ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="132">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="137" locator="53:3-56:69" xsi:type="Exists">
            <operand localId="136" locator="53:10-56:69" xsi:type="Query">
               <source localId="122" locator="53:10-53:88" alias="LVADComplications">
                  <expression localId="121" locator="53:10-53:70" xmlns:ns20="urn:healthit-gov:qdm:v5_6" dataType="ns20:Diagnosis" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="53:24-53:69" name="Left Ventricular Assist Device Complications" xsi:type="ValueSetRef"/>
                  </expression>
               </source>
               <relationship localId="135" locator="54:5-56:69" alias="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="With">
                  <expression localId="123" locator="54:10-54:85" name="Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD" xsi:type="ExpressionRef"/>
                  <suchThat localId="134" locator="55:17-56:69" xsi:type="Before">
                     <operand locator="55:121-55:126" xsi:type="Start">
                        <operand localId="130" locator="55:17-55:119" name="NormalizeInterval" libraryName="Global" xsi:type="FunctionRef">
                           <operand localId="127" locator="55:48-55:79" path="authorDatetime" scope="LVADComplications" xsi:type="Property"/>
                           <operand localId="129" locator="55:82-55:115" path="prevalencePeriod" scope="LVADComplications" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="133" locator="56:7-56:69" xsi:type="End">
                        <operand localId="132" locator="56:14-56:69" path="relevantPeriod" scope="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="Property"/>
                     </operand>
                  </suchThat>
               </relationship>
            </operand>
         </expression>
      </def>
      <def localId="162" locator="75:1-82:74" name="Qualifying Outpatient Encounter During Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="162">
               <a:s>define &quot;Qualifying Outpatient Encounter During Measurement Period&quot;:
  </a:s>
               <a:s r="161">
                  <a:s>
                     <a:s r="156">
                        <a:s r="155">
                           <a:s>( </a:s>
                           <a:s r="155">
                              <a:s r="153">
                                 <a:s r="151">
                                    <a:s r="149">
                                       <a:s r="147">
                                          <a:s r="145">
                                             <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                             <a:s>
                                                <a:s>&quot;Office Visit&quot;</a:s>
                                             </a:s>
                                             <a:s>]</a:s>
                                          </a:s>
                                          <a:s>
    union </a:s>
                                          <a:s r="146">
                                             <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                             <a:s>
                                                <a:s>&quot;Outpatient Consultation&quot;</a:s>
                                             </a:s>
                                             <a:s>]</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    union </a:s>
                                       <a:s r="148">
                                          <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                          <a:s>
                                             <a:s>&quot;Nursing Facility Visit&quot;</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    union </a:s>
                                    <a:s r="150">
                                       <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                       <a:s>
                                          <a:s>&quot;Care Services in Long Term Residential Facility&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    union </a:s>
                                 <a:s r="152">
                                    <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                    <a:s>
                                       <a:s>&quot;Home Healthcare Services&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    union </a:s>
                              <a:s r="154">
                                 <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Patient Provider Interaction&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> )</a:s>
                        </a:s>
                        <a:s> ValidEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="160">
                     <a:s>where </a:s>
                     <a:s r="160">
                        <a:s r="158">
                           <a:s r="157">
                              <a:s>ValidEncounter</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="158">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="160"> during day of </a:s>
                        <a:s r="159">
                           <a:s>&quot;Measurement Period&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="161" locator="76:3-82:74" xsi:type="Query">
            <source localId="156" locator="76:3-81:83" alias="ValidEncounter">
               <expression localId="155" locator="76:3-81:68" xsi:type="Union">
                  <operand localId="151" locator="76:5-79:85" xsi:type="Union">
                     <operand localId="147" locator="76:5-77:61" xsi:type="Union">
                        <operand localId="145" locator="76:5-76:44" xmlns:ns21="urn:healthit-gov:qdm:v5_6" dataType="ns21:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="76:30-76:43" name="Office Visit" xsi:type="ValueSetRef"/>
                        </operand>
                        <operand localId="146" locator="77:11-77:61" xmlns:ns22="urn:healthit-gov:qdm:v5_6" dataType="ns22:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="77:36-77:60" name="Outpatient Consultation" xsi:type="ValueSetRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Union">
                        <operand localId="148" locator="78:11-78:60" xmlns:ns23="urn:healthit-gov:qdm:v5_6" dataType="ns23:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="78:36-78:59" name="Nursing Facility Visit" xsi:type="ValueSetRef"/>
                        </operand>
                        <operand localId="150" locator="79:11-79:85" xmlns:ns24="urn:healthit-gov:qdm:v5_6" dataType="ns24:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="79:36-79:84" name="Care Services in Long Term Residential Facility" xsi:type="ValueSetRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="Union">
                     <operand localId="152" locator="80:11-80:62" xmlns:ns25="urn:healthit-gov:qdm:v5_6" dataType="ns25:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                        <codes locator="80:36-80:61" name="Home Healthcare Services" xsi:type="ValueSetRef"/>
                     </operand>
                     <operand localId="154" locator="81:11-81:66" xmlns:ns26="urn:healthit-gov:qdm:v5_6" dataType="ns26:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                        <codes locator="81:36-81:65" name="Patient Provider Interaction" xsi:type="ValueSetRef"/>
                     </operand>
                  </operand>
               </expression>
            </source>
            <where localId="160" locator="82:5-82:74" precision="Day" xsi:type="IncludedIn">
               <operand localId="158" locator="82:11-82:39" path="relevantPeriod" scope="ValidEncounter" xsi:type="Property"/>
               <operand localId="159" locator="82:55-82:74" name="Measurement Period" xsi:type="ParameterRef"/>
            </where>
         </expression>
      </def>
      <def localId="179" locator="58:1-64:51" name="Has Two Qualifying Outpatient Encounters and Heart Failure Outpatient Encounter During the Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="179">
               <a:s>define &quot;Has Two Qualifying Outpatient Encounters and Heart Failure Outpatient Encounter During the Measurement Period&quot;:
  </a:s>
               <a:s r="178">
                  <a:s r="175">
                     <a:s r="144">
                        <a:s r="142">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="141">
                              <a:s>date from </a:s>
                              <a:s r="140">
                                 <a:s>start of </a:s>
                                 <a:s r="139">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="143">>= 18</a:s>
                     </a:s>
                     <a:s>
    and </a:s>
                     <a:s r="174">
                        <a:s>exists </a:s>
                        <a:s r="173">
                           <a:s>( </a:s>
                           <a:s r="173">
                              <a:s>
                                 <a:s r="164">
                                    <a:s r="163">
                                       <a:s>
                                          <a:s>&quot;Qualifying Outpatient Encounter During Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> Encounter1</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        </a:s>
                              <a:s r="172">
                                 <a:s>with </a:s>
                                 <a:s r="166">
                                    <a:s r="165">
                                       <a:s>
                                          <a:s>&quot;Qualifying Outpatient Encounter During Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> Encounter2</a:s>
                                 </a:s>
                                 <a:s>
          such that </a:s>
                                 <a:s r="171">
                                    <a:s r="168">
                                       <a:s r="167">
                                          <a:s>Encounter2</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="168">
                                          <a:s>id</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> !~ </a:s>
                                    <a:s r="170">
                                       <a:s r="169">
                                          <a:s>Encounter1</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="170">
                                          <a:s>id</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    )</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    and </a:s>
                  <a:s r="177">
                     <a:s>exists </a:s>
                     <a:s r="176">
                        <a:s>&quot;Heart Failure Outpatient Encounter&quot;</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="178" locator="59:3-64:51" xsi:type="And">
            <operand localId="175" locator="59:3-63:5" xsi:type="And">
               <operand localId="144" locator="59:3-59:60" xsi:type="GreaterOrEqual">
                  <operand localId="142" locator="59:3-59:55" precision="Year" xsi:type="CalculateAgeAt">
                     <operand xsi:type="ToDate">
                        <operand path="birthDatetime" xsi:type="Property">
                           <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="141" locator="59:16-59:54" xsi:type="DateFrom">
                        <operand localId="140" locator="59:26-59:54" xsi:type="Start">
                           <operand localId="139" locator="59:35-59:54" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="143" locator="59:59-59:60" valueType="t:Integer" value="18" xsi:type="Literal"/>
               </operand>
               <operand localId="174" locator="60:9-63:5" xsi:type="Exists">
                  <operand localId="173" locator="60:16-63:5" xsi:type="Query">
                     <source localId="164" locator="60:18-60:87" alias="Encounter1">
                        <expression localId="163" locator="60:18-60:76" name="Qualifying Outpatient Encounter During Measurement Period" xsi:type="ExpressionRef"/>
                     </source>
                     <relationship localId="172" locator="61:9-62:50" alias="Encounter2" xsi:type="With">
                        <expression localId="165" locator="61:14-61:72" name="Qualifying Outpatient Encounter During Measurement Period" xsi:type="ExpressionRef"/>
                        <suchThat localId="171" locator="62:21-62:50" xsi:type="Not">
                           <operand locator="62:21-62:50" xsi:type="Equivalent">
                              <operand localId="168" locator="62:21-62:33" path="id" scope="Encounter2" xsi:type="Property"/>
                              <operand localId="170" locator="62:38-62:50" path="id" scope="Encounter1" xsi:type="Property"/>
                           </operand>
                        </suchThat>
                     </relationship>
                  </operand>
               </operand>
            </operand>
            <operand localId="177" locator="64:9-64:51" xsi:type="Exists">
               <operand localId="176" locator="64:16-64:51" name="Heart Failure Outpatient Encounter" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="197" locator="84:1-88:69" name="Has Heart Transplant" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="197">
               <a:s>define &quot;Has Heart Transplant&quot;:
  </a:s>
               <a:s r="196">
                  <a:s>exists </a:s>
                  <a:s r="195">
                     <a:s>
                        <a:s r="181">
                           <a:s r="180">
                              <a:s r="180">
                                 <a:s>[&quot;Procedure, Performed&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Heart Transplant&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> HeartTransplant</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="194">
                        <a:s>with </a:s>
                        <a:s r="183">
                           <a:s r="182">
                              <a:s>
                                 <a:s>&quot;Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                        </a:s>
                        <a:s>
      such that </a:s>
                        <a:s r="193">
                           <a:s r="189">
                              <a:s>( </a:s>
                              <a:s r="189">
                                 <a:s r="184">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="189">
                                    <a:s>&quot;NormalizeInterval&quot; ( </a:s>
                                    <a:s r="186">
                                       <a:s r="185">
                                          <a:s>HeartTransplant</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="186">
                                          <a:s>relevantDatetime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="188">
                                       <a:s r="187">
                                          <a:s>HeartTransplant</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="188">
                                          <a:s>relevantPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> )</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                           <a:s r="193"> starts before 
      </a:s>
                           <a:s r="192">
                              <a:s>end of </a:s>
                              <a:s r="191">
                                 <a:s r="190">
                                    <a:s>ModerateOrSevereLVSDHFOutpatientEncounter</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="191">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="196" locator="85:3-88:69" xsi:type="Exists">
            <operand localId="195" locator="85:10-88:69" xsi:type="Query">
               <source localId="181" locator="85:10-85:69" alias="HeartTransplant">
                  <expression localId="180" locator="85:10-85:53" xmlns:ns27="urn:healthit-gov:qdm:v5_6" dataType="ns27:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="85:35-85:52" name="Heart Transplant" xsi:type="ValueSetRef"/>
                  </expression>
               </source>
               <relationship localId="194" locator="86:5-88:69" alias="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="With">
                  <expression localId="182" locator="86:10-86:85" name="Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD" xsi:type="ExpressionRef"/>
                  <suchThat localId="193" locator="87:17-88:69" xsi:type="Before">
                     <operand locator="87:117-87:122" xsi:type="Start">
                        <operand localId="189" locator="87:17-87:115" name="NormalizeInterval" libraryName="Global" xsi:type="FunctionRef">
                           <operand localId="186" locator="87:48-87:79" path="relevantDatetime" scope="HeartTransplant" xsi:type="Property"/>
                           <operand localId="188" locator="87:82-87:111" path="relevantPeriod" scope="HeartTransplant" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="192" locator="88:7-88:69" xsi:type="End">
                        <operand localId="191" locator="88:14-88:69" path="relevantPeriod" scope="ModerateOrSevereLVSDHFOutpatientEncounter" xsi:type="Property"/>
                     </operand>
                  </suchThat>
               </relationship>
            </operand>
         </expression>
      </def>
   </statements>
</library>
