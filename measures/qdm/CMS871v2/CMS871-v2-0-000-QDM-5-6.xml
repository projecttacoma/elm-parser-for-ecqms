<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="397">
         <a:s>library HospitalHarmHyperglycemiainHospitalizedPatients version '2.0.000'</a:s>
      </a:s>
   </annotation>
   <identifier id="HospitalHarmHyperglycemiainHospitalizedPatients" version="2.0.000"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:23" localIdentifier="QDM" uri="urn:healthit-gov:qdm:v5_6" version="5.6">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>QDM</a:s>
               </a:s>
               <a:s> version '5.6'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:64" localIdentifier="Global" path="MATGlobalCommonFunctions" version="7.0.000">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>MATGlobalCommonFunctions</a:s>
               </a:s>
               <a:s> version '7.0.000' called Global</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="13" locator="16:1-16:49" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="12">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="11">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
            </a:s>
         </annotation>
         <parameterTypeSpecifier localId="12" locator="16:32-16:49" xsi:type="IntervalTypeSpecifier">
            <pointType localId="11" locator="16:41-16:48" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <valueSets>
      <def localId="3" locator="7:1-7:71" name="Diabetes" id="urn:oid:2.16.840.1.113883.3.464.1003.103.12.1001" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>valueset &quot;Diabetes&quot;: 'urn:oid:2.16.840.1.113883.3.464.1003.103.12.1001'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="8:1-8:71" name="Encounter Inpatient" id="urn:oid:2.16.840.1.113883.3.666.5.307" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>valueset &quot;Encounter Inpatient&quot;: 'urn:oid:2.16.840.1.113883.3.666.5.307'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="9:1-9:58" name="Ethnicity" id="urn:oid:2.16.840.1.114222.4.11.837" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>valueset &quot;Ethnicity&quot;: 'urn:oid:2.16.840.1.114222.4.11.837'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="10:1-10:84" name="Glucose Lab Test Mass Per Volume" id="urn:oid:2.16.840.1.113762.1.4.1248.34" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>valueset &quot;Glucose Lab Test Mass Per Volume&quot;: 'urn:oid:2.16.840.1.113762.1.4.1248.34'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="11:1-11:88" name="Hypoglycemics Treatment Medications" id="urn:oid:2.16.840.1.113762.1.4.1196.394" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>valueset &quot;Hypoglycemics Treatment Medications&quot;: 'urn:oid:2.16.840.1.113762.1.4.1196.394'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="8" locator="12:1-12:68" name="ONC Administrative Sex" id="urn:oid:2.16.840.1.113762.1.4.1" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="8">
               <a:s>valueset &quot;ONC Administrative Sex&quot;: 'urn:oid:2.16.840.1.113762.1.4.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="9" locator="13:1-13:55" name="Payer" id="urn:oid:2.16.840.1.114222.4.11.3591" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="9">
               <a:s>valueset &quot;Payer&quot;: 'urn:oid:2.16.840.1.114222.4.11.3591'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="10" locator="14:1-14:53" name="Race" id="urn:oid:2.16.840.1.114222.4.11.836" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>valueset &quot;Race&quot;: 'urn:oid:2.16.840.1.114222.4.11.836'</a:s>
            </a:s>
         </annotation>
      </def>
   </valueSets>
   <contexts>
      <def locator="18:1-18:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="18:1-18:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="18:1-18:15" xmlns:ns0="urn:healthit-gov:qdm:v5_6" dataType="ns0:Patient" templateId="Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="30" locator="142:1-145:107" name="Qualifying Encounter" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="30">
               <a:s>define &quot;Qualifying Encounter&quot;:
  </a:s>
               <a:s r="29">
                  <a:s>
                     <a:s r="15">
                        <a:s r="14">
                           <a:s r="14">
                              <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Encounter Inpatient&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> InpatientEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="28">
                     <a:s>where </a:s>
                     <a:s r="28">
                        <a:s r="19">
                           <a:s r="17">
                              <a:s r="16">
                                 <a:s>InpatientEncounter</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="17">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="19"> ends during day of </a:s>
                           <a:s r="18">
                              <a:s>&quot;Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="27">
                           <a:s r="25">
                              <a:s>AgeInYearsAt(</a:s>
                              <a:s r="24">
                                 <a:s>date from </a:s>
                                 <a:s r="23">
                                    <a:s>start of </a:s>
                                    <a:s r="22">
                                       <a:s r="20">
                                          <a:s>Global</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="22">
                                          <a:s>&quot;HospitalizationWithObservation&quot;(</a:s>
                                          <a:s r="21">
                                             <a:s>InpatientEncounter</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="26">>= 18</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="29" locator="143:3-145:107" xsi:type="Query">
            <source localId="15" locator="143:3-143:68" alias="InpatientEncounter">
               <expression localId="14" locator="143:3-143:49" xmlns:ns1="urn:healthit-gov:qdm:v5_6" dataType="ns1:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="143:28-143:48" name="Encounter Inpatient" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="28" locator="144:5-145:107" xsi:type="And">
               <operand localId="19" locator="144:11-144:83" precision="Day" xsi:type="In">
                  <operand locator="144:45-144:48" xsi:type="End">
                     <operand localId="17" locator="144:11-144:43" path="relevantPeriod" scope="InpatientEncounter" xsi:type="Property"/>
                  </operand>
                  <operand localId="18" locator="144:64-144:83" name="Measurement Period" xsi:type="ParameterRef"/>
               </operand>
               <operand localId="27" locator="145:11-145:107" xsi:type="GreaterOrEqual">
                  <operand localId="25" locator="145:11-145:102" precision="Year" xsi:type="CalculateAgeAt">
                     <operand xsi:type="ToDate">
                        <operand path="birthDatetime" xsi:type="Property">
                           <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="24" locator="145:24-145:101" xsi:type="DateFrom">
                        <operand localId="23" locator="145:34-145:101" xsi:type="Start">
                           <operand localId="22" locator="145:43-145:101" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                              <operand localId="21" locator="145:83-145:100" name="InpatientEncounter" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="26" locator="145:106-145:107" valueType="t:Integer" value="18" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="40" locator="107:1-112:5" name="Encounter With Hospitalization Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="40">
               <a:s>/** Create paring of encounters to hospitalization period so this calculation can be inspected and the result 
 * can be reused, making the logic faster.*/define &quot;Encounter With Hospitalization Period&quot;:
  </a:s>
               <a:s r="39">
                  <a:s>
                     <a:s r="32">
                        <a:s r="31">
                           <a:s>
                              <a:s>&quot;Qualifying Encounter&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> InpatientHospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="38">
                     <a:s>return </a:s>
                     <a:s r="37">
                        <a:s>Tuple {
      </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="33">
                              <a:s>InpatientHospitalization</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>hospitalizationPeriod: </a:s>
                           <a:s r="36">
                              <a:s r="34">
                                 <a:s>Global</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="36">
                                 <a:s>&quot;HospitalizationWithObservation&quot; ( </a:s>
                                 <a:s r="35">
                                    <a:s>InpatientHospitalization</a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="39" locator="108:3-112:5" xsi:type="Query">
            <source localId="32" locator="108:3-108:49" alias="InpatientHospitalization">
               <expression localId="31" locator="108:3-108:24" name="Qualifying Encounter" xsi:type="ExpressionRef"/>
            </source>
            <return localId="38" locator="109:5-112:5">
               <expression localId="37" locator="109:12-112:5" xsi:type="Tuple">
                  <element name="encounter">
                     <value localId="33" locator="110:18-110:41" name="InpatientHospitalization" xsi:type="AliasRef"/>
                  </element>
                  <element name="hospitalizationPeriod">
                     <value localId="36" locator="111:30-111:97" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                        <operand localId="35" locator="111:72-111:95" name="InpatientHospitalization" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="56" locator="93:1-98:36" name="Encounter With Existing Diabetes Diagnosis" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="56">
               <a:s>/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with 
 * diabetes and return the encounter.*/define &quot;Encounter With Existing Diabetes Diagnosis&quot;:
  </a:s>
               <a:s r="55">
                  <a:s>
                     <a:s r="42">
                        <a:s r="41">
                           <a:s>
                              <a:s>&quot;Encounter With Hospitalization Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Hospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="51">
                     <a:s>with </a:s>
                     <a:s r="44">
                        <a:s r="43">
                           <a:s r="43">
                              <a:s>[&quot;Diagnosis&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Diabetes&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Diabetes</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="50">
                        <a:s r="46">
                           <a:s r="45">
                              <a:s>Diabetes</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="46">
                              <a:s>prevalencePeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="50"> starts before 
      </a:s>
                        <a:s r="49">
                           <a:s>end of </a:s>
                           <a:s r="48">
                              <a:s r="47">
                                 <a:s>Hospitalization</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="48">
                                 <a:s>hospitalizationPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="54">
                     <a:s>return </a:s>
                     <a:s r="53">
                        <a:s r="52">
                           <a:s>Hospitalization</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="53">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="55" locator="94:3-98:36" xsi:type="Query">
            <source localId="42" locator="94:3-94:57" alias="Hospitalization">
               <expression localId="41" locator="94:3-94:41" name="Encounter With Hospitalization Period" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="51" locator="95:5-97:50" alias="Diabetes" xsi:type="With">
               <expression localId="43" locator="95:10-95:34" xmlns:ns2="urn:healthit-gov:qdm:v5_6" dataType="ns2:Diagnosis" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="95:24-95:33" name="Diabetes" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat localId="50" locator="96:17-97:50" xsi:type="Before">
                  <operand locator="96:43-96:48" xsi:type="Start">
                     <operand localId="46" locator="96:17-96:41" path="prevalencePeriod" scope="Diabetes" xsi:type="Property"/>
                  </operand>
                  <operand localId="49" locator="97:7-97:50" xsi:type="End">
                     <operand localId="48" locator="97:14-97:50" path="hospitalizationPeriod" scope="Hospitalization" xsi:type="Property"/>
                  </operand>
               </suchThat>
            </relationship>
            <return localId="54" locator="98:5-98:36">
               <expression localId="53" locator="98:12-98:36" path="encounter" scope="Hospitalization" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="76" locator="121:1-125:36" name="Encounter With Hypoglycemic Medication" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="76">
               <a:s>define &quot;Encounter With Hypoglycemic Medication&quot;:
  </a:s>
               <a:s r="75">
                  <a:s>
                     <a:s r="59">
                        <a:s r="58">
                           <a:s>
                              <a:s>&quot;Encounter With Hospitalization Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Hospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="71">
                     <a:s>with </a:s>
                     <a:s r="61">
                        <a:s r="60">
                           <a:s r="60">
                              <a:s>[&quot;Medication, Administered&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Hypoglycemics Treatment Medications&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HypoglycemicMed</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="70">
                        <a:s r="67">
                           <a:s r="62">
                              <a:s>Global</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="67">
                              <a:s>&quot;NormalizeInterval&quot; ( </a:s>
                              <a:s r="64">
                                 <a:s r="63">
                                    <a:s>HypoglycemicMed</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="64">
                                    <a:s>relevantDatetime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="66">
                                 <a:s r="65">
                                    <a:s>HypoglycemicMed</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="66">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="70"> starts during </a:s>
                        <a:s r="69">
                           <a:s r="68">
                              <a:s>Hospitalization</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="69">
                              <a:s>hospitalizationPeriod</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="74">
                     <a:s>return </a:s>
                     <a:s r="73">
                        <a:s r="72">
                           <a:s>Hospitalization</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="73">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="75" locator="122:3-125:36" xsi:type="Query">
            <source localId="59" locator="122:3-122:57" alias="Hospitalization">
               <expression localId="58" locator="122:3-122:41" name="Encounter With Hospitalization Period" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="71" locator="123:5-124:163" alias="HypoglycemicMed" xsi:type="With">
               <expression localId="60" locator="123:10-123:76" xmlns:ns3="urn:healthit-gov:qdm:v5_6" dataType="ns3:PositiveMedicationAdministered" templateId="PositiveMedicationAdministered" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="123:39-123:75" name="Hypoglycemics Treatment Medications" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat localId="70" locator="124:17-124:163" xsi:type="In">
                  <operand locator="124:113-124:118" xsi:type="Start">
                     <operand localId="67" locator="124:17-124:111" name="NormalizeInterval" libraryName="Global" xsi:type="FunctionRef">
                        <operand localId="64" locator="124:46-124:77" path="relevantDatetime" scope="HypoglycemicMed" xsi:type="Property"/>
                        <operand localId="66" locator="124:80-124:109" path="relevantPeriod" scope="HypoglycemicMed" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="69" locator="124:127-124:163" path="hospitalizationPeriod" scope="Hospitalization" xsi:type="Property"/>
               </suchThat>
            </relationship>
            <return localId="74" locator="125:5-125:36">
               <expression localId="73" locator="125:12-125:36" path="encounter" scope="Hospitalization" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="98" locator="84:1-89:36" name="Encounter With Elevated Blood Glucose Lab" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="98">
               <a:s>/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with 
 * any elevated (>= 200) blood glucose reading during the hospitalization*/define &quot;Encounter With Elevated Blood Glucose Lab&quot;:
  </a:s>
               <a:s r="97">
                  <a:s>
                     <a:s r="80">
                        <a:s r="79">
                           <a:s>
                              <a:s>&quot;Encounter With Hospitalization Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Hospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="93">
                     <a:s>with </a:s>
                     <a:s r="82">
                        <a:s r="81">
                           <a:s r="81">
                              <a:s>[&quot;Laboratory Test, Performed&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Glucose Lab Test Mass Per Volume&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> BloodGlucoseLab</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="92">
                        <a:s r="87">
                           <a:s r="84">
                              <a:s r="83">
                                 <a:s>BloodGlucoseLab</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="84">
                                 <a:s>relevantDatetime</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="87"> during </a:s>
                           <a:s r="86">
                              <a:s r="85">
                                 <a:s>Hospitalization</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="86">
                                 <a:s>hospitalizationPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="91">
                           <a:s r="89">
                              <a:s r="88">
                                 <a:s>BloodGlucoseLab</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="89">
                                 <a:s>result</a:s>
                              </a:s>
                           </a:s>
                           <a:s> >= </a:s>
                           <a:s r="90">
                              <a:s>200 'mg/dL'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="96">
                     <a:s>return </a:s>
                     <a:s r="95">
                        <a:s r="94">
                           <a:s>Hospitalization</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="95">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="97" locator="85:3-89:36" xsi:type="Query">
            <source localId="80" locator="85:3-85:57" alias="Hospitalization">
               <expression localId="79" locator="85:3-85:41" name="Encounter With Hospitalization Period" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="93" locator="86:5-88:49" alias="BloodGlucoseLab" xsi:type="With">
               <expression localId="81" locator="86:10-86:75" xmlns:ns4="urn:healthit-gov:qdm:v5_6" dataType="ns4:PositiveLaboratoryTestPerformed" templateId="PositiveLaboratoryTestPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="86:41-86:74" name="Glucose Lab Test Mass Per Volume" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat localId="92" locator="87:17-88:49" xsi:type="And">
                  <operand localId="87" locator="87:17-87:93" xsi:type="In">
                     <operand localId="84" locator="87:17-87:48" path="relevantDatetime" scope="BloodGlucoseLab" xsi:type="Property"/>
                     <operand localId="86" locator="87:57-87:93" path="hospitalizationPeriod" scope="Hospitalization" xsi:type="Property"/>
                  </operand>
                  <operand localId="91" locator="88:13-88:49" xsi:type="GreaterOrEqual">
                     <operand asType="t:Quantity" xsi:type="As">
                        <operand localId="89" locator="88:13-88:34" path="result" scope="BloodGlucoseLab" xsi:type="Property"/>
                     </operand>
                     <operand localId="90" locator="88:39-88:49" value="200" unit="mg/dL" xsi:type="Quantity"/>
                  </operand>
               </suchThat>
            </relationship>
            <return localId="96" locator="89:5-89:36">
               <expression localId="95" locator="89:12-89:36" path="encounter" scope="Hospitalization" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="101" locator="134:1-137:53" name="Initial Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="101">
               <a:s>define &quot;Initial Population&quot;:
  </a:s>
               <a:s r="100">
                  <a:s r="78">
                     <a:s r="57">
                        <a:s>&quot;Encounter With Existing Diabetes Diagnosis&quot;</a:s>
                     </a:s>
                     <a:s>
    union </a:s>
                     <a:s r="77">
                        <a:s>&quot;Encounter With Hypoglycemic Medication&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    union </a:s>
                  <a:s r="99">
                     <a:s>&quot;Encounter With Elevated Blood Glucose Lab&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="100" locator="135:3-137:53" xsi:type="Union">
            <operand localId="78" locator="135:3-136:50" xsi:type="Union">
               <operand localId="57" locator="135:3-135:46" name="Encounter With Existing Diabetes Diagnosis" xsi:type="ExpressionRef"/>
               <operand localId="77" locator="136:11-136:50" name="Encounter With Hypoglycemic Medication" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="99" locator="137:11-137:53" name="Encounter With Elevated Blood Glucose Lab" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="122" locator="175:1-178:4" name="Hospital Days Max 10" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="122">
               <a:s>/**
 * Crops an interval to a maximum length of 10 days.*/define function &quot;Hospital Days Max 10&quot;(Period </a:s>
               <a:s r="110">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="109">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="121">
                  <a:s r="121">
                     <a:s>Interval[</a:s>
                     <a:s r="112">
                        <a:s>start of </a:s>
                        <a:s r="111">
                           <a:s>Period</a:s>
                        </a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="120">
                        <a:s>Min(</a:s>
                        <a:s r="119">
                           <a:s>{ 
    </a:s>
                           <a:s r="114">
                              <a:s>end of </a:s>
                              <a:s r="113">
                                 <a:s>Period</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="118">
                              <a:s r="116">
                                 <a:s>start of </a:s>
                                 <a:s r="115">
                                    <a:s>Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="117">
                                 <a:s>10 days</a:s>
                              </a:s>
                           </a:s>
                           <a:s> }</a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s>]</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="121" locator="176:3-178:4" lowClosed="true" highClosed="true" xsi:type="Interval">
            <low localId="112" locator="176:12-176:26" xsi:type="Start">
               <operand localId="111" locator="176:21-176:26" name="Period" xsi:type="OperandRef"/>
            </low>
            <high localId="120" locator="176:29-178:3" xsi:type="Min">
               <source localId="119" locator="176:33-177:46" xsi:type="List">
                  <element localId="114" locator="177:5-177:17" xsi:type="End">
                     <operand localId="113" locator="177:12-177:17" name="Period" xsi:type="OperandRef"/>
                  </element>
                  <element localId="118" locator="177:20-177:44" xsi:type="Add">
                     <operand localId="116" locator="177:20-177:34" xsi:type="Start">
                        <operand localId="115" locator="177:29-177:34" name="Period" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="117" locator="177:38-177:44" value="10" unit="days" xsi:type="Quantity"/>
                  </element>
               </source>
            </high>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier localId="110" locator="175:47-175:64" xsi:type="IntervalTypeSpecifier">
               <pointType localId="109" locator="175:56-175:63" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="148" locator="193:1-197:20" name="Interval To Day Numbers" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="148">
               <a:s>/** Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for
 * the final day if it is less than 24 hours. This also includes the first 24 hour period.*/define function &quot;Interval To Day Numbers&quot;(Period </a:s>
               <a:s r="133">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="132">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="147">
                  <a:s r="147">
                     <a:s>
                        <a:s r="143">
                           <a:s r="142">
                              <a:s>( </a:s>
                              <a:s r="142">
                                 <a:s>expand </a:s>
                                 <a:s r="141">
                                    <a:s>{ </a:s>
                                    <a:s r="140">
                                       <a:s r="134">Interval[1, </a:s>
                                       <a:s r="139">
                                          <a:s>duration in days between </a:s>
                                          <a:s r="136">
                                             <a:s>start of </a:s>
                                             <a:s r="135">
                                                <a:s>Period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> and 
  </a:s>
                                          <a:s r="138">
                                             <a:s>end of </a:s>
                                             <a:s r="137">
                                                <a:s>Period</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                    <a:s>}</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                           <a:s> DayNumber</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="146">
                        <a:s>return 
    </a:s>
                        <a:s r="145">
                           <a:s>end of </a:s>
                           <a:s r="144">
                              <a:s>DayNumber</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="147" locator="194:3-197:20" xsi:type="Query">
            <source localId="143" locator="194:3-195:29" alias="DayNumber">
               <expression localId="142" locator="194:3-195:19" xsi:type="Expand">
                  <operand localId="141" locator="194:12-195:17" xsi:type="List">
                     <element localId="140" locator="194:14-195:16" lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low localId="134" locator="194:23" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        <high localId="139" locator="194:26-195:15" precision="Day" xsi:type="DurationBetween">
                           <operand localId="136" locator="194:51-194:65" xsi:type="Start">
                              <operand localId="135" locator="194:60-194:65" name="Period" xsi:type="OperandRef"/>
                           </operand>
                           <operand localId="138" locator="195:3-195:15" xsi:type="End">
                              <operand localId="137" locator="195:10-195:15" name="Period" xsi:type="OperandRef"/>
                           </operand>
                        </high>
                     </element>
                  </operand>
                  <operand resultTypeName="t:Quantity" xsi:type="Null"/>
               </expression>
            </source>
            <return localId="146" locator="196:5-197:20">
               <expression localId="145" locator="197:5-197:20" xsi:type="End">
                  <operand localId="144" locator="197:12-197:20" name="DayNumber" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier localId="133" locator="193:50-193:67" xsi:type="IntervalTypeSpecifier">
               <pointType localId="132" locator="193:59-193:66" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="182" locator="161:1-171:5" name="Days In Period" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="182">
               <a:s>/**
 * Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.*/define function &quot;Days In Period&quot;(Period </a:s>
               <a:s r="130">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="129">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="181">
                  <a:s r="181">
                     <a:s>
                        <a:s r="150">
                           <a:s r="149">
                              <a:s>( </a:s>
                              <a:s r="149">
                                 <a:s>&quot;Interval To Day Numbers&quot;(</a:s>
                                 <a:s r="131">
                                    <a:s>Period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> DayIndex</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="159">
                           <a:s>startPeriod: </a:s>
                           <a:s r="158">
                              <a:s r="152">
                                 <a:s>start of </a:s>
                                 <a:s r="151">
                                    <a:s>Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="157">
                                 <a:s>( </a:s>
                                 <a:s r="157">
                                    <a:s r="153">
                                       <a:s>24 hours</a:s>
                                    </a:s>
                                    <a:s> * </a:s>
                                    <a:s r="156">
                                       <a:s>( </a:s>
                                       <a:s r="156">
                                          <a:s r="154">
                                             <a:s>DayIndex</a:s>
                                          </a:s>
                                          <a:s r="155"> - 1</a:s>
                                       </a:s>
                                       <a:s> )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="174">
                           <a:s>endPeriod: </a:s>
                           <a:s r="173">
                              <a:s>if </a:s>
                              <a:s r="165">
                                 <a:s>( </a:s>
                                 <a:s r="165">
                                    <a:s r="163">
                                       <a:s>hours between </a:s>
                                       <a:s r="160">
                                          <a:s>startPeriod</a:s>
                                       </a:s>
                                       <a:s> and 
      </a:s>
                                       <a:s r="162">
                                          <a:s>end of </a:s>
                                          <a:s r="161">
                                             <a:s>Period</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="164"> &lt; 24</a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                              <a:s> then </a:s>
                              <a:s r="166">
                                 <a:s>startPeriod</a:s>
                              </a:s>
                              <a:s> 
      else </a:s>
                              <a:s r="172">
                                 <a:s r="168">
                                    <a:s>start of </a:s>
                                    <a:s r="167">
                                       <a:s>Period</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="171">
                                    <a:s>( </a:s>
                                    <a:s r="171">
                                       <a:s r="169">
                                          <a:s>24 hours</a:s>
                                       </a:s>
                                       <a:s> * </a:s>
                                       <a:s r="170">
                                          <a:s>DayIndex</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> )</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="180">
                        <a:s>return </a:s>
                        <a:s r="179">
                           <a:s>Tuple {
      </a:s>
                           <a:s>
                              <a:s>dayIndex: </a:s>
                              <a:s r="175">
                                 <a:s>DayIndex</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>dayPeriod: </a:s>
                              <a:s r="178">
                                 <a:s>Interval[</a:s>
                                 <a:s r="176">
                                    <a:s>startPeriod</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="177">
                                    <a:s>endPeriod</a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    }</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="181" locator="162:3-171:5" xsi:type="Query">
            <source localId="150" locator="162:3-162:47" alias="DayIndex">
               <expression localId="149" locator="162:3-162:38" name="Interval To Day Numbers" xsi:type="FunctionRef">
                  <operand localId="131" locator="162:31-162:36" name="Period" xsi:type="OperandRef"/>
               </expression>
            </source>
            <let localId="159" locator="163:9-163:70" identifier="startPeriod">
               <expression localId="158" locator="163:22-163:70" xsi:type="Add">
                  <operand localId="152" locator="163:22-163:36" xsi:type="Start">
                     <operand localId="151" locator="163:31-163:36" name="Period" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="157" locator="163:40-163:70" xsi:type="Multiply">
                     <operand localId="153" locator="163:42-163:49" value="24" unit="hours" xsi:type="Quantity"/>
                     <operand xsi:type="ToQuantity">
                        <operand localId="156" locator="163:53-163:68" xsi:type="Subtract">
                           <operand localId="154" locator="163:55-163:62" name="DayIndex" xsi:type="AliasRef"/>
                           <operand localId="155" locator="163:66" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
               </expression>
            </let>
            <let localId="174" locator="164:5-167:52" identifier="endPeriod">
               <expression localId="173" locator="164:16-167:52" xsi:type="If">
                  <condition localId="165" locator="164:19-166:5" xsi:type="Less">
                     <operand localId="163" locator="164:21-165:19" precision="Hour" xsi:type="DurationBetween">
                        <operand localId="160" locator="164:35-164:45" name="startPeriod" xsi:type="QueryLetRef"/>
                        <operand localId="162" locator="165:7-165:19" xsi:type="End">
                           <operand localId="161" locator="165:14-165:19" name="Period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand localId="164" locator="165:23-165:24" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </condition>
                  <then localId="166" locator="166:12-166:22" name="startPeriod" xsi:type="QueryLetRef"/>
                  <else localId="172" locator="167:12-167:52" xsi:type="Add">
                     <operand localId="168" locator="167:12-167:26" xsi:type="Start">
                        <operand localId="167" locator="167:21-167:26" name="Period" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="171" locator="167:30-167:52" xsi:type="Multiply">
                        <operand localId="169" locator="167:32-167:39" value="24" unit="hours" xsi:type="Quantity"/>
                        <operand xsi:type="ToQuantity">
                           <operand localId="170" locator="167:43-167:50" name="DayIndex" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </else>
               </expression>
            </let>
            <return localId="180" locator="168:5-171:5">
               <expression localId="179" locator="168:12-171:5" xsi:type="Tuple">
                  <element name="dayIndex">
                     <value localId="175" locator="169:17-169:24" name="DayIndex" xsi:type="AliasRef"/>
                  </element>
                  <element name="dayPeriod">
                     <value localId="178" locator="170:18-170:50" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low localId="176" locator="170:27-170:37" name="startPeriod" xsi:type="QueryLetRef"/>
                        <high localId="177" locator="170:40-170:48" name="endPeriod" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier localId="130" locator="161:41-161:58" xsi:type="IntervalTypeSpecifier">
               <pointType localId="129" locator="161:50-161:57" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="187" locator="20:1-29:5" name="Days in Hospitalization" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="187">
               <a:s>define &quot;Days in Hospitalization&quot;:
  </a:s>
               <a:s r="186">
                  <a:s>
                     <a:s r="103">
                        <a:s r="102">
                           <a:s>
                              <a:s>&quot;Initial Population&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EligibleInpatientHospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="107">
                        <a:s>period: </a:s>
                        <a:s r="106">
                           <a:s r="104">
                              <a:s>Global</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="106">
                              <a:s>&quot;HospitalizationWithObservation&quot; ( </a:s>
                              <a:s r="105">
                                 <a:s>EligibleInpatientHospitalization</a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="124">
                        <a:s>relevantPeriod: </a:s>
                        <a:s r="123">
                           <a:s>&quot;Hospital Days Max 10&quot;(</a:s>
                           <a:s r="108">
                              <a:s>period</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="185">
                     <a:s>return </a:s>
                     <a:s r="184">
                        <a:s>Tuple {
      </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="125">
                              <a:s>EligibleInpatientHospitalization</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>hospitalizationPeriod: </a:s>
                           <a:s r="126">
                              <a:s>period</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantPeriod: </a:s>
                           <a:s r="127">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantDays: </a:s>
                           <a:s r="183">
                              <a:s>&quot;Days In Period&quot;(</a:s>
                              <a:s r="128">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="186" locator="21:3-29:5" xsi:type="Query">
            <source localId="103" locator="21:3-21:55" alias="EligibleInpatientHospitalization">
               <expression localId="102" locator="21:3-21:22" name="Initial Population" xsi:type="ExpressionRef"/>
            </source>
            <let localId="107" locator="22:9-22:92" identifier="period">
               <expression localId="106" locator="22:17-22:92" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                  <operand localId="105" locator="22:59-22:90" name="EligibleInpatientHospitalization" xsi:type="AliasRef"/>
               </expression>
            </let>
            <let localId="124" locator="23:5-23:50" identifier="relevantPeriod">
               <expression localId="123" locator="23:21-23:50" name="Hospital Days Max 10" xsi:type="FunctionRef">
                  <operand localId="108" locator="23:44-23:49" name="period" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <return localId="185" locator="24:5-29:5">
               <expression localId="184" locator="24:12-29:5" xsi:type="Tuple">
                  <element name="encounter">
                     <value localId="125" locator="25:18-25:49" name="EligibleInpatientHospitalization" xsi:type="AliasRef"/>
                  </element>
                  <element name="hospitalizationPeriod">
                     <value localId="126" locator="26:30-26:35" name="period" xsi:type="QueryLetRef"/>
                  </element>
                  <element name="relevantPeriod">
                     <value localId="127" locator="27:23-27:36" name="relevantPeriod" xsi:type="QueryLetRef"/>
                  </element>
                  <element name="relevantDays">
                     <value localId="183" locator="28:21-28:52" name="Days In Period" xsi:type="FunctionRef">
                        <operand localId="128" locator="28:38-28:51" name="relevantPeriod" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="244" locator="31:1-53:5" name="Days With Glucose Results" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="244">
               <a:s>define &quot;Days With Glucose Results&quot;:
  </a:s>
               <a:s r="243">
                  <a:s>
                     <a:s r="189">
                        <a:s r="188">
                           <a:s>
                              <a:s>&quot;Days in Hospitalization&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> InpatientHospitalDays</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="242">
                     <a:s>return </a:s>
                     <a:s r="241">
                        <a:s>Tuple {
      </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="191">
                              <a:s r="190">
                                 <a:s>InpatientHospitalDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="191">
                                 <a:s>encounter</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantPeriod: </a:s>
                           <a:s r="193">
                              <a:s r="192">
                                 <a:s>InpatientHospitalDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="193">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantDays: </a:s>
                           <a:s r="240">
                              <a:s>( </a:s>
                              <a:s r="240">
                                 <a:s>
                                    <a:s r="195">
                                       <a:s r="194">
                                          <a:s>
                                             <a:s>InpatientHospitalDays.relevantDays</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> EncounterDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
          </a:s>
                                 <a:s r="239">
                                    <a:s>return </a:s>
                                    <a:s r="238">
                                       <a:s>Tuple {
            </a:s>
                                       <a:s>
                                          <a:s>dayIndex: </a:s>
                                          <a:s r="197">
                                             <a:s r="196">
                                                <a:s>EncounterDay</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="197">
                                                <a:s>dayIndex</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>dayPeriod: </a:s>
                                          <a:s r="199">
                                             <a:s r="198">
                                                <a:s>EncounterDay</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="199">
                                                <a:s>dayPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>hasSevereResult: </a:s>
                                          <a:s r="213">
                                             <a:s>exists </a:s>
                                             <a:s r="212">
                                                <a:s>( </a:s>
                                                <a:s r="212">
                                                   <a:s>
                                                      <a:s r="201">
                                                         <a:s r="200">
                                                            <a:s r="200">
                                                               <a:s>[&quot;Laboratory Test, Performed&quot;: </a:s>
                                                               <a:s>
                                                                  <a:s>&quot;Glucose Lab Test Mass Per Volume&quot;</a:s>
                                                               </a:s>
                                                               <a:s>]</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> BloodGlucoseLab1</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
                </a:s>
                                                   <a:s r="211">
                                                      <a:s>where </a:s>
                                                      <a:s r="211">
                                                         <a:s r="205">
                                                            <a:s r="203">
                                                               <a:s r="202">
                                                                  <a:s>BloodGlucoseLab1</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="203">
                                                                  <a:s>result</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> > </a:s>
                                                            <a:s r="204">
                                                               <a:s>300 'mg/dL'</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>
                  and </a:s>
                                                         <a:s r="210">
                                                            <a:s r="207">
                                                               <a:s r="206">
                                                                  <a:s>BloodGlucoseLab1</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="207">
                                                                  <a:s>relevantDatetime</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="210"> during </a:s>
                                                            <a:s r="209">
                                                               <a:s r="208">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="209">
                                                                  <a:s>dayPeriod</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
            )</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>hasElevatedResult: </a:s>
                                          <a:s r="227">
                                             <a:s>exists </a:s>
                                             <a:s r="226">
                                                <a:s>( </a:s>
                                                <a:s r="226">
                                                   <a:s>
                                                      <a:s r="215">
                                                         <a:s r="214">
                                                            <a:s r="214">
                                                               <a:s>[&quot;Laboratory Test, Performed&quot;: </a:s>
                                                               <a:s>
                                                                  <a:s>&quot;Glucose Lab Test Mass Per Volume&quot;</a:s>
                                                               </a:s>
                                                               <a:s>]</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> BloodGlucoseLab2</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
                </a:s>
                                                   <a:s r="225">
                                                      <a:s>where </a:s>
                                                      <a:s r="225">
                                                         <a:s r="219">
                                                            <a:s r="217">
                                                               <a:s r="216">
                                                                  <a:s>BloodGlucoseLab2</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="217">
                                                                  <a:s>result</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> >= </a:s>
                                                            <a:s r="218">
                                                               <a:s>200 'mg/dL'</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>
                  and </a:s>
                                                         <a:s r="224">
                                                            <a:s r="221">
                                                               <a:s r="220">
                                                                  <a:s>BloodGlucoseLab2</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="221">
                                                                  <a:s>relevantDatetime</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="224"> during </a:s>
                                                            <a:s r="223">
                                                               <a:s r="222">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="223">
                                                                  <a:s>dayPeriod</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
            )</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>hasNoGlucoseTest: </a:s>
                                          <a:s r="237">
                                             <a:s>not </a:s>
                                             <a:s r="236">
                                                <a:s>exists </a:s>
                                                <a:s r="235">
                                                   <a:s>( </a:s>
                                                   <a:s r="235">
                                                      <a:s>
                                                         <a:s r="229">
                                                            <a:s r="228">
                                                               <a:s r="228">
                                                                  <a:s>[&quot;Laboratory Test, Performed&quot;: </a:s>
                                                                  <a:s>
                                                                     <a:s>&quot;Glucose Lab Test Mass Per Volume&quot;</a:s>
                                                                  </a:s>
                                                                  <a:s>]</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> BloodGlucoseLab3</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>
                </a:s>
                                                      <a:s r="234">
                                                         <a:s>where </a:s>
                                                         <a:s r="234">
                                                            <a:s r="231">
                                                               <a:s r="230">
                                                                  <a:s>BloodGlucoseLab3</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="231">
                                                                  <a:s>relevantDatetime</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="234"> during </a:s>
                                                            <a:s r="233">
                                                               <a:s r="232">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="233">
                                                                  <a:s>dayPeriod</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
            )</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
          }</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      )</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="243" locator="32:3-53:5" xsi:type="Query">
            <source localId="189" locator="32:3-32:49" alias="InpatientHospitalDays">
               <expression localId="188" locator="32:3-32:27" name="Days in Hospitalization" xsi:type="ExpressionRef"/>
            </source>
            <return localId="242" locator="33:5-53:5">
               <expression localId="241" locator="33:12-53:5" xsi:type="Tuple">
                  <element name="encounter">
                     <value localId="191" locator="34:18-34:48" path="encounter" scope="InpatientHospitalDays" xsi:type="Property"/>
                  </element>
                  <element name="relevantPeriod">
                     <value localId="193" locator="35:23-35:58" path="relevantPeriod" scope="InpatientHospitalDays" xsi:type="Property"/>
                  </element>
                  <element name="relevantDays">
                     <value localId="240" locator="36:21-52:7" xsi:type="Query">
                        <source localId="195" locator="36:23-36:69" alias="EncounterDay">
                           <expression localId="194" locator="36:23-36:56" path="relevantDays" scope="InpatientHospitalDays" xsi:type="Property"/>
                        </source>
                        <return localId="239" locator="37:11-51:11">
                           <expression localId="238" locator="37:18-51:11" xsi:type="Tuple">
                              <element name="dayIndex">
                                 <value localId="197" locator="38:23-38:43" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                              </element>
                              <element name="dayPeriod">
                                 <value localId="199" locator="39:24-39:45" path="dayPeriod" scope="EncounterDay" xsi:type="Property"/>
                              </element>
                              <element name="hasSevereResult">
                                 <value localId="213" locator="40:30-43:13" xsi:type="Exists">
                                    <operand localId="212" locator="40:37-43:13" xsi:type="Query">
                                       <source localId="201" locator="40:39-40:121" alias="BloodGlucoseLab1">
                                          <expression localId="200" locator="40:39-40:104" xmlns:ns5="urn:healthit-gov:qdm:v5_6" dataType="ns5:PositiveLaboratoryTestPerformed" templateId="PositiveLaboratoryTestPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                             <codes locator="40:70-40:103" name="Glucose Lab Test Mass Per Volume" xsi:type="ValueSetRef"/>
                                          </expression>
                                       </source>
                                       <where localId="211" locator="41:17-42:85" xsi:type="And">
                                          <operand localId="205" locator="41:23-41:59" xsi:type="Greater">
                                             <operand asType="t:Quantity" xsi:type="As">
                                                <operand localId="203" locator="41:23-41:45" path="result" scope="BloodGlucoseLab1" xsi:type="Property"/>
                                             </operand>
                                             <operand localId="204" locator="41:49-41:59" value="300" unit="mg/dL" xsi:type="Quantity"/>
                                          </operand>
                                          <operand localId="210" locator="42:23-42:85" xsi:type="In">
                                             <operand localId="207" locator="42:23-42:55" path="relevantDatetime" scope="BloodGlucoseLab1" xsi:type="Property"/>
                                             <operand localId="209" locator="42:64-42:85" path="dayPeriod" scope="EncounterDay" xsi:type="Property"/>
                                          </operand>
                                       </where>
                                    </operand>
                                 </value>
                              </element>
                              <element name="hasElevatedResult">
                                 <value localId="227" locator="44:32-47:13" xsi:type="Exists">
                                    <operand localId="226" locator="44:39-47:13" xsi:type="Query">
                                       <source localId="215" locator="44:41-44:123" alias="BloodGlucoseLab2">
                                          <expression localId="214" locator="44:41-44:106" xmlns:ns6="urn:healthit-gov:qdm:v5_6" dataType="ns6:PositiveLaboratoryTestPerformed" templateId="PositiveLaboratoryTestPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                             <codes locator="44:72-44:105" name="Glucose Lab Test Mass Per Volume" xsi:type="ValueSetRef"/>
                                          </expression>
                                       </source>
                                       <where localId="225" locator="45:17-46:85" xsi:type="And">
                                          <operand localId="219" locator="45:23-45:60" xsi:type="GreaterOrEqual">
                                             <operand asType="t:Quantity" xsi:type="As">
                                                <operand localId="217" locator="45:23-45:45" path="result" scope="BloodGlucoseLab2" xsi:type="Property"/>
                                             </operand>
                                             <operand localId="218" locator="45:50-45:60" value="200" unit="mg/dL" xsi:type="Quantity"/>
                                          </operand>
                                          <operand localId="224" locator="46:23-46:85" xsi:type="In">
                                             <operand localId="221" locator="46:23-46:55" path="relevantDatetime" scope="BloodGlucoseLab2" xsi:type="Property"/>
                                             <operand localId="223" locator="46:64-46:85" path="dayPeriod" scope="EncounterDay" xsi:type="Property"/>
                                          </operand>
                                       </where>
                                    </operand>
                                 </value>
                              </element>
                              <element name="hasNoGlucoseTest">
                                 <value localId="237" locator="48:31-50:13" xsi:type="Not">
                                    <operand localId="236" locator="48:35-50:13" xsi:type="Exists">
                                       <operand localId="235" locator="48:42-50:13" xsi:type="Query">
                                          <source localId="229" locator="48:44-48:126" alias="BloodGlucoseLab3">
                                             <expression localId="228" locator="48:44-48:109" xmlns:ns7="urn:healthit-gov:qdm:v5_6" dataType="ns7:PositiveLaboratoryTestPerformed" templateId="PositiveLaboratoryTestPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                                <codes locator="48:75-48:108" name="Glucose Lab Test Mass Per Volume" xsi:type="ValueSetRef"/>
                                             </expression>
                                          </source>
                                          <where localId="234" locator="49:17-49:85" xsi:type="In">
                                             <operand localId="231" locator="49:23-49:55" path="relevantDatetime" scope="BloodGlucoseLab3" xsi:type="Property"/>
                                             <operand localId="233" locator="49:64-49:85" path="dayPeriod" scope="EncounterDay" xsi:type="Property"/>
                                          </where>
                                       </operand>
                                    </operand>
                                 </value>
                              </element>
                           </expression>
                        </return>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="292" locator="56:1-74:5" name="Days With Hyperglycemic Events" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="292">
               <a:s>/*# days with hyper events uses &quot;Days With Glucose Results&quot; to find if hyper event on each day. Skips 1st day in 'RelevantDays`. Returns boolean based on: Today high result OR Today no result AND Yesterday high result AND 2 days ago high result*/define &quot;Days With Hyperglycemic Events&quot;:
  </a:s>
               <a:s r="291">
                  <a:s>
                     <a:s r="246">
                        <a:s r="245">
                           <a:s>
                              <a:s>&quot;Days With Glucose Results&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterWithResultDays</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="283">
                        <a:s>eligibleEventDays: </a:s>
                        <a:s r="282">
                           <a:s>
                              <a:s r="248">
                                 <a:s r="247">
                                    <a:s>
                                       <a:s>EncounterWithResultDays.relevantDays</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EncounterDay</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="252">
                              <a:s>where </a:s>
                              <a:s r="252">
                                 <a:s r="250">
                                    <a:s r="249">
                                       <a:s>EncounterDay</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="250">
                                       <a:s>dayIndex</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="251"> > 1</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="281">
                              <a:s>return </a:s>
                              <a:s r="280">
                                 <a:s>Tuple {
        </a:s>
                                 <a:s>
                                    <a:s>dayIndex: </a:s>
                                    <a:s r="254">
                                       <a:s r="253">
                                          <a:s>EncounterDay</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="254">
                                          <a:s>dayIndex</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s>
                                    <a:s>dayPeriod: </a:s>
                                    <a:s r="256">
                                       <a:s r="255">
                                          <a:s>EncounterDay</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="256">
                                          <a:s>dayPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s>
                                    <a:s>hasHyperglycemicEvent: </a:s>
                                    <a:s r="279">
                                       <a:s>( </a:s>
                                       <a:s r="279">
                                          <a:s r="258">
                                             <a:s r="257">
                                                <a:s>EncounterDay</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="258">
                                                <a:s>hasSevereResult</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
            or </a:s>
                                          <a:s r="278">
                                             <a:s>( </a:s>
                                             <a:s r="278">
                                                <a:s r="269">
                                                   <a:s r="260">
                                                      <a:s r="259">
                                                         <a:s>EncounterDay</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="260">
                                                         <a:s>hasNoGlucoseTest</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
                and </a:s>
                                                   <a:s r="268">
                                                      <a:s r="267">
                                                         <a:s r="262">
                                                            <a:s r="261">
                                                               <a:s>EncounterWithResultDays</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="262">
                                                               <a:s>relevantDays</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>[</a:s>
                                                         <a:s r="266">
                                                            <a:s r="264">
                                                               <a:s r="263">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="264">
                                                                  <a:s>dayIndex</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="265"> - 2</a:s>
                                                         </a:s>
                                                         <a:s>]</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="268">
                                                         <a:s>hasElevatedResult</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
                and </a:s>
                                                <a:s r="277">
                                                   <a:s r="276">
                                                      <a:s r="271">
                                                         <a:s r="270">
                                                            <a:s>EncounterWithResultDays</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="271">
                                                            <a:s>relevantDays</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>[</a:s>
                                                      <a:s r="275">
                                                         <a:s r="273">
                                                            <a:s r="272">
                                                               <a:s>EncounterDay</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="273">
                                                               <a:s>dayIndex</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="274"> - 3</a:s>
                                                      </a:s>
                                                      <a:s>]</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="277">
                                                      <a:s>hasElevatedResult</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
            )</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      }</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="290">
                     <a:s>return </a:s>
                     <a:s r="289">
                        <a:s>Tuple {
      </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="285">
                              <a:s r="284">
                                 <a:s>EncounterWithResultDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="285">
                                 <a:s>encounter</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantPeriod: </a:s>
                           <a:s r="287">
                              <a:s r="286">
                                 <a:s>EncounterWithResultDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="287">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>eligibleEventDays: </a:s>
                           <a:s r="288">
                              <a:s>eligibleEventDays</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="291" locator="57:3-74:5" xsi:type="Query">
            <source localId="246" locator="57:3-57:53" alias="EncounterWithResultDays">
               <expression localId="245" locator="57:3-57:29" name="Days With Glucose Results" xsi:type="ExpressionRef"/>
            </source>
            <let localId="283" locator="58:9-69:7" identifier="eligibleEventDays">
               <expression localId="282" locator="58:28-69:7" xsi:type="Query">
                  <source localId="248" locator="58:28-58:76" alias="EncounterDay">
                     <expression localId="247" locator="58:28-58:63" path="relevantDays" scope="EncounterWithResultDays" xsi:type="Property"/>
                  </source>
                  <where localId="252" locator="59:7-59:37" xsi:type="Greater">
                     <operand localId="250" locator="59:13-59:33" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                     <operand localId="251" locator="59:37" valueType="t:Integer" value="1" xsi:type="Literal"/>
                  </where>
                  <return localId="281" locator="60:7-69:7">
                     <expression localId="280" locator="60:14-69:7" xsi:type="Tuple">
                        <element name="dayIndex">
                           <value localId="254" locator="61:19-61:39" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                        </element>
                        <element name="dayPeriod">
                           <value localId="256" locator="62:20-62:41" path="dayPeriod" scope="EncounterDay" xsi:type="Property"/>
                        </element>
                        <element name="hasHyperglycemicEvent">
                           <value localId="279" locator="63:32-68:9" xsi:type="Or">
                              <operand localId="258" locator="63:34-63:61" path="hasSevereResult" scope="EncounterDay" xsi:type="Property"/>
                              <operand localId="278" locator="64:16-67:13" xsi:type="And">
                                 <operand localId="269" locator="64:18-65:101" xsi:type="And">
                                    <operand localId="260" locator="64:18-64:46" path="hasNoGlucoseTest" scope="EncounterDay" xsi:type="Property"/>
                                    <operand localId="268" locator="65:21-65:101" path="hasElevatedResult" xsi:type="Property">
                                       <source localId="267" locator="65:21-65:83" xsi:type="Indexer">
                                          <operand localId="262" locator="65:21-65:56" path="relevantDays" scope="EncounterWithResultDays" xsi:type="Property"/>
                                          <operand localId="266" locator="65:58-65:82" xsi:type="Subtract">
                                             <operand localId="264" locator="65:58-65:78" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                                             <operand localId="265" locator="65:82" valueType="t:Integer" value="2" xsi:type="Literal"/>
                                          </operand>
                                       </source>
                                    </operand>
                                 </operand>
                                 <operand localId="277" locator="66:21-66:101" path="hasElevatedResult" xsi:type="Property">
                                    <source localId="276" locator="66:21-66:83" xsi:type="Indexer">
                                       <operand localId="271" locator="66:21-66:56" path="relevantDays" scope="EncounterWithResultDays" xsi:type="Property"/>
                                       <operand localId="275" locator="66:58-66:82" xsi:type="Subtract">
                                          <operand localId="273" locator="66:58-66:78" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                                          <operand localId="274" locator="66:82" valueType="t:Integer" value="3" xsi:type="Literal"/>
                                       </operand>
                                    </source>
                                 </operand>
                              </operand>
                           </value>
                        </element>
                     </expression>
                  </return>
               </expression>
            </let>
            <return localId="290" locator="70:5-74:5">
               <expression localId="289" locator="70:12-74:5" xsi:type="Tuple">
                  <element name="encounter">
                     <value localId="285" locator="71:18-71:50" path="encounter" scope="EncounterWithResultDays" xsi:type="Property"/>
                  </element>
                  <element name="relevantPeriod">
                     <value localId="287" locator="72:23-72:60" path="relevantPeriod" scope="EncounterWithResultDays" xsi:type="Property"/>
                  </element>
                  <element name="eligibleEventDays">
                     <value localId="288" locator="73:26-73:42" name="eligibleEventDays" xsi:type="QueryLetRef"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="294" locator="76:1-77:22" name="Denominator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="294">
               <a:s>define &quot;Denominator&quot;:
  </a:s>
               <a:s r="293">
                  <a:s>&quot;Initial Population&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="293" locator="77:3-77:22" name="Initial Population" xsi:type="ExpressionRef"/>
      </def>
      <def localId="323" locator="127:1-132:3" name="First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="323">
               <a:s>define &quot;First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start&quot;:
  </a:s>
               <a:s r="322">
                  <a:s>First(</a:s>
                  <a:s r="321">
                     <a:s>
                        <a:s r="298">
                           <a:s r="297">
                              <a:s r="297">
                                 <a:s>[&quot;Laboratory Test, Performed&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Glucose Lab Test Mass Per Volume&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> FirstBloodGlucose</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="317">
                        <a:s>with</a:s>
                        <a:s r="300">
                           <a:s r="299">
                              <a:s>(</a:s>
                              <a:s r="299">
                                 <a:s>&quot;Qualifying Encounter&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>InpatientEncounter</a:s>
                        </a:s>
                        <a:s>
        such that </a:s>
                        <a:s r="316">
                           <a:s r="302">
                              <a:s r="301">
                                 <a:s>FirstBloodGlucose</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="302">
                                 <a:s>relevantDatetime</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="316"> during </a:s>
                           <a:s r="315">
                              <a:s>Interval[</a:s>
                              <a:s r="308">
                                 <a:s>(</a:s>
                                 <a:s r="308">
                                    <a:s r="306">
                                       <a:s>start of </a:s>
                                       <a:s r="305">
                                          <a:s r="303">
                                             <a:s>Global</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="305">
                                             <a:s>&quot;HospitalizationWithObservation&quot;(</a:s>
                                             <a:s r="304">
                                                <a:s>InpatientEncounter</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>- </a:s>
                                    <a:s r="307">
                                       <a:s>1 hour</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>,</a:s>
                              <a:s r="314">
                                 <a:s>(</a:s>
                                 <a:s r="314">
                                    <a:s r="312">
                                       <a:s>start of </a:s>
                                       <a:s r="311">
                                          <a:s r="309">
                                             <a:s>Global</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="311">
                                             <a:s>&quot;HospitalizationWithObservation&quot;(</a:s>
                                             <a:s r="310">
                                                <a:s>InpatientEncounter</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>+ </a:s>
                                    <a:s r="313">
                                       <a:s>6 hours</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="320">
                        <a:s>sort by </a:s>
                        <a:s r="319">
                           <a:s r="318">
                              <a:s>relevantDatetime</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  )</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="322" locator="128:3-132:3" xsi:type="First">
            <source localId="321" locator="128:9-131:30" xsi:type="Query">
               <source localId="298" locator="128:9-128:92" alias="FirstBloodGlucose">
                  <expression localId="297" locator="128:9-128:74" xmlns:ns8="urn:healthit-gov:qdm:v5_6" dataType="ns8:PositiveLaboratoryTestPerformed" templateId="PositiveLaboratoryTestPerformed" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="128:40-128:73" name="Glucose Lab Test Mass Per Volume" xsi:type="ValueSetRef"/>
                  </expression>
               </source>
               <relationship localId="317" locator="129:7-130:228" alias="InpatientEncounter" xsi:type="With">
                  <expression localId="299" locator="129:11-129:34" name="Qualifying Encounter" xsi:type="ExpressionRef"/>
                  <suchThat localId="316" locator="130:19-130:228" xsi:type="In">
                     <operand localId="302" locator="130:19-130:52" path="relevantDatetime" scope="FirstBloodGlucose" xsi:type="Property"/>
                     <operand localId="315" locator="130:61-130:228" lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low localId="308" locator="130:70-130:147" xsi:type="Subtract">
                           <operand localId="306" locator="130:71-130:138" xsi:type="Start">
                              <operand localId="305" locator="130:80-130:138" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                                 <operand localId="304" locator="130:120-130:137" name="InpatientEncounter" xsi:type="AliasRef"/>
                              </operand>
                           </operand>
                           <operand localId="307" locator="130:141-130:146" value="1" unit="hour" xsi:type="Quantity"/>
                        </low>
                        <high localId="314" locator="130:149-130:227" xsi:type="Add">
                           <operand localId="312" locator="130:150-130:217" xsi:type="Start">
                              <operand localId="311" locator="130:159-130:217" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                                 <operand localId="310" locator="130:199-130:216" name="InpatientEncounter" xsi:type="AliasRef"/>
                              </operand>
                           </operand>
                           <operand localId="313" locator="130:220-130:226" value="6" unit="hours" xsi:type="Quantity"/>
                        </high>
                     </operand>
                  </suchThat>
               </relationship>
               <sort localId="320" locator="131:7-131:30">
                  <by localId="319" locator="131:15-131:30" direction="asc" path="relevantDatetime" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
      </def>
      <def localId="332" locator="100:1-103:57" name="Encounter With First Blood Glucose Greater Than or Equal to 1000" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="332">
               <a:s>define &quot;Encounter With First Blood Glucose Greater Than or Equal to 1000&quot;:
  </a:s>
               <a:s r="331">
                  <a:s>
                     <a:s r="296">
                        <a:s r="295">
                           <a:s>
                              <a:s>&quot;Qualifying Encounter&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> InpatientHospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="330">
                     <a:s>with </a:s>
                     <a:s r="325">
                        <a:s r="324">
                           <a:s>
                              <a:s>&quot;First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> FirstGlucoseResult</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="329">
                        <a:s r="327">
                           <a:s r="326">
                              <a:s>FirstGlucoseResult</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="327">
                              <a:s>result</a:s>
                           </a:s>
                        </a:s>
                        <a:s> >= </a:s>
                        <a:s r="328">
                           <a:s>1000 'mg/dL'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="331" locator="101:3-103:57" xsi:type="Query">
            <source localId="296" locator="101:3-101:49" alias="InpatientHospitalization">
               <expression localId="295" locator="101:3-101:24" name="Qualifying Encounter" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="330" locator="102:5-103:57" alias="FirstGlucoseResult" xsi:type="With">
               <expression localId="324" locator="102:10-102:87" name="First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start" xsi:type="ExpressionRef"/>
               <suchThat localId="329" locator="103:17-103:57" xsi:type="GreaterOrEqual">
                  <operand asType="t:Quantity" xsi:type="As">
                     <operand localId="327" locator="103:17-103:41" path="result" scope="FirstGlucoseResult" xsi:type="Property"/>
                  </operand>
                  <operand localId="328" locator="103:46-103:57" value="1000" unit="mg/dL" xsi:type="Quantity"/>
               </suchThat>
            </relationship>
         </expression>
      </def>
      <def localId="334" locator="79:1-80:68" name="Denominator Exclusions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="334">
               <a:s>define &quot;Denominator Exclusions&quot;:
  </a:s>
               <a:s r="333">
                  <a:s>&quot;Encounter With First Blood Glucose Greater Than or Equal to 1000&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="333" locator="80:3-80:68" name="Encounter With First Blood Glucose Greater Than or Equal to 1000" xsi:type="ExpressionRef"/>
      </def>
      <def localId="347" locator="114:1-119:43" name="Encounter With Hyperglycemic Events" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="347">
               <a:s>define &quot;Encounter With Hyperglycemic Events&quot;:
  </a:s>
               <a:s r="346">
                  <a:s>
                     <a:s r="336">
                        <a:s r="335">
                           <a:s>
                              <a:s>&quot;Days With Hyperglycemic Events&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HyperglycemicEventDays</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="342">
                     <a:s>where </a:s>
                     <a:s r="342">
                        <a:s>exists </a:s>
                        <a:s r="341">
                           <a:s>( </a:s>
                           <a:s r="341">
                              <a:s>
                                 <a:s r="338">
                                    <a:s r="337">
                                       <a:s>
                                          <a:s>HyperglycemicEventDays.eligibleEventDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> EligibleEventDay</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        </a:s>
                              <a:s r="340">
                                 <a:s>where </a:s>
                                 <a:s r="340">
                                    <a:s r="339">
                                       <a:s>EligibleEventDay</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="340">
                                       <a:s>hasHyperglycemicEvent</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    )</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="345">
                     <a:s>return </a:s>
                     <a:s r="344">
                        <a:s r="343">
                           <a:s>HyperglycemicEventDays</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="344">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="346" locator="115:3-119:43" xsi:type="Query">
            <source localId="336" locator="115:3-115:57" alias="HyperglycemicEventDays">
               <expression localId="335" locator="115:3-115:34" name="Days With Hyperglycemic Events" xsi:type="ExpressionRef"/>
            </source>
            <where localId="342" locator="116:5-118:5" xsi:type="Exists">
               <operand localId="341" locator="116:18-118:5" xsi:type="Query">
                  <source localId="338" locator="116:20-116:76" alias="EligibleEventDay">
                     <expression localId="337" locator="116:20-116:59" path="eligibleEventDays" scope="HyperglycemicEventDays" xsi:type="Property"/>
                  </source>
                  <where localId="340" locator="117:9-117:52" path="hasHyperglycemicEvent" scope="EligibleEventDay" xsi:type="Property"/>
               </operand>
            </where>
            <return localId="345" locator="119:5-119:43">
               <expression localId="344" locator="119:12-119:43" path="encounter" scope="HyperglycemicEventDays" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="349" locator="139:1-140:39" name="Numerator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="349">
               <a:s>define &quot;Numerator&quot;:
  </a:s>
               <a:s r="348">
                  <a:s>&quot;Encounter With Hyperglycemic Events&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="348" locator="140:3-140:39" name="Encounter With Hyperglycemic Events" xsi:type="ExpressionRef"/>
      </def>
      <def localId="351" locator="147:1-148:51" name="SDE Ethnicity" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="351">
               <a:s>define &quot;SDE Ethnicity&quot;:
  </a:s>
               <a:s r="350">
                  <a:s>[&quot;Patient Characteristic Ethnicity&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;Ethnicity&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="350" locator="148:3-148:51" xmlns:ns9="urn:healthit-gov:qdm:v5_6" dataType="ns9:PatientCharacteristicEthnicity" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
            <codes locator="148:40-148:50" name="Ethnicity" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="353" locator="150:1-151:43" name="SDE Payer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="353">
               <a:s>define &quot;SDE Payer&quot;:
  </a:s>
               <a:s r="352">
                  <a:s>[&quot;Patient Characteristic Payer&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;Payer&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="352" locator="151:3-151:43" xmlns:ns10="urn:healthit-gov:qdm:v5_6" dataType="ns10:PatientCharacteristicPayer" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
            <codes locator="151:36-151:42" name="Payer" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="355" locator="153:1-154:41" name="SDE Race" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="355">
               <a:s>define &quot;SDE Race&quot;:
  </a:s>
               <a:s r="354">
                  <a:s>[&quot;Patient Characteristic Race&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;Race&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="354" locator="154:3-154:41" xmlns:ns11="urn:healthit-gov:qdm:v5_6" dataType="ns11:PatientCharacteristicRace" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
            <codes locator="154:35-154:40" name="Race" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="357" locator="156:1-157:58" name="SDE Sex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="357">
               <a:s>define &quot;SDE Sex&quot;:
  </a:s>
               <a:s r="356">
                  <a:s>[&quot;Patient Characteristic Sex&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;ONC Administrative Sex&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="356" locator="157:3-157:58" xmlns:ns12="urn:healthit-gov:qdm:v5_6" dataType="ns12:PatientCharacteristicSex" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
            <codes locator="157:34-157:57" name="ONC Administrative Sex" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="380" locator="183:1-189:3" name="Numerator Observations" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="380">
               <a:s>/**
 * Counts the number of eligible days with a hyperglycemic event in an encounter. This simply filters and counts the data built in
 * &quot;Days With Hyperglycemic Events&quot;.*/define function &quot;Numerator Observations&quot;(QualifyingEncounter </a:s>
               <a:s r="364">
                  <a:s>&quot;Encounter, Performed&quot;</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="379">
                  <a:s r="379">
                     <a:s>singleton from </a:s>
                     <a:s r="378">
                        <a:s>( </a:s>
                        <a:s r="378">
                           <a:s>
                              <a:s r="366">
                                 <a:s r="365">
                                    <a:s>
                                       <a:s>&quot;Days With Hyperglycemic Events&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EncounterWithEventDays</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="370">
                              <a:s>where </a:s>
                              <a:s r="370">
                                 <a:s r="368">
                                    <a:s r="367">
                                       <a:s>EncounterWithEventDays</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="368">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="369">
                                    <a:s>QualifyingEncounter</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="377">
                              <a:s>return </a:s>
                              <a:s r="376">
                                 <a:s>Count(</a:s>
                                 <a:s r="375">
                                    <a:s>
                                       <a:s r="372">
                                          <a:s r="371">
                                             <a:s>
                                                <a:s>EncounterWithEventDays.eligibleEventDays</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> EligibleEventDay</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="374">
                                       <a:s>where </a:s>
                                       <a:s r="374">
                                          <a:s r="373">
                                             <a:s>EligibleEventDay</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="374">
                                             <a:s>hasHyperglycemicEvent</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="379" locator="184:3-189:3" xsi:type="SingletonFrom">
            <operand localId="378" locator="184:18-189:3" xsi:type="Query">
               <source localId="366" locator="184:20-184:74" alias="EncounterWithEventDays">
                  <expression localId="365" locator="184:20-184:51" name="Days With Hyperglycemic Events" xsi:type="ExpressionRef"/>
               </source>
               <where localId="370" locator="185:7-185:66" xsi:type="Equal">
                  <operand localId="368" locator="185:13-185:44" path="encounter" scope="EncounterWithEventDays" xsi:type="Property"/>
                  <operand localId="369" locator="185:48-185:66" name="QualifyingEncounter" xsi:type="OperandRef"/>
               </where>
               <return localId="377" locator="186:7-188:7">
                  <expression localId="376" locator="186:14-188:7" xsi:type="Count">
                     <source localId="375" locator="186:20-187:54" xsi:type="Query">
                        <source localId="372" locator="186:20-186:76" alias="EligibleEventDay">
                           <expression localId="371" locator="186:20-186:59" path="eligibleEventDays" scope="EncounterWithEventDays" xsi:type="Property"/>
                        </source>
                        <where localId="374" locator="187:11-187:54" path="hasHyperglycemicEvent" scope="EligibleEventDay" xsi:type="Property"/>
                     </source>
                  </expression>
               </return>
            </operand>
         </expression>
         <operand name="QualifyingEncounter">
            <operandTypeSpecifier localId="364" locator="183:62-183:83" xmlns:ns13="urn:healthit-gov:qdm:v5_6" name="ns13:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="397" locator="202:1-206:3" name="Denominator Observations" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="397">
               <a:s>/**
 * Counts the number of eligible days in an encounter. This simply filters and counts the data built in
 * &quot;Days With Glucose Results&quot;.*/define function &quot;Denominator Observations&quot;(QualifyingEncounter </a:s>
               <a:s r="384">
                  <a:s>&quot;Encounter, Performed&quot;</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="396">
                  <a:s r="396">
                     <a:s>singleton from </a:s>
                     <a:s r="395">
                        <a:s>( </a:s>
                        <a:s r="395">
                           <a:s>
                              <a:s r="386">
                                 <a:s r="385">
                                    <a:s>
                                       <a:s>&quot;Days With Hyperglycemic Events&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EncounterWithEventDays</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="390">
                              <a:s>where </a:s>
                              <a:s r="390">
                                 <a:s r="388">
                                    <a:s r="387">
                                       <a:s>EncounterWithEventDays</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="388">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="389">
                                    <a:s>QualifyingEncounter</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="394">
                              <a:s>return </a:s>
                              <a:s r="393">
                                 <a:s>Count(</a:s>
                                 <a:s r="392">
                                    <a:s r="391">
                                       <a:s>EncounterWithEventDays</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="392">
                                       <a:s>eligibleEventDays</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="396" locator="203:3-206:3" xsi:type="SingletonFrom">
            <operand localId="395" locator="203:18-206:3" xsi:type="Query">
               <source localId="386" locator="203:20-203:74" alias="EncounterWithEventDays">
                  <expression localId="385" locator="203:20-203:51" name="Days With Hyperglycemic Events" xsi:type="ExpressionRef"/>
               </source>
               <where localId="390" locator="204:7-204:66" xsi:type="Equal">
                  <operand localId="388" locator="204:13-204:44" path="encounter" scope="EncounterWithEventDays" xsi:type="Property"/>
                  <operand localId="389" locator="204:48-204:66" name="QualifyingEncounter" xsi:type="OperandRef"/>
               </where>
               <return localId="394" locator="205:7-205:60">
                  <expression localId="393" locator="205:14-205:60" xsi:type="Count">
                     <source localId="392" locator="205:20-205:59" path="eligibleEventDays" scope="EncounterWithEventDays" xsi:type="Property"/>
                  </expression>
               </return>
            </operand>
         </expression>
         <operand name="QualifyingEncounter">
            <operandTypeSpecifier localId="384" locator="202:64-202:85" xmlns:ns14="urn:healthit-gov:qdm:v5_6" name="ns14:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
   </statements>
</library>
