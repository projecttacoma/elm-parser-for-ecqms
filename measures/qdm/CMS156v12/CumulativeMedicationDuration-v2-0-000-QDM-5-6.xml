<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="683">
         <a:s>library CumulativeMedicationDuration version '2.0.000'</a:s>
      </a:s>
   </annotation>
   <identifier id="CumulativeMedicationDuration" version="2.0.000"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="7:1-7:23" localIdentifier="QDM" uri="urn:healthit-gov:qdm:v5_6" version="5.6">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events."/>
            <a:t name="description" value="This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events. &#xa;The logic here follows the guidance provided as part of the 5.6 version of Quality Data Model."/>
            <a:t name="comment" value="Note that the logic here assumes single-instruction dosing information. Split-dosing, tapering, and other more complex dosing instructions are not handled."/>
            <a:s r="1">
               <a:s>/*@description: This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events. 
The logic here follows the guidance provided as part of the 5.6 version of Quality Data Model.
@comment: Note that the logic here assumes single-instruction dosing information. Split-dosing, tapering, and other more complex dosing instructions are not handled.*/using </a:s>
               <a:s>
                  <a:s>QDM</a:s>
               </a:s>
               <a:s> version '5.6'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="9:1-9:64" localIdentifier="Global" path="MATGlobalCommonFunctions" version="7.0.000">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>MATGlobalCommonFunctions</a:s>
               </a:s>
               <a:s> version '7.0.000' called Global</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <codeSystems>
      <def localId="3" locator="11:1-11:55" name="SNOMEDCT" id="urn:oid:2.16.840.1.113883.6.96" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>codesystem &quot;SNOMEDCT&quot;: 'urn:oid:2.16.840.1.113883.6.96'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <codes>
      <def localId="5" locator="13:1-13:117" name="Every eight hours (qualifier value)" id="307469008" display="Every eight hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>code &quot;Every eight hours (qualifier value)&quot;: '307469008' from </a:s>
               <a:s r="4">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every eight hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="4" locator="13:62-13:71" name="SNOMEDCT"/>
      </def>
      <def localId="7" locator="14:1-14:137" name="Every eight to twelve hours (qualifier value)" id="396140003" display="Every eight to twelve hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>code &quot;Every eight to twelve hours (qualifier value)&quot;: '396140003' from </a:s>
               <a:s r="6">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every eight to twelve hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="6" locator="14:72-14:81" name="SNOMEDCT"/>
      </def>
      <def localId="9" locator="15:1-15:129" name="Every forty eight hours (qualifier value)" id="396131002" display="Every forty eight hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="9">
               <a:s>code &quot;Every forty eight hours (qualifier value)&quot;: '396131002' from </a:s>
               <a:s r="8">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every forty eight hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="8" locator="15:68-15:77" name="SNOMEDCT"/>
      </def>
      <def localId="11" locator="16:1-16:117" name="Every forty hours (qualifier value)" id="396130001" display="Every forty hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="11">
               <a:s>code &quot;Every forty hours (qualifier value)&quot;: '396130001' from </a:s>
               <a:s r="10">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every forty hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="10" locator="16:62-16:71" name="SNOMEDCT"/>
      </def>
      <def localId="13" locator="17:1-17:115" name="Every four hours (qualifier value)" id="225756002" display="Every four hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>code &quot;Every four hours (qualifier value)&quot;: '225756002' from </a:s>
               <a:s r="12">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every four hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="12" locator="17:61-17:70" name="SNOMEDCT"/>
      </def>
      <def localId="15" locator="18:1-18:129" name="Every seventy two hours (qualifier value)" id="396143001" display="Every seventy two hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="15">
               <a:s>code &quot;Every seventy two hours (qualifier value)&quot;: '396143001' from </a:s>
               <a:s r="14">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every seventy two hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="14" locator="18:68-18:77" name="SNOMEDCT"/>
      </def>
      <def localId="17" locator="19:1-19:113" name="Every six hours (qualifier value)" id="307468000" display="Every six hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="17">
               <a:s>code &quot;Every six hours (qualifier value)&quot;: '307468000' from </a:s>
               <a:s r="16">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every six hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="16" locator="19:60-19:69" name="SNOMEDCT"/>
      </def>
      <def localId="19" locator="20:1-20:131" name="Every six to eight hours (qualifier value)" id="396139000" display="Every six to eight hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="19">
               <a:s>code &quot;Every six to eight hours (qualifier value)&quot;: '396139000' from </a:s>
               <a:s r="18">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every six to eight hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="18" locator="20:69-20:78" name="SNOMEDCT"/>
      </def>
      <def localId="21" locator="21:1-21:127" name="Every thirty six hours (qualifier value)" id="396126004" display="Every thirty six hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="21">
               <a:s>code &quot;Every thirty six hours (qualifier value)&quot;: '396126004' from </a:s>
               <a:s r="20">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every thirty six hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="20" locator="21:67-21:76" name="SNOMEDCT"/>
      </def>
      <def localId="23" locator="22:1-22:133" name="Every three to four hours (qualifier value)" id="225754004" display="Every three to four hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="23">
               <a:s>code &quot;Every three to four hours (qualifier value)&quot;: '225754004' from </a:s>
               <a:s r="22">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every three to four hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="22" locator="22:70-22:79" name="SNOMEDCT"/>
      </def>
      <def localId="25" locator="23:1-23:131" name="Every three to six hours (qualifier value)" id="396127008" display="Every three to six hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="25">
               <a:s>code &quot;Every three to six hours (qualifier value)&quot;: '396127008' from </a:s>
               <a:s r="24">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every three to six hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="24" locator="23:69-23:78" name="SNOMEDCT"/>
      </def>
      <def localId="27" locator="24:1-24:119" name="Every twelve hours (qualifier value)" id="307470009" display="Every twelve hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="27">
               <a:s>code &quot;Every twelve hours (qualifier value)&quot;: '307470009' from </a:s>
               <a:s r="26">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every twelve hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="26" locator="24:63-24:72" name="SNOMEDCT"/>
      </def>
      <def localId="29" locator="25:1-25:129" name="Every twenty four hours (qualifier value)" id="396125000" display="Every twenty four hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="29">
               <a:s>code &quot;Every twenty four hours (qualifier value)&quot;: '396125000' from </a:s>
               <a:s r="28">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every twenty four hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="28" locator="25:68-25:77" name="SNOMEDCT"/>
      </def>
      <def localId="31" locator="26:1-26:129" name="Every two to four hours (qualifier value)" id="225752000" display="Every two to four hours (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="31">
               <a:s>code &quot;Every two to four hours (qualifier value)&quot;: '225752000' from </a:s>
               <a:s r="30">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Every two to four hours (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="30" locator="26:68-26:77" name="SNOMEDCT"/>
      </def>
      <def localId="33" locator="27:1-27:115" name="Four times daily (qualifier value)" id="307439001" display="Four times daily (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="33">
               <a:s>code &quot;Four times daily (qualifier value)&quot;: '307439001' from </a:s>
               <a:s r="32">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Four times daily (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="32" locator="27:61-27:70" name="SNOMEDCT"/>
      </def>
      <def localId="35" locator="28:1-28:103" name="Once daily (qualifier value)" id="229797004" display="Once daily (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="35">
               <a:s>code &quot;Once daily (qualifier value)&quot;: '229797004' from </a:s>
               <a:s r="34">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Once daily (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="34" locator="28:55-28:64" name="SNOMEDCT"/>
      </def>
      <def localId="37" locator="29:1-29:129" name="One to four times a day (qualifier value)" id="396109005" display="One to four times a day (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="37">
               <a:s>code &quot;One to four times a day (qualifier value)&quot;: '396109005' from </a:s>
               <a:s r="36">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'One to four times a day (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="36" locator="29:68-29:77" name="SNOMEDCT"/>
      </def>
      <def localId="39" locator="30:1-30:131" name="One to three times a day (qualifier value)" id="396108002" display="One to three times a day (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="39">
               <a:s>code &quot;One to three times a day (qualifier value)&quot;: '396108002' from </a:s>
               <a:s r="38">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'One to three times a day (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="38" locator="30:69-30:78" name="SNOMEDCT"/>
      </def>
      <def localId="41" locator="31:1-31:127" name="One to two times a day (qualifier value)" id="396107007" display="One to two times a day (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="41">
               <a:s>code &quot;One to two times a day (qualifier value)&quot;: '396107007' from </a:s>
               <a:s r="40">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'One to two times a day (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="40" locator="31:67-31:76" name="SNOMEDCT"/>
      </def>
      <def localId="43" locator="32:1-32:117" name="Three times daily (qualifier value)" id="229798009" display="Three times daily (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="43">
               <a:s>code &quot;Three times daily (qualifier value)&quot;: '229798009' from </a:s>
               <a:s r="42">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Three times daily (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="42" locator="32:62-32:71" name="SNOMEDCT"/>
      </def>
      <def localId="45" locator="33:1-33:105" name="Twice a day (qualifier value)" id="229799001" display="Twice a day (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="45">
               <a:s>code &quot;Twice a day (qualifier value)&quot;: '229799001' from </a:s>
               <a:s r="44">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Twice a day (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="44" locator="33:56-33:65" name="SNOMEDCT"/>
      </def>
      <def localId="47" locator="34:1-34:129" name="Two to four times a day (qualifier value)" id="396111001" display="Two to four times a day (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="47">
               <a:s>code &quot;Two to four times a day (qualifier value)&quot;: '396111001' from </a:s>
               <a:s r="46">
                  <a:s>&quot;SNOMEDCT&quot;</a:s>
               </a:s>
               <a:s> display 'Two to four times a day (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="46" locator="34:68-34:77" name="SNOMEDCT"/>
      </def>
   </codes>
   <contexts>
      <def locator="36:1-36:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="36:1-36:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="36:1-36:15" xmlns:ns0="urn:healthit-gov:qdm:v5_6" dataType="ns0:Patient" templateId="Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="239" locator="40:1-64:7" name="QuantityToDaily" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Converts a frequency quantity to a daily frequency (as a decimal)"/>
            <a:t name="description" value="Converts a frequency quantity to a daily frequency (as a decimal)"/>
            <a:t name="comment" value="This function considers both the value and unit of the given frequency. E.g. the frequency `30 'min'` will result in a daily frequency of `48.0`"/>
            <a:s r="239">
               <a:s>/*@description: Converts a frequency quantity to a daily frequency (as a decimal)
@comment: This function considers both the value and unit of the given frequency. E.g. the frequency `30 'min'` will result in a daily frequency of `48.0`*/define function &quot;QuantityToDaily&quot;(Frequency </a:s>
               <a:s r="48">
                  <a:s>Quantity</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="238">
                  <a:s r="238">
                     <a:s>case </a:s>
                     <a:s r="50">
                        <a:s r="49">
                           <a:s>Frequency</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="50">
                           <a:s>unit</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="56">
                        <a:s>when </a:s>
                        <a:s r="51">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="55">
                           <a:s>(</a:s>
                           <a:s r="55">
                              <a:s r="52">24.0 / </a:s>
                              <a:s r="54">
                                 <a:s r="53">
                                    <a:s>Frequency</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="54">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="64">
                        <a:s>when </a:s>
                        <a:s r="57">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="63">
                           <a:s r="61">
                              <a:s>(</a:s>
                              <a:s r="61">
                                 <a:s r="58">24.0 / </a:s>
                                 <a:s r="60">
                                    <a:s r="59">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="60">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="62"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="74">
                        <a:s>when </a:s>
                        <a:s r="65">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="73">
                           <a:s r="71">
                              <a:s r="69">
                                 <a:s>(</a:s>
                                 <a:s r="69">
                                    <a:s r="66">24.0 / </a:s>
                                    <a:s r="68">
                                       <a:s r="67">
                                          <a:s>Frequency</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="68">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="70"> * 60</a:s>
                           </a:s>
                           <a:s r="72"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="82">
                        <a:s>when </a:s>
                        <a:s r="75">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="81">
                           <a:s r="79">
                              <a:s>(</a:s>
                              <a:s r="79">
                                 <a:s r="76">24.0 / </a:s>
                                 <a:s r="78">
                                    <a:s r="77">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="78">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="80"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="92">
                        <a:s>when </a:s>
                        <a:s r="83">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="91">
                           <a:s r="87">
                              <a:s>(</a:s>
                              <a:s r="87">
                                 <a:s r="84">24.0 / </a:s>
                                 <a:s r="86">
                                    <a:s r="85">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="86">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="90">
                              <a:s>(</a:s>
                              <a:s r="90">
                                 <a:s r="88">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="102">
                        <a:s>when </a:s>
                        <a:s r="93">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="101">
                           <a:s r="97">
                              <a:s>(</a:s>
                              <a:s r="97">
                                 <a:s r="94">24.0 / </a:s>
                                 <a:s r="96">
                                    <a:s r="95">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="96">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="100">
                              <a:s>(</a:s>
                              <a:s r="100">
                                 <a:s r="98">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
      </a:s>
                     <a:s r="112">
                        <a:s>when </a:s>
                        <a:s r="103">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="111">
                           <a:s r="107">
                              <a:s>(</a:s>
                              <a:s r="107">
                                 <a:s r="104">24.0 / </a:s>
                                 <a:s r="106">
                                    <a:s r="105">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="106">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="110">
                              <a:s>(</a:s>
                              <a:s r="110">
                                 <a:s r="108">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
      </a:s>
                     <a:s r="118">
                        <a:s>when </a:s>
                        <a:s r="113">
                           <a:s>'hour'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="117">
                           <a:s>(</a:s>
                           <a:s r="117">
                              <a:s r="114">24.0 / </a:s>
                              <a:s r="116">
                                 <a:s r="115">
                                    <a:s>Frequency</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="116">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="126">
                        <a:s>when </a:s>
                        <a:s r="119">
                           <a:s>'minute'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="125">
                           <a:s r="123">
                              <a:s>(</a:s>
                              <a:s r="123">
                                 <a:s r="120">24.0 / </a:s>
                                 <a:s r="122">
                                    <a:s r="121">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="122">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="124"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="136">
                        <a:s>when </a:s>
                        <a:s r="127">
                           <a:s>'second'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="135">
                           <a:s r="133">
                              <a:s r="131">
                                 <a:s>(</a:s>
                                 <a:s r="131">
                                    <a:s r="128">24.0 / </a:s>
                                    <a:s r="130">
                                       <a:s r="129">
                                          <a:s>Frequency</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="130">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="132"> * 60</a:s>
                           </a:s>
                           <a:s r="134"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="144">
                        <a:s>when </a:s>
                        <a:s r="137">
                           <a:s>'day'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="143">
                           <a:s r="141">
                              <a:s>(</a:s>
                              <a:s r="141">
                                 <a:s r="138">24.0 / </a:s>
                                 <a:s r="140">
                                    <a:s r="139">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="140">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="142"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="154">
                        <a:s>when </a:s>
                        <a:s r="145">
                           <a:s>'week'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="153">
                           <a:s r="149">
                              <a:s>(</a:s>
                              <a:s r="149">
                                 <a:s r="146">24.0 / </a:s>
                                 <a:s r="148">
                                    <a:s r="147">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="148">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="152">
                              <a:s>(</a:s>
                              <a:s r="152">
                                 <a:s r="150">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="164">
                        <a:s>when </a:s>
                        <a:s r="155">
                           <a:s>'month'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="163">
                           <a:s r="159">
                              <a:s>(</a:s>
                              <a:s r="159">
                                 <a:s r="156">24.0 / </a:s>
                                 <a:s r="158">
                                    <a:s r="157">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="158">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="162">
                              <a:s>(</a:s>
                              <a:s r="162">
                                 <a:s r="160">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
      </a:s>
                     <a:s r="174">
                        <a:s>when </a:s>
                        <a:s r="165">
                           <a:s>'year'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="173">
                           <a:s r="169">
                              <a:s>(</a:s>
                              <a:s r="169">
                                 <a:s r="166">24.0 / </a:s>
                                 <a:s r="168">
                                    <a:s r="167">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="168">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="172">
                              <a:s>(</a:s>
                              <a:s r="172">
                                 <a:s r="170">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
      </a:s>
                     <a:s r="180">
                        <a:s>when </a:s>
                        <a:s r="175">
                           <a:s>'hours'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="179">
                           <a:s>(</a:s>
                           <a:s r="179">
                              <a:s r="176">24.0 / </a:s>
                              <a:s r="178">
                                 <a:s r="177">
                                    <a:s>Frequency</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="178">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="188">
                        <a:s>when </a:s>
                        <a:s r="181">
                           <a:s>'minutes'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="187">
                           <a:s r="185">
                              <a:s>(</a:s>
                              <a:s r="185">
                                 <a:s r="182">24.0 / </a:s>
                                 <a:s r="184">
                                    <a:s r="183">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="184">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="186"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="198">
                        <a:s>when </a:s>
                        <a:s r="189">
                           <a:s>'seconds'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="197">
                           <a:s r="195">
                              <a:s r="193">
                                 <a:s>(</a:s>
                                 <a:s r="193">
                                    <a:s r="190">24.0 / </a:s>
                                    <a:s r="192">
                                       <a:s r="191">
                                          <a:s>Frequency</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="192">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="194"> * 60</a:s>
                           </a:s>
                           <a:s r="196"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="206">
                        <a:s>when </a:s>
                        <a:s r="199">
                           <a:s>'days'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="205">
                           <a:s r="203">
                              <a:s>(</a:s>
                              <a:s r="203">
                                 <a:s r="200">24.0 / </a:s>
                                 <a:s r="202">
                                    <a:s r="201">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="202">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="204"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="216">
                        <a:s>when </a:s>
                        <a:s r="207">
                           <a:s>'weeks'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="215">
                           <a:s r="211">
                              <a:s>(</a:s>
                              <a:s r="211">
                                 <a:s r="208">24.0 / </a:s>
                                 <a:s r="210">
                                    <a:s r="209">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="210">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="214">
                              <a:s>(</a:s>
                              <a:s r="214">
                                 <a:s r="212">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="226">
                        <a:s>when </a:s>
                        <a:s r="217">
                           <a:s>'months'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="225">
                           <a:s r="221">
                              <a:s>(</a:s>
                              <a:s r="221">
                                 <a:s r="218">24.0 / </a:s>
                                 <a:s r="220">
                                    <a:s r="219">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="220">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="224">
                              <a:s>(</a:s>
                              <a:s r="224">
                                 <a:s r="222">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
      </a:s>
                     <a:s r="236">
                        <a:s>when </a:s>
                        <a:s r="227">
                           <a:s>'years'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="235">
                           <a:s r="231">
                              <a:s>(</a:s>
                              <a:s r="231">
                                 <a:s r="228">24.0 / </a:s>
                                 <a:s r="230">
                                    <a:s r="229">
                                       <a:s>Frequency</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="230">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="234">
                              <a:s>(</a:s>
                              <a:s r="234">
                                 <a:s r="232">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s r="237"> /* assuming 365 days in year */
      else null
    end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="238" locator="41:3-64:7" xsi:type="Case">
            <comparand localId="50" locator="41:8-41:21" path="unit" xsi:type="Property">
               <source localId="49" locator="41:8-41:16" name="Frequency" xsi:type="OperandRef"/>
            </comparand>
            <caseItem localId="56" locator="42:7-42:44">
               <when localId="51" locator="42:12-42:14" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="55" locator="42:21-42:44" xsi:type="Divide">
                  <operand localId="52" locator="42:22-42:25" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  <operand localId="54" locator="42:29-42:43" path="value" xsi:type="Property">
                     <source localId="53" locator="42:29-42:37" name="Frequency" xsi:type="OperandRef"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="64" locator="43:7-43:51">
               <when localId="57" locator="43:12-43:16" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="63" locator="43:23-43:51" xsi:type="Multiply">
                  <operand localId="61" locator="43:23-43:46" xsi:type="Divide">
                     <operand localId="58" locator="43:24-43:27" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="60" locator="43:31-43:45" path="value" xsi:type="Property">
                        <source localId="59" locator="43:31-43:39" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="62" locator="43:50-43:51" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="74" locator="44:7-44:54">
               <when localId="65" locator="44:12-44:14" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="73" locator="44:21-44:54" xsi:type="Multiply">
                  <operand localId="71" locator="44:21-44:49" xsi:type="Multiply">
                     <operand localId="69" locator="44:21-44:44" xsi:type="Divide">
                        <operand localId="66" locator="44:22-44:25" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="68" locator="44:29-44:43" path="value" xsi:type="Property">
                           <source localId="67" locator="44:29-44:37" name="Frequency" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="70" locator="44:48-44:49" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="72" locator="44:53-44:54" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="82" locator="45:7-45:49">
               <when localId="75" locator="45:12-45:14" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="81" locator="45:21-45:49" xsi:type="Divide">
                  <operand localId="79" locator="45:21-45:44" xsi:type="Divide">
                     <operand localId="76" locator="45:22-45:25" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="78" locator="45:29-45:43" path="value" xsi:type="Property">
                        <source localId="77" locator="45:29-45:37" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="80" locator="45:48-45:49" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="92" locator="46:7-46:56">
               <when localId="83" locator="46:12-46:15" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="91" locator="46:22-46:56" xsi:type="Divide">
                  <operand localId="87" locator="46:22-46:45" xsi:type="Divide">
                     <operand localId="84" locator="46:23-46:26" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="86" locator="46:30-46:44" path="value" xsi:type="Property">
                        <source localId="85" locator="46:30-46:38" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="90" locator="46:49-46:56" xsi:type="Multiply">
                        <operand localId="88" locator="46:50-46:51" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="89" locator="46:55" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="102" locator="47:7-47:57">
               <when localId="93" locator="47:12-47:15" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="101" locator="47:22-47:57" xsi:type="Divide">
                  <operand localId="97" locator="47:22-47:45" xsi:type="Divide">
                     <operand localId="94" locator="47:23-47:26" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="96" locator="47:30-47:44" path="value" xsi:type="Property">
                        <source localId="95" locator="47:30-47:38" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="100" locator="47:49-47:57" xsi:type="Multiply">
                        <operand localId="98" locator="47:50-47:51" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="99" locator="47:55-47:56" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="112" locator="48:7-48:57">
               <when localId="103" locator="48:12-48:14" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="111" locator="48:21-48:57" xsi:type="Divide">
                  <operand localId="107" locator="48:21-48:44" xsi:type="Divide">
                     <operand localId="104" locator="48:22-48:25" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="106" locator="48:29-48:43" path="value" xsi:type="Property">
                        <source localId="105" locator="48:29-48:37" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="110" locator="48:48-48:57" xsi:type="Multiply">
                        <operand localId="108" locator="48:49-48:50" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="109" locator="48:54-48:56" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="118" locator="49:7-49:47">
               <when localId="113" locator="49:12-49:17" valueType="t:String" value="hour" xsi:type="Literal"/>
               <then localId="117" locator="49:24-49:47" xsi:type="Divide">
                  <operand localId="114" locator="49:25-49:28" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  <operand localId="116" locator="49:32-49:46" path="value" xsi:type="Property">
                     <source localId="115" locator="49:32-49:40" name="Frequency" xsi:type="OperandRef"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="126" locator="50:7-50:54">
               <when localId="119" locator="50:12-50:19" valueType="t:String" value="minute" xsi:type="Literal"/>
               <then localId="125" locator="50:26-50:54" xsi:type="Multiply">
                  <operand localId="123" locator="50:26-50:49" xsi:type="Divide">
                     <operand localId="120" locator="50:27-50:30" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="122" locator="50:34-50:48" path="value" xsi:type="Property">
                        <source localId="121" locator="50:34-50:42" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="124" locator="50:53-50:54" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="136" locator="51:7-51:59">
               <when localId="127" locator="51:12-51:19" valueType="t:String" value="second" xsi:type="Literal"/>
               <then localId="135" locator="51:26-51:59" xsi:type="Multiply">
                  <operand localId="133" locator="51:26-51:54" xsi:type="Multiply">
                     <operand localId="131" locator="51:26-51:49" xsi:type="Divide">
                        <operand localId="128" locator="51:27-51:30" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="130" locator="51:34-51:48" path="value" xsi:type="Property">
                           <source localId="129" locator="51:34-51:42" name="Frequency" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="132" locator="51:53-51:54" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="134" locator="51:58-51:59" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="144" locator="52:7-52:51">
               <when localId="137" locator="52:12-52:16" valueType="t:String" value="day" xsi:type="Literal"/>
               <then localId="143" locator="52:23-52:51" xsi:type="Divide">
                  <operand localId="141" locator="52:23-52:46" xsi:type="Divide">
                     <operand localId="138" locator="52:24-52:27" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="140" locator="52:31-52:45" path="value" xsi:type="Property">
                        <source localId="139" locator="52:31-52:39" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="142" locator="52:50-52:51" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="154" locator="53:7-53:58">
               <when localId="145" locator="53:12-53:17" valueType="t:String" value="week" xsi:type="Literal"/>
               <then localId="153" locator="53:24-53:58" xsi:type="Divide">
                  <operand localId="149" locator="53:24-53:47" xsi:type="Divide">
                     <operand localId="146" locator="53:25-53:28" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="148" locator="53:32-53:46" path="value" xsi:type="Property">
                        <source localId="147" locator="53:32-53:40" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="152" locator="53:51-53:58" xsi:type="Multiply">
                        <operand localId="150" locator="53:52-53:53" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="151" locator="53:57" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="164" locator="54:7-54:60">
               <when localId="155" locator="54:12-54:18" valueType="t:String" value="month" xsi:type="Literal"/>
               <then localId="163" locator="54:25-54:60" xsi:type="Divide">
                  <operand localId="159" locator="54:25-54:48" xsi:type="Divide">
                     <operand localId="156" locator="54:26-54:29" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="158" locator="54:33-54:47" path="value" xsi:type="Property">
                        <source localId="157" locator="54:33-54:41" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="162" locator="54:52-54:60" xsi:type="Multiply">
                        <operand localId="160" locator="54:53-54:54" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="161" locator="54:58-54:59" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="174" locator="55:7-55:60">
               <when localId="165" locator="55:12-55:17" valueType="t:String" value="year" xsi:type="Literal"/>
               <then localId="173" locator="55:24-55:60" xsi:type="Divide">
                  <operand localId="169" locator="55:24-55:47" xsi:type="Divide">
                     <operand localId="166" locator="55:25-55:28" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="168" locator="55:32-55:46" path="value" xsi:type="Property">
                        <source localId="167" locator="55:32-55:40" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="172" locator="55:51-55:60" xsi:type="Multiply">
                        <operand localId="170" locator="55:52-55:53" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="171" locator="55:57-55:59" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="180" locator="56:7-56:48">
               <when localId="175" locator="56:12-56:18" valueType="t:String" value="hours" xsi:type="Literal"/>
               <then localId="179" locator="56:25-56:48" xsi:type="Divide">
                  <operand localId="176" locator="56:26-56:29" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  <operand localId="178" locator="56:33-56:47" path="value" xsi:type="Property">
                     <source localId="177" locator="56:33-56:41" name="Frequency" xsi:type="OperandRef"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="188" locator="57:7-57:55">
               <when localId="181" locator="57:12-57:20" valueType="t:String" value="minutes" xsi:type="Literal"/>
               <then localId="187" locator="57:27-57:55" xsi:type="Multiply">
                  <operand localId="185" locator="57:27-57:50" xsi:type="Divide">
                     <operand localId="182" locator="57:28-57:31" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="184" locator="57:35-57:49" path="value" xsi:type="Property">
                        <source localId="183" locator="57:35-57:43" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="186" locator="57:54-57:55" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="198" locator="58:7-58:60">
               <when localId="189" locator="58:12-58:20" valueType="t:String" value="seconds" xsi:type="Literal"/>
               <then localId="197" locator="58:27-58:60" xsi:type="Multiply">
                  <operand localId="195" locator="58:27-58:55" xsi:type="Multiply">
                     <operand localId="193" locator="58:27-58:50" xsi:type="Divide">
                        <operand localId="190" locator="58:28-58:31" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="192" locator="58:35-58:49" path="value" xsi:type="Property">
                           <source localId="191" locator="58:35-58:43" name="Frequency" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="194" locator="58:54-58:55" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="196" locator="58:59-58:60" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="206" locator="59:7-59:52">
               <when localId="199" locator="59:12-59:17" valueType="t:String" value="days" xsi:type="Literal"/>
               <then localId="205" locator="59:24-59:52" xsi:type="Divide">
                  <operand localId="203" locator="59:24-59:47" xsi:type="Divide">
                     <operand localId="200" locator="59:25-59:28" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="202" locator="59:32-59:46" path="value" xsi:type="Property">
                        <source localId="201" locator="59:32-59:40" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="204" locator="59:51-59:52" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="216" locator="60:7-60:59">
               <when localId="207" locator="60:12-60:18" valueType="t:String" value="weeks" xsi:type="Literal"/>
               <then localId="215" locator="60:25-60:59" xsi:type="Divide">
                  <operand localId="211" locator="60:25-60:48" xsi:type="Divide">
                     <operand localId="208" locator="60:26-60:29" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="210" locator="60:33-60:47" path="value" xsi:type="Property">
                        <source localId="209" locator="60:33-60:41" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="214" locator="60:52-60:59" xsi:type="Multiply">
                        <operand localId="212" locator="60:53-60:54" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="213" locator="60:58" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="226" locator="61:7-61:61">
               <when localId="217" locator="61:12-61:19" valueType="t:String" value="months" xsi:type="Literal"/>
               <then localId="225" locator="61:26-61:61" xsi:type="Divide">
                  <operand localId="221" locator="61:26-61:49" xsi:type="Divide">
                     <operand localId="218" locator="61:27-61:30" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="220" locator="61:34-61:48" path="value" xsi:type="Property">
                        <source localId="219" locator="61:34-61:42" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="224" locator="61:53-61:61" xsi:type="Multiply">
                        <operand localId="222" locator="61:54-61:55" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="223" locator="61:59-61:60" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="236" locator="62:7-62:61">
               <when localId="227" locator="62:12-62:18" valueType="t:String" value="years" xsi:type="Literal"/>
               <then localId="235" locator="62:25-62:61" xsi:type="Divide">
                  <operand localId="231" locator="62:25-62:48" xsi:type="Divide">
                     <operand localId="228" locator="62:26-62:29" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="230" locator="62:33-62:47" path="value" xsi:type="Property">
                        <source localId="229" locator="62:33-62:41" name="Frequency" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="234" locator="62:52-62:61" xsi:type="Multiply">
                        <operand localId="232" locator="62:53-62:54" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="233" locator="62:58-62:60" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="237" locator="63:12-63:15" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="Frequency">
            <operandTypeSpecifier localId="48" locator="40:45-40:52" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="348" locator="68:1-92:5" name="CodeToDaily" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns the equivalent daily frequency (as a decimal) of the given code"/>
            <a:t name="description" value="Returns the equivalent daily frequency (as a decimal) of the given code"/>
            <a:t name="comment" value="Note that for ranges, the boundary resulting in the highest frequency result is used. E.g. `Every two to four hours` results in `12.0` and `One to two` times a day results in `2.0`."/>
            <a:s r="348">
               <a:s>/*@description: Returns the equivalent daily frequency (as a decimal) of the given code
@comment: Note that for ranges, the boundary resulting in the highest frequency result is used. E.g. `Every two to four hours` results in `12.0` and `One to two` times a day results in `2.0`.*/define function &quot;CodeToDaily&quot;(Frequency </a:s>
               <a:s r="240">
                  <a:s>Code</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="347">
                  <a:s r="347">
                     <a:s>case
    </a:s>
                     <a:s r="245">
                        <a:s>when </a:s>
                        <a:s r="243">
                           <a:s r="241">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="242">
                              <a:s>&quot;Once daily (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="244"> then 1.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="250">
                        <a:s>when </a:s>
                        <a:s r="248">
                           <a:s r="246">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="247">
                              <a:s>&quot;Twice a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="249"> then 2.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="255">
                        <a:s>when </a:s>
                        <a:s r="253">
                           <a:s r="251">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="252">
                              <a:s>&quot;Three times daily (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="254"> then 3.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="260">
                        <a:s>when </a:s>
                        <a:s r="258">
                           <a:s r="256">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="257">
                              <a:s>&quot;Four times daily (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="259"> then 4.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="265">
                        <a:s>when </a:s>
                        <a:s r="263">
                           <a:s r="261">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="262">
                              <a:s>&quot;Every twenty four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="264"> then 1.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="270">
                        <a:s>when </a:s>
                        <a:s r="268">
                           <a:s r="266">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="267">
                              <a:s>&quot;Every twelve hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="269"> then 2.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="275">
                        <a:s>when </a:s>
                        <a:s r="273">
                           <a:s r="271">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="272">
                              <a:s>&quot;Every thirty six hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="274"> then 0.67</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="280">
                        <a:s>when </a:s>
                        <a:s r="278">
                           <a:s r="276">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="277">
                              <a:s>&quot;Every eight hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="279"> then 3.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="285">
                        <a:s>when </a:s>
                        <a:s r="283">
                           <a:s r="281">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="282">
                              <a:s>&quot;Every four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="284"> then 6.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="290">
                        <a:s>when </a:s>
                        <a:s r="288">
                           <a:s r="286">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="287">
                              <a:s>&quot;Every six hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="289"> then 4.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="295">
                        <a:s>when </a:s>
                        <a:s r="293">
                           <a:s r="291">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="292">
                              <a:s>&quot;Every seventy two hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="294"> then 0.33</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="300">
                        <a:s>when </a:s>
                        <a:s r="298">
                           <a:s r="296">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="297">
                              <a:s>&quot;Every forty eight hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="299"> then 0.5</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="305">
                        <a:s>when </a:s>
                        <a:s r="303">
                           <a:s r="301">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="302">
                              <a:s>&quot;Every eight to twelve hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="304"> then 3.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="310">
                        <a:s>when </a:s>
                        <a:s r="308">
                           <a:s r="306">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="307">
                              <a:s>&quot;Every six to eight hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="309"> then 4.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="315">
                        <a:s>when </a:s>
                        <a:s r="313">
                           <a:s r="311">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="312">
                              <a:s>&quot;Every three to four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="314"> then 8.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="320">
                        <a:s>when </a:s>
                        <a:s r="318">
                           <a:s r="316">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="317">
                              <a:s>&quot;Every three to six hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="319"> then 8.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="325">
                        <a:s>when </a:s>
                        <a:s r="323">
                           <a:s r="321">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="322">
                              <a:s>&quot;Every two to four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="324"> then 12.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="330">
                        <a:s>when </a:s>
                        <a:s r="328">
                           <a:s r="326">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="327">
                              <a:s>&quot;One to four times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="329"> then 4.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="335">
                        <a:s>when </a:s>
                        <a:s r="333">
                           <a:s r="331">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="332">
                              <a:s>&quot;One to three times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="334"> then 3.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="340">
                        <a:s>when </a:s>
                        <a:s r="338">
                           <a:s r="336">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="337">
                              <a:s>&quot;One to two times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="339"> then 2.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="345">
                        <a:s>when </a:s>
                        <a:s r="343">
                           <a:s r="341">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="342">
                              <a:s>&quot;Two to four times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="344"> then 4.0</a:s>
                     </a:s>
                     <a:s r="346">
    else null
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="347" locator="69:3-92:5" xsi:type="Case">
            <caseItem localId="245" locator="70:5-70:60">
               <when localId="243" locator="70:10-70:51" xsi:type="Equivalent">
                  <operand localId="241" locator="70:10-70:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="242" locator="70:22-70:51" name="Once daily (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="244" locator="70:58-70:60" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="250" locator="71:5-71:61">
               <when localId="248" locator="71:10-71:52" xsi:type="Equivalent">
                  <operand localId="246" locator="71:10-71:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="247" locator="71:22-71:52" name="Twice a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="249" locator="71:59-71:61" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="255" locator="72:5-72:67">
               <when localId="253" locator="72:10-72:58" xsi:type="Equivalent">
                  <operand localId="251" locator="72:10-72:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="252" locator="72:22-72:58" name="Three times daily (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="254" locator="72:65-72:67" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="260" locator="73:5-73:66">
               <when localId="258" locator="73:10-73:57" xsi:type="Equivalent">
                  <operand localId="256" locator="73:10-73:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="257" locator="73:22-73:57" name="Four times daily (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="259" locator="73:64-73:66" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="265" locator="74:5-74:73">
               <when localId="263" locator="74:10-74:64" xsi:type="Equivalent">
                  <operand localId="261" locator="74:10-74:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="262" locator="74:22-74:64" name="Every twenty four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="264" locator="74:71-74:73" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="270" locator="75:5-75:68">
               <when localId="268" locator="75:10-75:59" xsi:type="Equivalent">
                  <operand localId="266" locator="75:10-75:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="267" locator="75:22-75:59" name="Every twelve hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="269" locator="75:66-75:68" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="275" locator="76:5-76:73">
               <when localId="273" locator="76:10-76:63" xsi:type="Equivalent">
                  <operand localId="271" locator="76:10-76:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="272" locator="76:22-76:63" name="Every thirty six hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="274" locator="76:70-76:73" valueType="t:Decimal" value="0.67" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="280" locator="77:5-77:67">
               <when localId="278" locator="77:10-77:58" xsi:type="Equivalent">
                  <operand localId="276" locator="77:10-77:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="277" locator="77:22-77:58" name="Every eight hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="279" locator="77:65-77:67" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="285" locator="78:5-78:66">
               <when localId="283" locator="78:10-78:57" xsi:type="Equivalent">
                  <operand localId="281" locator="78:10-78:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="282" locator="78:22-78:57" name="Every four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="284" locator="78:64-78:66" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="290" locator="79:5-79:65">
               <when localId="288" locator="79:10-79:56" xsi:type="Equivalent">
                  <operand localId="286" locator="79:10-79:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="287" locator="79:22-79:56" name="Every six hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="289" locator="79:63-79:65" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="295" locator="80:5-80:74">
               <when localId="293" locator="80:10-80:64" xsi:type="Equivalent">
                  <operand localId="291" locator="80:10-80:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="292" locator="80:22-80:64" name="Every seventy two hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="294" locator="80:71-80:74" valueType="t:Decimal" value="0.33" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="300" locator="81:5-81:73">
               <when localId="298" locator="81:10-81:64" xsi:type="Equivalent">
                  <operand localId="296" locator="81:10-81:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="297" locator="81:22-81:64" name="Every forty eight hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="299" locator="81:71-81:73" valueType="t:Decimal" value="0.5" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="305" locator="82:5-82:77">
               <when localId="303" locator="82:10-82:68" xsi:type="Equivalent">
                  <operand localId="301" locator="82:10-82:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="302" locator="82:22-82:68" name="Every eight to twelve hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="304" locator="82:75-82:77" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="310" locator="83:5-83:74">
               <when localId="308" locator="83:10-83:65" xsi:type="Equivalent">
                  <operand localId="306" locator="83:10-83:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="307" locator="83:22-83:65" name="Every six to eight hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="309" locator="83:72-83:74" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="315" locator="84:5-84:75">
               <when localId="313" locator="84:10-84:66" xsi:type="Equivalent">
                  <operand localId="311" locator="84:10-84:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="312" locator="84:22-84:66" name="Every three to four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="314" locator="84:73-84:75" valueType="t:Decimal" value="8.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="320" locator="85:5-85:74">
               <when localId="318" locator="85:10-85:65" xsi:type="Equivalent">
                  <operand localId="316" locator="85:10-85:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="317" locator="85:22-85:65" name="Every three to six hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="319" locator="85:72-85:74" valueType="t:Decimal" value="8.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="325" locator="86:5-86:74">
               <when localId="323" locator="86:10-86:64" xsi:type="Equivalent">
                  <operand localId="321" locator="86:10-86:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="322" locator="86:22-86:64" name="Every two to four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="324" locator="86:71-86:74" valueType="t:Decimal" value="12.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="330" locator="87:5-87:73">
               <when localId="328" locator="87:10-87:64" xsi:type="Equivalent">
                  <operand localId="326" locator="87:10-87:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="327" locator="87:22-87:64" name="One to four times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="329" locator="87:71-87:73" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="335" locator="88:5-88:74">
               <when localId="333" locator="88:10-88:65" xsi:type="Equivalent">
                  <operand localId="331" locator="88:10-88:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="332" locator="88:22-88:65" name="One to three times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="334" locator="88:72-88:74" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="340" locator="89:5-89:72">
               <when localId="338" locator="89:10-89:63" xsi:type="Equivalent">
                  <operand localId="336" locator="89:10-89:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="337" locator="89:22-89:63" name="One to two times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="339" locator="89:70-89:72" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="345" locator="90:5-90:73">
               <when localId="343" locator="90:10-90:64" xsi:type="Equivalent">
                  <operand localId="341" locator="90:10-90:18" name="Frequency" xsi:type="OperandRef"/>
                  <operand localId="342" locator="90:22-90:64" name="Two to four times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="344" locator="90:71-90:73" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="346" locator="91:10-91:13" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="Frequency">
            <operandTypeSpecifier localId="240" locator="68:41-68:44" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="365" locator="95:1-99:5" name="ToDaily" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns the daily frequency (as a decimal) of the given input*/"/>
            <a:t name="description" value="Returns the daily frequency (as a decimal) of the given input*/"/>
            <a:s r="365">
               <a:s>/*@description: Returns the daily frequency (as a decimal) of the given input*/define function &quot;ToDaily&quot;(Frequency </a:s>
               <a:s r="351">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="349">
                     <a:s>Quantity</a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="350">
                     <a:s>Code</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="364">
                  <a:s r="364">
                     <a:s>case
    </a:s>
                     <a:s r="359">
                        <a:s>when </a:s>
                        <a:s r="354">
                           <a:s r="352">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="353">
                              <a:s>Quantity</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="358">
                           <a:s>QuantityToDaily(</a:s>
                           <a:s r="357">
                              <a:s r="355">
                                 <a:s>Frequency</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="356">
                                 <a:s>Quantity</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    else </a:s>
                     <a:s r="363">
                        <a:s>CodeToDaily(</a:s>
                        <a:s r="362">
                           <a:s r="360">
                              <a:s>Frequency</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="361">
                              <a:s>Code</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="364" locator="96:3-99:5" xsi:type="Case">
            <caseItem localId="359" locator="97:5-97:74">
               <when localId="354" locator="97:10-97:30" xsi:type="Is">
                  <operand localId="352" locator="97:10-97:18" name="Frequency" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="353" locator="97:23-97:30" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="358" locator="97:37-97:74" name="QuantityToDaily" xsi:type="FunctionRef">
                  <operand localId="357" locator="97:53-97:73" strict="false" xsi:type="As">
                     <operand localId="355" locator="97:53-97:61" name="Frequency" xsi:type="OperandRef"/>
                     <asTypeSpecifier localId="356" locator="97:66-97:73" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </then>
            </caseItem>
            <else localId="363" locator="98:10-98:39" name="CodeToDaily" xsi:type="FunctionRef">
               <operand localId="362" locator="98:22-98:38" strict="false" xsi:type="As">
                  <operand localId="360" locator="98:22-98:30" name="Frequency" xsi:type="OperandRef"/>
                  <asTypeSpecifier localId="361" locator="98:35-98:38" name="t:Code" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </else>
         </expression>
         <operand name="Frequency">
            <operandTypeSpecifier localId="351" locator="95:37-95:58" xsi:type="ChoiceTypeSpecifier">
               <choice localId="349" locator="95:44-95:51" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
               <choice localId="350" locator="95:54-95:57" name="t:Code" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="429" locator="106:1-113:15" name="MedicationOrderPeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Calculates the Medication Period for a single Medication, Order"/>
            <a:t name="description" value="Calculates the Medication Period for a single Medication, Order"/>
            <a:t name="comment" value="This function calculates the expected period of a medication order using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency)) * (1 + refills)`. If `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.&#xa;  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL."/>
            <a:t name="seealso" value="[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)&#xa;  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary."/>
            <a:s r="429">
               <a:s>/*@description: Calculates the Medication Period for a single Medication, Order
  @comment: This function calculates the expected period of a medication order using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency)) * (1 + refills)`. If `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.
  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.
  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)
  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/define function &quot;MedicationOrderPeriod&quot;(MedOrder </a:s>
               <a:s r="366">
                  <a:s>&quot;Medication, Order&quot;</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="428">
                  <a:s r="428">
                     <a:s>
                        <a:s r="368">
                           <a:s r="367">
                              <a:s>
                                 <a:s>MedOrder</a:s>
                              </a:s>
                           </a:s>
                           <a:s> Order</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="376">
                           <a:s>startDate: </a:s>
                           <a:s r="375">
                              <a:s>date from </a:s>
                              <a:s r="374">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="371">
                                    <a:s r="370">
                                       <a:s r="369">
                                          <a:s>Order</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="370">
                                          <a:s>relevantPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="371">
                                       <a:s>low</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="373">
                                    <a:s r="372">
                                       <a:s>Order</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="373">
                                       <a:s>authorDatetime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="398">
                           <a:s>totalDaysSupplied: </a:s>
                           <a:s r="397">
                              <a:s r="390">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="387">
                                    <a:s r="379">
                                       <a:s r="378">
                                          <a:s r="377">
                                             <a:s>Order</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="378">
                                             <a:s>supply</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="379">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> /</a:s>
                                    <a:s r="386">
                                       <a:s>(</a:s>
                                       <a:s r="386">
                                          <a:s r="382">
                                             <a:s r="381">
                                                <a:s r="380">
                                                   <a:s>Order</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="381">
                                                   <a:s>dosage</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="382">
                                                <a:s>value</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> * </a:s>
                                          <a:s r="385">
                                             <a:s>ToDaily(</a:s>
                                             <a:s r="384">
                                                <a:s r="383">
                                                   <a:s>Order</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="384">
                                                   <a:s>frequency</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="389">
                                    <a:s r="388">
                                       <a:s>Order</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="389">
                                       <a:s>daysSupplied</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="396">
                                 <a:s>( </a:s>
                                 <a:s r="396">
                                    <a:s r="391">1 + </a:s>
                                    <a:s r="395">
                                       <a:s>Coalesce(</a:s>
                                       <a:s r="393">
                                          <a:s r="392">
                                             <a:s>Order</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="393">
                                             <a:s>refills</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="394">, 0)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="427">
                        <a:s>return </a:s>
                        <a:s r="426">
                           <a:s>if </a:s>
                           <a:s r="400">
                              <a:s r="399">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s> is null</a:s>
                           </a:s>
                           <a:s r="401"> then null 
      else </a:s>
                           <a:s r="425">
                              <a:s>if </a:s>
                              <a:s r="403">
                                 <a:s r="402">
                                    <a:s>totalDaysSupplied</a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> then </a:s>
                              <a:s r="412">
                                 <a:s>Interval[</a:s>
                                 <a:s r="404">
                                    <a:s>startDate</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="411">
                                    <a:s r="405">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="410">
                                       <a:s>Quantity { </a:s>
                                       <a:s>
                                          <a:s>value: </a:s>
                                          <a:s r="408">
                                             <a:s r="406">
                                                <a:s>totalDaysSupplied</a:s>
                                             </a:s>
                                             <a:s r="407"> - 1</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s>
                                          <a:s>unit: </a:s>
                                          <a:s r="409">
                                             <a:s>'day'</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                              <a:s>
      else </a:s>
                              <a:s r="424">
                                 <a:s>if </a:s>
                                 <a:s r="416">
                                    <a:s r="415">
                                       <a:s r="414">
                                          <a:s r="413">
                                             <a:s>Order</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="414">
                                             <a:s>relevantPeriod</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="415">
                                          <a:s>high</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is not null</a:s>
                                 </a:s>
                                 <a:s> then </a:s>
                                 <a:s r="422">
                                    <a:s>Interval[</a:s>
                                    <a:s r="417">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="421">
                                       <a:s>date from </a:s>
                                       <a:s r="420">
                                          <a:s>end of </a:s>
                                          <a:s r="419">
                                             <a:s r="418">
                                                <a:s>Order</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="419">
                                                <a:s>relevantPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                                 <a:s r="423">
      else null</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="428" locator="107:3-113:15" xsi:type="Query">
            <source localId="368" locator="107:3-107:16" alias="Order">
               <expression localId="367" locator="107:3-107:10" name="MedOrder" xsi:type="OperandRef"/>
            </source>
            <let localId="376" locator="108:9-108:85" identifier="startDate">
               <expression localId="375" locator="108:20-108:85" xsi:type="DateFrom">
                  <operand localId="374" locator="108:30-108:85" xsi:type="Coalesce">
                     <operand localId="371" locator="108:39-108:62" path="low" xsi:type="Property">
                        <source localId="370" locator="108:39-108:58" path="relevantPeriod" scope="Order" xsi:type="Property"/>
                     </operand>
                     <operand localId="373" locator="108:65-108:84" path="authorDatetime" scope="Order" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <let localId="398" locator="109:5-109:157" identifier="totalDaysSupplied">
               <expression localId="397" locator="109:24-109:157" xsi:type="Multiply">
                  <operand localId="390" locator="109:24-109:120" xsi:type="Coalesce">
                     <operand localId="387" locator="109:33-109:99" xsi:type="Divide">
                        <operand localId="379" locator="109:33-109:50" path="value" xsi:type="Property">
                           <source localId="378" locator="109:33-109:44" path="supply" scope="Order" xsi:type="Property"/>
                        </operand>
                        <operand localId="386" locator="109:53-109:99" xsi:type="Multiply">
                           <operand localId="382" locator="109:54-109:71" path="value" xsi:type="Property">
                              <source localId="381" locator="109:54-109:65" path="dosage" scope="Order" xsi:type="Property"/>
                           </operand>
                           <operand localId="385" locator="109:75-109:98" name="ToDaily" xsi:type="FunctionRef">
                              <operand xsi:type="As">
                                 <operand localId="384" locator="109:83-109:97" path="frequency" scope="Order" xsi:type="Property"/>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="389" locator="109:102-109:119" path="daysSupplied" scope="Order" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="396" locator="109:124-109:157" xsi:type="Add">
                        <operand localId="391" locator="109:126" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        <operand localId="395" locator="109:130-109:155" xsi:type="Coalesce">
                           <operand localId="393" locator="109:139-109:151" path="refills" scope="Order" xsi:type="Property"/>
                           <operand localId="394" locator="109:154" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
               </expression>
            </let>
            <return localId="427" locator="110:5-113:15">
               <expression localId="426" locator="110:12-113:15" xsi:type="If">
                  <condition localId="400" locator="110:15-110:31" xsi:type="IsNull">
                     <operand localId="399" locator="110:15-110:23" name="startDate" xsi:type="QueryLetRef"/>
                  </condition>
                  <then xsi:type="As">
                     <operand localId="401" locator="110:38-110:41" xsi:type="Null"/>
                     <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
                  <else localId="425" locator="111:12-113:15" xsi:type="If">
                     <condition localId="403" locator="111:15-111:43" xsi:type="Not">
                        <operand locator="111:15-111:43" xsi:type="IsNull">
                           <operand localId="402" locator="111:15-111:31" name="totalDaysSupplied" xsi:type="QueryLetRef"/>
                        </operand>
                     </condition>
                     <then localId="412" locator="111:50-111:136" lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low localId="404" locator="111:59-111:67" name="startDate" xsi:type="QueryLetRef"/>
                        <high localId="411" locator="111:70-111:135" xsi:type="Add">
                           <operand localId="405" locator="111:70-111:78" name="startDate" xsi:type="QueryLetRef"/>
                           <operand localId="410" locator="111:82-111:135" classType="t:Quantity" xsi:type="Instance">
                              <element name="value">
                                 <value localId="408" locator="111:100-111:120" xsi:type="Subtract">
                                    <operand localId="406" locator="111:100-111:116" name="totalDaysSupplied" xsi:type="QueryLetRef"/>
                                    <operand xsi:type="ToDecimal">
                                       <operand localId="407" locator="111:120" valueType="t:Integer" value="1" xsi:type="Literal"/>
                                    </operand>
                                 </value>
                              </element>
                              <element name="unit">
                                 <value localId="409" locator="111:129-111:133" valueType="t:String" value="day" xsi:type="Literal"/>
                              </element>
                           </operand>
                        </high>
                     </then>
                     <else localId="424" locator="112:12-113:15" xsi:type="If">
                        <condition localId="416" locator="112:15-112:51" xsi:type="Not">
                           <operand locator="112:15-112:51" xsi:type="IsNull">
                              <operand localId="415" locator="112:15-112:39" path="high" xsi:type="Property">
                                 <source localId="414" locator="112:15-112:34" path="relevantPeriod" scope="Order" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </condition>
                        <then localId="422" locator="112:58-112:115" lowClosed="true" highClosed="true" xsi:type="Interval">
                           <low localId="417" locator="112:67-112:75" name="startDate" xsi:type="QueryLetRef"/>
                           <high localId="421" locator="112:78-112:114" xsi:type="DateFrom">
                              <operand localId="420" locator="112:88-112:114" xsi:type="End">
                                 <operand localId="419" locator="112:95-112:114" path="relevantPeriod" scope="Order" xsi:type="Property"/>
                              </operand>
                           </high>
                        </then>
                        <else xsi:type="As">
                           <operand localId="423" locator="113:12-113:15" xsi:type="Null"/>
                           <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           </asTypeSpecifier>
                        </else>
                     </else>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="MedOrder">
            <operandTypeSpecifier localId="366" locator="106:50-106:68" xmlns:ns1="urn:healthit-gov:qdm:v5_6" name="ns1:PositiveMedicationOrder" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="488" locator="120:1-127:15" name="MedicationDispensedPeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Calculates Medication Period for a given Medication, Dispensed"/>
            <a:t name="description" value="Calculates Medication Period for a given Medication, Dispensed"/>
            <a:t name="comment" value="This function calculates the effective duration of a single medication dispensing event using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency))`. If `daysSupplied` element is present, the duration is `daysSupplied`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `relevantDatetime` to `relevantDatetime + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.&#xa;  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL."/>
            <a:t name="seealso" value="[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)&#xa;  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary."/>
            <a:s r="488">
               <a:s>/*@description: Calculates Medication Period for a given Medication, Dispensed
  @comment: This function calculates the effective duration of a single medication dispensing event using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency))`. If `daysSupplied` element is present, the duration is `daysSupplied`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `relevantDatetime` to `relevantDatetime + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.
  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.
  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)
  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/define function &quot;MedicationDispensedPeriod&quot;(MedDispense </a:s>
               <a:s r="430">
                  <a:s>&quot;Medication, Dispensed&quot;</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="487">
                  <a:s r="487">
                     <a:s>
                        <a:s r="432">
                           <a:s r="431">
                              <a:s>
                                 <a:s>MedDispense</a:s>
                              </a:s>
                           </a:s>
                           <a:s> Dispense</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="442">
                           <a:s>startDate: </a:s>
                           <a:s r="441">
                              <a:s>date from </a:s>
                              <a:s r="440">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="435">
                                    <a:s r="434">
                                       <a:s r="433">
                                          <a:s>Dispense</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="434">
                                          <a:s>relevantPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="435">
                                       <a:s>low</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="437">
                                    <a:s r="436">
                                       <a:s>Dispense</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="437">
                                       <a:s>relevantDatetime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="439">
                                    <a:s r="438">
                                       <a:s>Dispense</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="439">
                                       <a:s>authorDatetime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="457">
                           <a:s>totalDaysSupplied: </a:s>
                           <a:s r="456">
                              <a:s>Coalesce(</a:s>
                              <a:s r="453">
                                 <a:s r="445">
                                    <a:s r="444">
                                       <a:s r="443">
                                          <a:s>Dispense</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="444">
                                          <a:s>supply</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="445">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> /</a:s>
                                 <a:s r="452">
                                    <a:s>(</a:s>
                                    <a:s r="452">
                                       <a:s r="448">
                                          <a:s r="447">
                                             <a:s r="446">
                                                <a:s>Dispense</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="447">
                                                <a:s>dosage</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="448">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> * </a:s>
                                       <a:s r="451">
                                          <a:s>ToDaily(</a:s>
                                          <a:s r="450">
                                             <a:s r="449">
                                                <a:s>Dispense</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="450">
                                                <a:s>frequency</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="455">
                                 <a:s r="454">
                                    <a:s>Dispense</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="455">
                                    <a:s>daysSupplied</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="486">
                        <a:s>return </a:s>
                        <a:s r="485">
                           <a:s>if </a:s>
                           <a:s r="459">
                              <a:s r="458">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s> is null</a:s>
                           </a:s>
                           <a:s r="460"> then null 
      else </a:s>
                           <a:s r="484">
                              <a:s>if </a:s>
                              <a:s r="462">
                                 <a:s r="461">
                                    <a:s>totalDaysSupplied</a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> then </a:s>
                              <a:s r="471">
                                 <a:s>Interval[</a:s>
                                 <a:s r="463">
                                    <a:s>startDate</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="470">
                                    <a:s r="464">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="469">
                                       <a:s>Quantity { </a:s>
                                       <a:s>
                                          <a:s>value: </a:s>
                                          <a:s r="467">
                                             <a:s r="465">
                                                <a:s>totalDaysSupplied</a:s>
                                             </a:s>
                                             <a:s r="466"> - 1</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s>
                                          <a:s>unit: </a:s>
                                          <a:s r="468">
                                             <a:s>'day'</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                              <a:s>
      else </a:s>
                              <a:s r="483">
                                 <a:s>if </a:s>
                                 <a:s r="475">
                                    <a:s r="474">
                                       <a:s r="473">
                                          <a:s r="472">
                                             <a:s>Dispense</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="473">
                                             <a:s>relevantPeriod</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="474">
                                          <a:s>high</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is not null</a:s>
                                 </a:s>
                                 <a:s> then </a:s>
                                 <a:s r="481">
                                    <a:s>Interval[</a:s>
                                    <a:s r="476">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="480">
                                       <a:s>date from </a:s>
                                       <a:s r="479">
                                          <a:s>end of </a:s>
                                          <a:s r="478">
                                             <a:s r="477">
                                                <a:s>Dispense</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="478">
                                                <a:s>relevantPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                                 <a:s r="482">
      else null</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="487" locator="121:3-127:15" xsi:type="Query">
            <source localId="432" locator="121:3-121:22" alias="Dispense">
               <expression localId="431" locator="121:3-121:13" name="MedDispense" xsi:type="OperandRef"/>
            </source>
            <let localId="442" locator="122:9-122:118" identifier="startDate">
               <expression localId="441" locator="122:20-122:118" xsi:type="DateFrom">
                  <operand localId="440" locator="122:30-122:118" xsi:type="Coalesce">
                     <operand localId="435" locator="122:39-122:65" path="low" xsi:type="Property">
                        <source localId="434" locator="122:39-122:61" path="relevantPeriod" scope="Dispense" xsi:type="Property"/>
                     </operand>
                     <operand localId="437" locator="122:68-122:92" path="relevantDatetime" scope="Dispense" xsi:type="Property"/>
                     <operand localId="439" locator="122:95-122:117" path="authorDatetime" scope="Dispense" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <let localId="457" locator="123:5-123:132" identifier="totalDaysSupplied">
               <expression localId="456" locator="123:24-123:132" xsi:type="Coalesce">
                  <operand localId="453" locator="123:33-123:108" xsi:type="Divide">
                     <operand localId="445" locator="123:33-123:53" path="value" xsi:type="Property">
                        <source localId="444" locator="123:33-123:47" path="supply" scope="Dispense" xsi:type="Property"/>
                     </operand>
                     <operand localId="452" locator="123:56-123:108" xsi:type="Multiply">
                        <operand localId="448" locator="123:57-123:77" path="value" xsi:type="Property">
                           <source localId="447" locator="123:57-123:71" path="dosage" scope="Dispense" xsi:type="Property"/>
                        </operand>
                        <operand localId="451" locator="123:81-123:107" name="ToDaily" xsi:type="FunctionRef">
                           <operand xsi:type="As">
                              <operand localId="450" locator="123:89-123:106" path="frequency" scope="Dispense" xsi:type="Property"/>
                              <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                 <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="t:Code" xsi:type="NamedTypeSpecifier"/>
                              </asTypeSpecifier>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="455" locator="123:111-123:131" path="daysSupplied" scope="Dispense" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <return localId="486" locator="124:5-127:15">
               <expression localId="485" locator="124:12-127:15" xsi:type="If">
                  <condition localId="459" locator="124:15-124:31" xsi:type="IsNull">
                     <operand localId="458" locator="124:15-124:23" name="startDate" xsi:type="QueryLetRef"/>
                  </condition>
                  <then xsi:type="As">
                     <operand localId="460" locator="124:38-124:41" xsi:type="Null"/>
                     <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
                  <else localId="484" locator="125:12-127:15" xsi:type="If">
                     <condition localId="462" locator="125:15-125:43" xsi:type="Not">
                        <operand locator="125:15-125:43" xsi:type="IsNull">
                           <operand localId="461" locator="125:15-125:31" name="totalDaysSupplied" xsi:type="QueryLetRef"/>
                        </operand>
                     </condition>
                     <then localId="471" locator="125:50-125:136" lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low localId="463" locator="125:59-125:67" name="startDate" xsi:type="QueryLetRef"/>
                        <high localId="470" locator="125:70-125:135" xsi:type="Add">
                           <operand localId="464" locator="125:70-125:78" name="startDate" xsi:type="QueryLetRef"/>
                           <operand localId="469" locator="125:82-125:135" classType="t:Quantity" xsi:type="Instance">
                              <element name="value">
                                 <value localId="467" locator="125:100-125:120" xsi:type="Subtract">
                                    <operand localId="465" locator="125:100-125:116" name="totalDaysSupplied" xsi:type="QueryLetRef"/>
                                    <operand xsi:type="ToDecimal">
                                       <operand localId="466" locator="125:120" valueType="t:Integer" value="1" xsi:type="Literal"/>
                                    </operand>
                                 </value>
                              </element>
                              <element name="unit">
                                 <value localId="468" locator="125:129-125:133" valueType="t:String" value="day" xsi:type="Literal"/>
                              </element>
                           </operand>
                        </high>
                     </then>
                     <else localId="483" locator="126:12-127:15" xsi:type="If">
                        <condition localId="475" locator="126:15-126:54" xsi:type="Not">
                           <operand locator="126:15-126:54" xsi:type="IsNull">
                              <operand localId="474" locator="126:15-126:42" path="high" xsi:type="Property">
                                 <source localId="473" locator="126:15-126:37" path="relevantPeriod" scope="Dispense" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </condition>
                        <then localId="481" locator="126:61-126:121" lowClosed="true" highClosed="true" xsi:type="Interval">
                           <low localId="476" locator="126:70-126:78" name="startDate" xsi:type="QueryLetRef"/>
                           <high localId="480" locator="126:81-126:120" xsi:type="DateFrom">
                              <operand localId="479" locator="126:91-126:120" xsi:type="End">
                                 <operand localId="478" locator="126:98-126:120" path="relevantPeriod" scope="Dispense" xsi:type="Property"/>
                              </operand>
                           </high>
                        </then>
                        <else xsi:type="As">
                           <operand localId="482" locator="127:12-127:15" xsi:type="Null"/>
                           <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           </asTypeSpecifier>
                        </else>
                     </else>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="MedDispense">
            <operandTypeSpecifier localId="430" locator="120:57-120:79" xmlns:ns2="urn:healthit-gov:qdm:v5_6" name="ns2:PositiveMedicationDispensed" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="491" locator="133:1-134:9" name="TherapeuticDuration" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns the established therapeutic duration for a given medication"/>
            <a:t name="description" value="Returns the established therapeutic duration for a given medication"/>
            <a:t name="comment" value="This is likely measure specific, though could potentially be established for any drug and distributed as a CodeSystem supplement. Defaulting to 14 days here for illustration."/>
            <a:t name="seealso" value="[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)&#xa;  Note that this function is still under development and should not be used."/>
            <a:s r="491">
               <a:s>/*@description: Returns the established therapeutic duration for a given medication
  @comment: This is likely measure specific, though could potentially be established for any drug and distributed as a CodeSystem supplement. Defaulting to 14 days here for illustration.
  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)
  Note that this function is still under development and should not be used.*/define function &quot;TherapeuticDuration&quot;(medication </a:s>
               <a:s r="489">
                  <a:s>Code</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="490">
                  <a:s r="490">
                     <a:s>14 days</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="490" locator="134:3-134:9" value="14" unit="days" xsi:type="Quantity"/>
         <operand name="medication">
            <operandTypeSpecifier localId="489" locator="133:50-133:53" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="523" locator="140:1-149:15" name="MedicationAdministrationPeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Calculates Medication Period for a given Medication, Administration"/>
            <a:t name="description" value="Calculates Medication Period for a given Medication, Administration"/>
            <a:t name="comment" value="This function calculates the effective duration of a single medication administration event using the following approach: If a TherapeuticDuration is defined for the medication, the result is the interval from the earliest of the `relevantDatetime` and `relevantPeriod` elements, to the end of the therapeutic duration."/>
            <a:t name="seealso" value="[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)&#xa;  Note that this function is still under development and should not be used."/>
            <a:s r="523">
               <a:s>/*@description: Calculates Medication Period for a given Medication, Administration
  @comment: This function calculates the effective duration of a single medication administration event using the following approach: If a TherapeuticDuration is defined for the medication, the result is the interval from the earliest of the `relevantDatetime` and `relevantPeriod` elements, to the end of the therapeutic duration.
  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)
  Note that this function is still under development and should not be used.*/define function &quot;MedicationAdministrationPeriod&quot;(MedAdministration </a:s>
               <a:s r="492">
                  <a:s>&quot;Medication, Administered&quot;</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="522">
                  <a:s r="522">
                     <a:s>
                        <a:s r="494">
                           <a:s r="493">
                              <a:s>
                                 <a:s>MedAdministration</a:s>
                              </a:s>
                           </a:s>
                           <a:s> Administration</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
       </a:s>
                     <a:s>
                        <a:s>let
         </a:s>
                        <a:s r="498">
                           <a:s>therapeuticDuration: </a:s>
                           <a:s r="497">
                              <a:s>TherapeuticDuration(</a:s>
                              <a:s r="496">
                                 <a:s r="495">
                                    <a:s>Administration</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="496">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
         </a:s>
                        <a:s r="506">
                           <a:s>startDate: </a:s>
                           <a:s r="505">
                              <a:s>date from </a:s>
                              <a:s r="504">
                                 <a:s r="499">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="504">
                                    <a:s>EarliestOf(</a:s>
                                    <a:s r="501">
                                       <a:s r="500">
                                          <a:s>Administration</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="501">
                                          <a:s>relevantDatetime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="503">
                                       <a:s r="502">
                                          <a:s>Administration</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="503">
                                          <a:s>relevantPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
       </a:s>
                     <a:s r="521">
                        <a:s>return
         </a:s>
                        <a:s r="520">
                           <a:s>if </a:s>
                           <a:s r="511">
                              <a:s r="508">
                                 <a:s r="507">
                                    <a:s>startDate</a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="510">
                                 <a:s r="509">
                                    <a:s>therapeuticDuration</a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                           </a:s>
                           <a:s> then
           </a:s>
                           <a:s r="518">
                              <a:s>Interval[</a:s>
                              <a:s r="512">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="517">
                                 <a:s r="515">
                                    <a:s r="513">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="514">
                                       <a:s>therapeuticDuration</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="516"> - 1</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                           <a:s r="519">
         else
           null</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="522" locator="141:3-149:15" xsi:type="Query">
            <source localId="494" locator="141:3-141:34" alias="Administration">
               <expression localId="493" locator="141:3-141:19" name="MedAdministration" xsi:type="OperandRef"/>
            </source>
            <let localId="498" locator="143:10-143:70" identifier="therapeuticDuration">
               <expression localId="497" locator="143:31-143:70" name="TherapeuticDuration" xsi:type="FunctionRef">
                  <operand localId="496" locator="143:51-143:69" path="code" scope="Administration" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="506" locator="144:10-144:111" identifier="startDate">
               <expression localId="505" locator="144:21-144:111" xsi:type="DateFrom">
                  <operand localId="504" locator="144:31-144:111" name="EarliestOf" libraryName="Global" xsi:type="FunctionRef">
                     <operand localId="501" locator="144:49-144:79" path="relevantDatetime" scope="Administration" xsi:type="Property"/>
                     <operand localId="503" locator="144:82-144:110" path="relevantPeriod" scope="Administration" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <return localId="521" locator="145:8-149:15">
               <expression localId="520" locator="146:10-149:15" xsi:type="If">
                  <condition localId="511" locator="146:13-146:69" xsi:type="And">
                     <operand localId="508" locator="146:13-146:33" xsi:type="Not">
                        <operand locator="146:13-146:33" xsi:type="IsNull">
                           <operand localId="507" locator="146:13-146:21" name="startDate" xsi:type="QueryLetRef"/>
                        </operand>
                     </operand>
                     <operand localId="510" locator="146:39-146:69" xsi:type="Not">
                        <operand locator="146:39-146:69" xsi:type="IsNull">
                           <operand localId="509" locator="146:39-146:57" name="therapeuticDuration" xsi:type="QueryLetRef"/>
                        </operand>
                     </operand>
                  </condition>
                  <then localId="518" locator="147:12-147:67" lowClosed="true" highClosed="true" xsi:type="Interval">
                     <low localId="512" locator="147:21-147:29" name="startDate" xsi:type="QueryLetRef"/>
                     <high localId="517" locator="147:32-147:66" xsi:type="Subtract">
                        <operand localId="515" locator="147:32-147:62" xsi:type="Add">
                           <operand localId="513" locator="147:32-147:40" name="startDate" xsi:type="QueryLetRef"/>
                           <operand localId="514" locator="147:44-147:62" name="therapeuticDuration" xsi:type="QueryLetRef"/>
                        </operand>
                        <operand xsi:type="ToQuantity">
                           <operand localId="516" locator="147:66" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        </operand>
                     </high>
                  </then>
                  <else xsi:type="As">
                     <operand localId="519" locator="149:12-149:15" xsi:type="Null"/>
                     <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="MedAdministration">
            <operandTypeSpecifier localId="492" locator="140:68-140:93" xmlns:ns3="urn:healthit-gov:qdm:v5_6" name="ns3:PositiveMedicationAdministered" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="569" locator="156:1-168:12" name="MedicationDischargePeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Calculates the Medication Period for a Medication, Discharge"/>
            <a:t name="description" value="Calculates the Medication Period for a Medication, Discharge"/>
            <a:t name="comment" value="This function calculates the effective duration of a single medication discharge event using the following approach: If the `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. Otherwise, the duration is calculated using `(supply / (dosage * frequency)) * (1 + refills)`. The result is then the interval from `authorDatetime` to `authorDatetime + daysSupplied`.&#xa;Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL."/>
            <a:t name="seealso" value="[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)&#xa;Note that this function has not been tested."/>
            <a:s r="569">
               <a:s>/*@description: Calculates the Medication Period for a Medication, Discharge
@comment: This function calculates the effective duration of a single medication discharge event using the following approach: If the `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. Otherwise, the duration is calculated using `(supply / (dosage * frequency)) * (1 + refills)`. The result is then the interval from `authorDatetime` to `authorDatetime + daysSupplied`.
Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.
@seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)
Note that this function has not been tested.*/define function &quot;MedicationDischargePeriod&quot;(Medication </a:s>
               <a:s r="524">
                  <a:s>&quot;Medication, Discharge&quot;</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="568">
                  <a:s r="568">
                     <a:s>
                        <a:s r="546">
                           <a:s r="545">
                              <a:s>(
    </a:s>
                              <a:s r="545">
                                 <a:s r="538">
                                    <a:s>Coalesce(
      </a:s>
                                    <a:s r="526">
                                       <a:s r="525">
                                          <a:s>Medication</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="526">
                                          <a:s>daysSupplied</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>,
      </a:s>
                                    <a:s r="537">
                                       <a:s r="529">
                                          <a:s r="528">
                                             <a:s r="527">
                                                <a:s>Medication</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="528">
                                                <a:s>supply</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="529">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> / </a:s>
                                       <a:s r="536">
                                          <a:s>(</a:s>
                                          <a:s r="536">
                                             <a:s r="532">
                                                <a:s r="531">
                                                   <a:s r="530">
                                                      <a:s>Medication</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="531">
                                                      <a:s>dosage</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="532">
                                                   <a:s>value</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> * </a:s>
                                             <a:s r="535">
                                                <a:s>ToDaily(</a:s>
                                                <a:s r="534">
                                                   <a:s r="533">
                                                      <a:s>Medication</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="534">
                                                      <a:s>frequency</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    )</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="544">
                                    <a:s>(</a:s>
                                    <a:s r="544">
                                       <a:s r="539">1 + </a:s>
                                       <a:s r="543">
                                          <a:s>Coalesce(</a:s>
                                          <a:s r="541">
                                             <a:s r="540">
                                                <a:s>Medication</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="541">
                                                <a:s>refills</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="542">, 0)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
  )</a:s>
                           </a:s>
                           <a:s> totalDaysSupplied</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="550">
                           <a:s>startDate: </a:s>
                           <a:s r="549">
                              <a:s>date from </a:s>
                              <a:s r="548">
                                 <a:s r="547">
                                    <a:s>Medication</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="548">
                                    <a:s>authorDatetime</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="567">
                        <a:s>return
      </a:s>
                        <a:s r="566">
                           <a:s>if </a:s>
                           <a:s r="555">
                              <a:s r="552">
                                 <a:s r="551">
                                    <a:s>startDate</a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="554">
                                 <a:s r="553">
                                    <a:s>totalDaysSupplied</a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                           </a:s>
                           <a:s> then
        </a:s>
                           <a:s r="564">
                              <a:s>Interval[</a:s>
                              <a:s r="556">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="563">
                                 <a:s r="557">
                                    <a:s>startDate</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="562">
                                    <a:s>Quantity { </a:s>
                                    <a:s>
                                       <a:s>value: </a:s>
                                       <a:s r="560">
                                          <a:s r="558">
                                             <a:s>totalDaysSupplied</a:s>
                                          </a:s>
                                          <a:s r="559"> - 1</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s>
                                       <a:s>unit: </a:s>
                                       <a:s r="561">
                                          <a:s>'day'</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> }</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                           <a:s r="565">
      else
        null</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="568" locator="157:3-168:12" xsi:type="Query">
            <source localId="546" locator="157:3-162:21" alias="totalDaysSupplied">
               <expression localId="545" locator="157:3-162:3" xsi:type="Multiply">
                  <operand localId="538" locator="158:5-161:5" xsi:type="Coalesce">
                     <operand xsi:type="ToDecimal">
                        <operand localId="526" locator="159:7-159:29" path="daysSupplied" xsi:type="Property">
                           <source localId="525" locator="159:7-159:16" name="Medication" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand localId="537" locator="160:7-160:89" xsi:type="Divide">
                        <operand localId="529" locator="160:7-160:29" path="value" xsi:type="Property">
                           <source localId="528" locator="160:7-160:23" path="supply" xsi:type="Property">
                              <source localId="527" locator="160:7-160:16" name="Medication" xsi:type="OperandRef"/>
                           </source>
                        </operand>
                        <operand localId="536" locator="160:33-160:89" xsi:type="Multiply">
                           <operand localId="532" locator="160:34-160:56" path="value" xsi:type="Property">
                              <source localId="531" locator="160:34-160:50" path="dosage" xsi:type="Property">
                                 <source localId="530" locator="160:34-160:43" name="Medication" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                           <operand localId="535" locator="160:60-160:88" name="ToDaily" xsi:type="FunctionRef">
                              <operand xsi:type="As">
                                 <operand localId="534" locator="160:68-160:87" path="frequency" xsi:type="Property">
                                    <source localId="533" locator="160:68-160:77" name="Medication" xsi:type="OperandRef"/>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                 </asTypeSpecifier>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="544" locator="161:9-161:45" xsi:type="Add">
                        <operand localId="539" locator="161:10" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        <operand localId="543" locator="161:14-161:44" xsi:type="Coalesce">
                           <operand localId="541" locator="161:23-161:40" path="refills" xsi:type="Property">
                              <source localId="540" locator="161:23-161:32" name="Medication" xsi:type="OperandRef"/>
                           </operand>
                           <operand localId="542" locator="161:43" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
               </expression>
            </source>
            <let localId="550" locator="163:9-163:54" identifier="startDate">
               <expression localId="549" locator="163:20-163:54" xsi:type="DateFrom">
                  <operand localId="548" locator="163:30-163:54" path="authorDatetime" xsi:type="Property">
                     <source localId="547" locator="163:30-163:39" name="Medication" xsi:type="OperandRef"/>
                  </operand>
               </expression>
            </let>
            <return localId="567" locator="164:5-168:12">
               <expression localId="566" locator="165:7-168:12" xsi:type="If">
                  <condition localId="555" locator="165:10-165:64" xsi:type="And">
                     <operand localId="552" locator="165:10-165:30" xsi:type="Not">
                        <operand locator="165:10-165:30" xsi:type="IsNull">
                           <operand localId="551" locator="165:10-165:18" name="startDate" xsi:type="QueryLetRef"/>
                        </operand>
                     </operand>
                     <operand localId="554" locator="165:36-165:64" xsi:type="Not">
                        <operand locator="165:36-165:64" xsi:type="IsNull">
                           <operand localId="553" locator="165:36-165:52" name="totalDaysSupplied" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </condition>
                  <then localId="564" locator="166:9-166:95" lowClosed="true" highClosed="true" xsi:type="Interval">
                     <low localId="556" locator="166:18-166:26" name="startDate" xsi:type="QueryLetRef"/>
                     <high localId="563" locator="166:29-166:94" xsi:type="Add">
                        <operand localId="557" locator="166:29-166:37" name="startDate" xsi:type="QueryLetRef"/>
                        <operand localId="562" locator="166:41-166:94" classType="t:Quantity" xsi:type="Instance">
                           <element name="value">
                              <value localId="560" locator="166:59-166:79" xsi:type="Subtract">
                                 <operand localId="558" locator="166:59-166:75" name="totalDaysSupplied" xsi:type="AliasRef"/>
                                 <operand xsi:type="ToDecimal">
                                    <operand localId="559" locator="166:79" valueType="t:Integer" value="1" xsi:type="Literal"/>
                                 </operand>
                              </value>
                           </element>
                           <element name="unit">
                              <value localId="561" locator="166:88-166:92" valueType="t:String" value="day" xsi:type="Literal"/>
                           </element>
                        </operand>
                     </high>
                  </then>
                  <else xsi:type="As">
                     <operand localId="565" locator="168:9-168:12" xsi:type="Null"/>
                     <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="Medication">
            <operandTypeSpecifier localId="524" locator="156:56-156:78" xmlns:ns4="urn:healthit-gov:qdm:v5_6" name="ns4:PositiveMedicationDischarge" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="590" locator="172:1-179:13" name="CumulativeDuration" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns the total duration in days covered by the given periods"/>
            <a:t name="description" value="Returns the total duration in days covered by the given periods"/>
            <a:t name="comment" value="This function calculates the total duration in days covered by the given periods. If multiple periods in the input include the same day, that day is only counted once in the final result."/>
            <a:s r="590">
               <a:s>/*@description: Returns the total duration in days covered by the given periods
  @comment: This function calculates the total duration in days covered by the given periods. If multiple periods in the input include the same day, that day is only counted once in the final result.*/define function &quot;CumulativeDuration&quot;(Intervals </a:s>
               <a:s r="572">
                  <a:s>List&lt;</a:s>
                  <a:s r="571">
                     <a:s>Interval&lt;</a:s>
                     <a:s r="570">
                        <a:s>Date</a:s>
                     </a:s>
                     <a:s>></a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="589">
                  <a:s r="589">
                     <a:s>if </a:s>
                     <a:s r="574">
                        <a:s r="573">
                           <a:s>Intervals</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="587">
                        <a:s>( </a:s>
                        <a:s r="587">
                           <a:s>Sum(</a:s>
                           <a:s r="586">
                              <a:s>
                                 <a:s r="577">
                                    <a:s r="576">
                                       <a:s>(</a:s>
                                       <a:s r="576">
                                          <a:s>collapse </a:s>
                                          <a:s r="575">
                                             <a:s>Intervals</a:s>
                                          </a:s>
                                          <a:s> per day</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s>X</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        </a:s>
                              <a:s r="585">
                                 <a:s>return all</a:s>
                                 <a:s r="584">
                                    <a:s r="582">
                                       <a:s>(</a:s>
                                       <a:s r="582">
                                          <a:s>difference in days between </a:s>
                                          <a:s r="579">
                                             <a:s>start of </a:s>
                                             <a:s r="578">
                                                <a:s>X</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> and 
          </a:s>
                                          <a:s r="581">
                                             <a:s>end of </a:s>
                                             <a:s r="580">
                                                <a:s>X</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        )</a:s>
                                    </a:s>
                                    <a:s r="583">+ 1</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    )</a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s r="588"> 
    else null</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="589" locator="173:3-179:13" xsi:type="If">
            <condition localId="574" locator="173:6-173:26" xsi:type="Not">
               <operand locator="173:6-173:26" xsi:type="IsNull">
                  <operand localId="573" locator="173:6-173:14" name="Intervals" xsi:type="OperandRef"/>
               </operand>
            </condition>
            <then localId="587" locator="173:33-178:3" xsi:type="Sum">
               <source localId="586" locator="173:39-176:12" xsi:type="Query">
                  <source localId="577" locator="173:39-173:67" alias="X">
                     <expression localId="576" locator="173:39-173:66" xsi:type="Collapse">
                        <operand localId="575" locator="173:49-173:57" name="Intervals" xsi:type="OperandRef"/>
                        <operand value="1.0" unit="day" xsi:type="Quantity"/>
                     </expression>
                  </source>
                  <return localId="585" locator="174:9-176:12" distinct="false">
                     <expression localId="584" locator="174:19-176:12" xsi:type="Add">
                        <operand localId="582" locator="174:19-176:9" precision="Day" xsi:type="DifferenceBetween">
                           <operand localId="579" locator="174:47-174:56" xsi:type="Start">
                              <operand localId="578" locator="174:56" name="X" xsi:type="AliasRef"/>
                           </operand>
                           <operand localId="581" locator="175:11-175:18" xsi:type="End">
                              <operand localId="580" locator="175:18" name="X" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                        <operand localId="583" locator="176:12" valueType="t:Integer" value="1" xsi:type="Literal"/>
                     </expression>
                  </return>
               </source>
            </then>
            <else asType="t:Integer" xsi:type="As">
               <operand localId="588" locator="179:10-179:13" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="Intervals">
            <operandTypeSpecifier localId="572" locator="172:48-172:67" xsi:type="ListTypeSpecifier">
               <elementType localId="571" locator="172:53-172:66" xsi:type="IntervalTypeSpecifier">
                  <pointType localId="570" locator="172:62-172:65" name="t:Date" xsi:type="NamedTypeSpecifier"/>
               </elementType>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="632" locator="183:1-191:5" name="RolloutIntervals" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Rolls out periods so that overlapping periods delay the start of subsequent periods"/>
            <a:t name="description" value="Rolls out periods so that overlapping periods delay the start of subsequent periods"/>
            <a:t name="comment" value="Returns the periods with overlapping periods delayed so that there is no overlap between any two periods in the result."/>
            <a:s r="632">
               <a:s>/*@description: Rolls out periods so that overlapping periods delay the start of subsequent periods
  @comment: Returns the periods with overlapping periods delayed so that there is no overlap between any two periods in the result.*/define function &quot;RolloutIntervals&quot;(intervals </a:s>
               <a:s r="593">
                  <a:s>List&lt;</a:s>
                  <a:s r="592">
                     <a:s>Interval&lt;</a:s>
                     <a:s r="591">
                        <a:s>Date</a:s>
                     </a:s>
                     <a:s>></a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="631">
                  <a:s r="631">
                     <a:s>
                        <a:s r="595">
                           <a:s r="594">
                              <a:s>
                                 <a:s>intervals</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="630">
                        <a:s>aggregate all R </a:s>
                        <a:s r="600">
                           <a:s>starting ( </a:s>
                           <a:s r="600">
                              <a:s r="596">null as </a:s>
                              <a:s r="599">
                                 <a:s>List&lt;</a:s>
                                 <a:s r="598">
                                    <a:s>Interval&lt;</a:s>
                                    <a:s r="597">
                                       <a:s>Date</a:s>
                                    </a:s>
                                    <a:s>></a:s>
                                 </a:s>
                                 <a:s>></a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>: </a:s>
                        <a:s r="629">
                           <a:s r="601">
                              <a:s>R</a:s>
                           </a:s>
                           <a:s>
    union </a:s>
                           <a:s r="628">
                              <a:s>( </a:s>
                              <a:s r="628">
                                 <a:s>{ </a:s>
                                 <a:s r="627">
                                    <a:s>
                                       <a:s r="603">
                                          <a:s r="602">
                                             <a:s>
                                                <a:s>I</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> X</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
        </a:s>
                                    <a:s>
                                       <a:s>let </a:s>
                                       <a:s r="613">
                                          <a:s>S: </a:s>
                                          <a:s r="612">
                                             <a:s>Max(</a:s>
                                             <a:s r="611">
                                                <a:s>{ 
          </a:s>
                                                <a:s r="608">
                                                   <a:s r="606">
                                                      <a:s>end of </a:s>
                                                      <a:s r="605">
                                                         <a:s>Last(</a:s>
                                                         <a:s r="604">
                                                            <a:s>R</a:s>
                                                         </a:s>
                                                         <a:s>)</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>+ </a:s>
                                                   <a:s r="607">
                                                      <a:s>1 day</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="610">
                                                   <a:s>start of </a:s>
                                                   <a:s r="609">
                                                      <a:s>X</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> }</a:s>
                                             </a:s>
                                             <a:s>
        )</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
        </a:s>
                                       <a:s r="622">
                                          <a:s>E: </a:s>
                                          <a:s r="621">
                                             <a:s r="614">
                                                <a:s>S</a:s>
                                             </a:s>
                                             <a:s> + </a:s>
                                             <a:s r="620">
                                                <a:s>Quantity { </a:s>
                                                <a:s>
                                                   <a:s>value: </a:s>
                                                   <a:s r="618">
                                                      <a:s>Coalesce(</a:s>
                                                      <a:s r="616">
                                                         <a:s>duration in days of </a:s>
                                                         <a:s r="615">
                                                            <a:s>X</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="617">, 0)</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s>
                                                   <a:s>unit: </a:s>
                                                   <a:s r="619">
                                                      <a:s>'day'</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> }</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
        </a:s>
                                    <a:s r="626">
                                       <a:s>return </a:s>
                                       <a:s r="625">
                                          <a:s>Interval[</a:s>
                                          <a:s r="623">
                                             <a:s>S</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="624">
                                             <a:s>E</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                              <a:s>
    )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="631" locator="184:3-191:5" xsi:type="Query">
            <source localId="595" locator="184:3-184:13" alias="I">
               <expression localId="594" locator="184:3-184:11" name="intervals" xsi:type="OperandRef"/>
            </source>
            <aggregate localId="630" locator="184:15-191:5" identifier="R" distinct="false">
               <expression localId="629" locator="184:73-191:5" xsi:type="Union">
                  <operand localId="601" locator="184:73" name="R" xsi:type="QueryLetRef"/>
                  <operand localId="628" locator="185:11-191:5" xsi:type="List">
                     <element localId="627" locator="185:15-190:29" xsi:type="Query">
                        <source localId="603" locator="185:15-185:17" alias="X">
                           <expression localId="602" locator="185:15" name="I" xsi:type="AliasRef"/>
                        </source>
                        <let localId="613" locator="186:13-188:9" identifier="S">
                           <expression localId="612" locator="186:16-188:9" xsi:type="Max">
                              <source localId="611" locator="186:20-187:45" xsi:type="List">
                                 <element localId="608" locator="187:11-187:31" xsi:type="Add">
                                    <operand localId="606" locator="187:11-187:24" xsi:type="End">
                                       <operand localId="605" locator="187:18-187:24" xsi:type="Last">
                                          <source localId="604" locator="187:23" name="R" xsi:type="QueryLetRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="607" locator="187:27-187:31" value="1" unit="day" xsi:type="Quantity"/>
                                 </element>
                                 <element localId="610" locator="187:34-187:43" xsi:type="Start">
                                    <operand localId="609" locator="187:43" name="X" xsi:type="AliasRef"/>
                                 </element>
                              </source>
                           </expression>
                        </let>
                        <let localId="622" locator="189:9-189:82" identifier="E">
                           <expression localId="621" locator="189:12-189:82" xsi:type="Add">
                              <operand localId="614" locator="189:12" name="S" xsi:type="QueryLetRef"/>
                              <operand localId="620" locator="189:16-189:82" classType="t:Quantity" xsi:type="Instance">
                                 <element name="value">
                                    <value xsi:type="ToDecimal">
                                       <operand localId="618" locator="189:34-189:67" xsi:type="Coalesce">
                                          <operand localId="616" locator="189:43-189:63" precision="Day" xsi:type="DurationBetween">
                                             <operand xsi:type="Start">
                                                <operand localId="615" locator="189:63" name="X" xsi:type="AliasRef"/>
                                             </operand>
                                             <operand xsi:type="End">
                                                <operand localId="615" locator="189:63" name="X" xsi:type="AliasRef"/>
                                             </operand>
                                          </operand>
                                          <operand localId="617" locator="189:66" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                       </operand>
                                    </value>
                                 </element>
                                 <element name="unit">
                                    <value localId="619" locator="189:76-189:80" valueType="t:String" value="day" xsi:type="Literal"/>
                                 </element>
                              </operand>
                           </expression>
                        </let>
                        <return localId="626" locator="190:9-190:29">
                           <expression localId="625" locator="190:16-190:29" lowClosed="true" highClosed="true" xsi:type="Interval">
                              <low localId="623" locator="190:25" name="S" xsi:type="QueryLetRef"/>
                              <high localId="624" locator="190:28" name="E" xsi:type="QueryLetRef"/>
                           </expression>
                        </return>
                     </element>
                  </operand>
               </expression>
               <starting localId="600" locator="184:31-184:70" strict="false" xsi:type="As">
                  <operand localId="596" locator="184:42-184:45" xsi:type="Null"/>
                  <asTypeSpecifier localId="599" locator="184:50-184:69" xsi:type="ListTypeSpecifier">
                     <elementType localId="598" locator="184:55-184:68" xsi:type="IntervalTypeSpecifier">
                        <pointType localId="597" locator="184:64-184:67" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </asTypeSpecifier>
               </starting>
            </aggregate>
         </expression>
         <operand name="intervals">
            <operandTypeSpecifier localId="593" locator="183:46-183:65" xsi:type="ListTypeSpecifier">
               <elementType localId="592" locator="183:51-183:64" xsi:type="IntervalTypeSpecifier">
                  <pointType localId="591" locator="183:60-183:63" name="t:Date" xsi:type="NamedTypeSpecifier"/>
               </elementType>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="647" locator="194:1-204:6" name="MedicationPeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/"/>
            <a:t name="description" value="Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/"/>
            <a:s r="647">
               <a:s>/*@description: Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/define function &quot;MedicationPeriod&quot;(Medication </a:s>
               <a:s r="637">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="633">
                     <a:s>&quot;Medication, Order&quot;</a:s>
                  </a:s>
                  <a:s>,
       </a:s>
                  <a:s r="634">
                     <a:s>&quot;Medication, Dispensed&quot;</a:s>
                  </a:s>
                  <a:s>,
       </a:s>
                  <a:s r="635">
                     <a:s>&quot;Medication, Discharge&quot;</a:s>
                  </a:s>
                  <a:s>,
       </a:s>
                  <a:s r="636">
                     <a:s>&quot;Medication, Administered&quot;</a:s>
                  </a:s>
                  <a:s>
     ></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="646">
                  <a:s r="646">
                     <a:s>Coalesce(
       </a:s>
                     <a:s r="639">
                        <a:s>MedicationOrderPeriod(</a:s>
                        <a:s r="638">
                           <a:s>Medication</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>,
       </a:s>
                     <a:s r="641">
                        <a:s>MedicationDispensedPeriod(</a:s>
                        <a:s r="640">
                           <a:s>Medication</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>,
       </a:s>
                     <a:s r="643">
                        <a:s>MedicationDischargePeriod(</a:s>
                        <a:s r="642">
                           <a:s>Medication</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>,
       </a:s>
                     <a:s r="645">
                        <a:s>MedicationAdministrationPeriod(</a:s>
                        <a:s r="644">
                           <a:s>Medication</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
     )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="646" locator="199:3-204:6" xsi:type="Coalesce">
            <operand localId="639" locator="200:8-200:40" name="MedicationOrderPeriod" xsi:type="FunctionRef">
               <operand xmlns:ns5="urn:healthit-gov:qdm:v5_6" asType="ns5:PositiveMedicationOrder" xsi:type="As">
                  <operand localId="638" locator="200:30-200:39" name="Medication" xsi:type="OperandRef"/>
               </operand>
            </operand>
            <operand localId="641" locator="201:8-201:44" name="MedicationDispensedPeriod" xsi:type="FunctionRef">
               <operand xmlns:ns6="urn:healthit-gov:qdm:v5_6" asType="ns6:PositiveMedicationDispensed" xsi:type="As">
                  <operand localId="640" locator="201:34-201:43" name="Medication" xsi:type="OperandRef"/>
               </operand>
            </operand>
            <operand localId="643" locator="202:8-202:44" name="MedicationDischargePeriod" xsi:type="FunctionRef">
               <operand xmlns:ns7="urn:healthit-gov:qdm:v5_6" asType="ns7:PositiveMedicationDischarge" xsi:type="As">
                  <operand localId="642" locator="202:34-202:43" name="Medication" xsi:type="OperandRef"/>
               </operand>
            </operand>
            <operand localId="645" locator="203:8-203:49" name="MedicationAdministrationPeriod" xsi:type="FunctionRef">
               <operand xmlns:ns8="urn:healthit-gov:qdm:v5_6" asType="ns8:PositiveMedicationAdministered" xsi:type="As">
                  <operand localId="644" locator="203:39-203:48" name="Medication" xsi:type="OperandRef"/>
               </operand>
            </operand>
         </expression>
         <operand name="Medication">
            <operandTypeSpecifier localId="637" locator="194:47-198:6" xsi:type="ChoiceTypeSpecifier">
               <choice localId="633" locator="194:54-194:72" xmlns:ns9="urn:healthit-gov:qdm:v5_6" name="ns9:PositiveMedicationOrder" xsi:type="NamedTypeSpecifier"/>
               <choice localId="634" locator="195:8-195:30" xmlns:ns10="urn:healthit-gov:qdm:v5_6" name="ns10:PositiveMedicationDispensed" xsi:type="NamedTypeSpecifier"/>
               <choice localId="635" locator="196:8-196:30" xmlns:ns11="urn:healthit-gov:qdm:v5_6" name="ns11:PositiveMedicationDischarge" xsi:type="NamedTypeSpecifier"/>
               <choice localId="636" locator="197:8-197:33" xmlns:ns12="urn:healthit-gov:qdm:v5_6" name="ns12:PositiveMedicationAdministered" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="683" locator="208:1-225:6" name="CalculateCumulativeMedicationDuration" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Calculates the cumulative medication duration of the given medication events"/>
            <a:t name="description" value="Calculates the cumulative medication duration of the given medication events"/>
            <a:t name="comment" value="This function will _roll out_ periods from dispense and administration events, and then collapse across that result and periods from prescriptions. The separation of medications by type should already be done prior to using this function. In addition, calculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)) require further consideration. Note that this function is still under development and should not be used."/>
            <a:s r="683">
               <a:s>/*@description: Calculates the cumulative medication duration of the given medication events
  @comment: This function will _roll out_ periods from dispense and administration events, and then collapse across that result and periods from prescriptions. The separation of medications by type should already be done prior to using this function. In addition, calculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)) require further consideration. Note that this function is still under development and should not be used.*/define function &quot;CalculateCumulativeMedicationDuration&quot;(Medications </a:s>
               <a:s r="653">
                  <a:s>List&lt;</a:s>
                  <a:s r="652">
                     <a:s>Choice&lt;</a:s>
                     <a:s r="648">
                        <a:s>&quot;Medication, Order&quot;</a:s>
                     </a:s>
                     <a:s>,
       </a:s>
                     <a:s r="649">
                        <a:s>&quot;Medication, Dispensed&quot;</a:s>
                     </a:s>
                     <a:s>,
       </a:s>
                     <a:s r="650">
                        <a:s>&quot;Medication, Discharge&quot;</a:s>
                     </a:s>
                     <a:s>,
       </a:s>
                     <a:s r="651">
                        <a:s>&quot;Medication, Administered&quot;</a:s>
                     </a:s>
                     <a:s>
     ></a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="682">
                  <a:s r="682">
                     <a:s>CumulativeDuration(</a:s>
                     <a:s r="681">
                        <a:s r="666">
                           <a:s>(
         </a:s>
                           <a:s r="666">
                              <a:s>
                                 <a:s r="655">
                                    <a:s r="654">
                                       <a:s>
                                          <a:s>Medications</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> M</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
           </a:s>
                              <a:s r="662">
                                 <a:s>where </a:s>
                                 <a:s r="662">
                                    <a:s r="658">
                                       <a:s r="656">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s> is </a:s>
                                       <a:s r="657">
                                          <a:s>&quot;Medication, Order&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> or </a:s>
                                    <a:s r="661">
                                       <a:s r="659">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s> is </a:s>
                                       <a:s r="660">
                                          <a:s>&quot;Medication, Discharge&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
           </a:s>
                              <a:s r="665">
                                 <a:s>return </a:s>
                                 <a:s r="664">
                                    <a:s>MedicationPeriod(</a:s>
                                    <a:s r="663">
                                       <a:s>M</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
       )</a:s>
                        </a:s>
                        <a:s>
         union </a:s>
                        <a:s r="680">
                           <a:s>(
           </a:s>
                           <a:s r="680">
                              <a:s>RolloutIntervals(
             </a:s>
                              <a:s r="679">
                                 <a:s>
                                    <a:s r="668">
                                       <a:s r="667">
                                          <a:s>
                                             <a:s>Medications</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> M</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
               </a:s>
                                 <a:s r="675">
                                    <a:s>where </a:s>
                                    <a:s r="675">
                                       <a:s r="671">
                                          <a:s r="669">
                                             <a:s>M</a:s>
                                          </a:s>
                                          <a:s> is </a:s>
                                          <a:s r="670">
                                             <a:s>&quot;Medication, Dispensed&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or </a:s>
                                       <a:s r="674">
                                          <a:s r="672">
                                             <a:s>M</a:s>
                                          </a:s>
                                          <a:s> is </a:s>
                                          <a:s r="673">
                                             <a:s>&quot;Medication, Administered&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
               </a:s>
                                 <a:s r="678">
                                    <a:s>return </a:s>
                                    <a:s r="677">
                                       <a:s>MedicationPeriod(</a:s>
                                       <a:s r="676">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
           )</a:s>
                           </a:s>
                           <a:s>
         )</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
     )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="682" locator="213:3-225:6" name="CumulativeDuration" xsi:type="FunctionRef">
            <operand localId="681" locator="213:22-224:10" xsi:type="Union">
               <operand localId="666" locator="213:22-217:8" xsi:type="Query">
                  <source localId="655" locator="214:10-214:22" alias="M">
                     <expression localId="654" locator="214:10-214:20" name="Medications" xsi:type="OperandRef"/>
                  </source>
                  <where localId="662" locator="215:12-215:73" xsi:type="Or">
                     <operand localId="658" locator="215:18-215:41" xsi:type="Is">
                        <operand localId="656" locator="215:18" name="M" xsi:type="AliasRef"/>
                        <isTypeSpecifier localId="657" locator="215:23-215:41" xmlns:ns13="urn:healthit-gov:qdm:v5_6" name="ns13:PositiveMedicationOrder" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                     <operand localId="661" locator="215:46-215:73" xsi:type="Is">
                        <operand localId="659" locator="215:46" name="M" xsi:type="AliasRef"/>
                        <isTypeSpecifier localId="660" locator="215:51-215:73" xmlns:ns14="urn:healthit-gov:qdm:v5_6" name="ns14:PositiveMedicationDischarge" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </where>
                  <return localId="665" locator="216:12-216:37">
                     <expression localId="664" locator="216:19-216:37" name="MedicationPeriod" xsi:type="FunctionRef">
                        <operand localId="663" locator="216:36" name="M" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </operand>
               <operand localId="680" locator="218:16-224:10" name="RolloutIntervals" xsi:type="FunctionRef">
                  <operand localId="679" locator="220:14-222:41" xsi:type="Query">
                     <source localId="668" locator="220:14-220:26" alias="M">
                        <expression localId="667" locator="220:14-220:24" name="Medications" xsi:type="OperandRef"/>
                     </source>
                     <where localId="675" locator="221:16-221:84" xsi:type="Or">
                        <operand localId="671" locator="221:22-221:49" xsi:type="Is">
                           <operand localId="669" locator="221:22" name="M" xsi:type="AliasRef"/>
                           <isTypeSpecifier localId="670" locator="221:27-221:49" xmlns:ns15="urn:healthit-gov:qdm:v5_6" name="ns15:PositiveMedicationDispensed" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                        <operand localId="674" locator="221:54-221:84" xsi:type="Is">
                           <operand localId="672" locator="221:54" name="M" xsi:type="AliasRef"/>
                           <isTypeSpecifier localId="673" locator="221:59-221:84" xmlns:ns16="urn:healthit-gov:qdm:v5_6" name="ns16:PositiveMedicationAdministered" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </where>
                     <return localId="678" locator="222:16-222:41">
                        <expression localId="677" locator="222:23-222:41" name="MedicationPeriod" xsi:type="FunctionRef">
                           <operand localId="676" locator="222:40" name="M" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </operand>
               </operand>
            </operand>
         </expression>
         <operand name="Medications">
            <operandTypeSpecifier localId="653" locator="208:69-212:7" xsi:type="ListTypeSpecifier">
               <elementType localId="652" locator="208:74-212:6" xsi:type="ChoiceTypeSpecifier">
                  <choice localId="648" locator="208:81-208:99" xmlns:ns17="urn:healthit-gov:qdm:v5_6" name="ns17:PositiveMedicationOrder" xsi:type="NamedTypeSpecifier"/>
                  <choice localId="649" locator="209:8-209:30" xmlns:ns18="urn:healthit-gov:qdm:v5_6" name="ns18:PositiveMedicationDispensed" xsi:type="NamedTypeSpecifier"/>
                  <choice localId="650" locator="210:8-210:30" xmlns:ns19="urn:healthit-gov:qdm:v5_6" name="ns19:PositiveMedicationDischarge" xsi:type="NamedTypeSpecifier"/>
                  <choice localId="651" locator="211:8-211:33" xmlns:ns20="urn:healthit-gov:qdm:v5_6" name="ns20:PositiveMedicationAdministered" xsi:type="NamedTypeSpecifier"/>
               </elementType>
            </operandTypeSpecifier>
         </operand>
      </def>
   </statements>
</library>
