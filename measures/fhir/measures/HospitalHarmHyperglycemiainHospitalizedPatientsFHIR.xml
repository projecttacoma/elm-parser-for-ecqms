<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,EnableResultTypes,DisableListDemotion,DisableListPromotion" xsi:type="a:CqlToElmInfo"/>
   <annotation libraryId="MATGlobalCommonFunctionsFHIR4" libraryVersion="6.1.000" startLine="344" startChar="19" endLine="344" endChar="53" message="Could not resolve membership operator for terminology target of the retrieve." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="397">
         <a:s>library HospitalHarmHyperglycemiainHospitalizedPatientsFHIR version '0.0.006'</a:s>
      </a:s>
   </annotation>
   <identifier id="HospitalHarmHyperglycemiainHospitalizedPatientsFHIR" version="0.0.006"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:56" localIdentifier="FHIRHelpers" path="FHIRHelpers" version="4.0.001">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.001' called FHIRHelpers</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="6:1-6:66" localIdentifier="SDE" path="SupplementalDataElementsFHIR4" version="2.0.000">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>SupplementalDataElementsFHIR4</a:s>
               </a:s>
               <a:s> version '2.0.000' called SDE</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="7:1-7:69" localIdentifier="Global" path="MATGlobalCommonFunctionsFHIR4" version="6.1.000">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>MATGlobalCommonFunctionsFHIR4</a:s>
               </a:s>
               <a:s> version '6.1.000' called Global</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="15" locator="19:1-19:49" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="15">
               <a:s>parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="14">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="13">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
            <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <parameterTypeSpecifier localId="14" locator="19:32-19:49" xsi:type="IntervalTypeSpecifier">
            <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <pointType localId="13" locator="19:41-19:48" resultTypeName="t:DateTime" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <codeSystems>
      <def localId="5" locator="9:1-9:38" resultTypeName="t:CodeSystem" name="LOINC" id="http://loinc.org" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>codesystem &quot;LOINC&quot;: 'http://loinc.org'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <valueSets>
      <def localId="6" locator="11:1-11:91" resultTypeName="t:ValueSet" name="birth date" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.560.100.4" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>valueset &quot;birth date&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.560.100.4'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="12:1-12:100" resultTypeName="t:ValueSet" name="Diabetes" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.103.12.1001" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>valueset &quot;Diabetes&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.103.12.1001'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="8" locator="13:1-13:100" resultTypeName="t:ValueSet" name="Encounter Inpatient" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="8">
               <a:s>valueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="9" locator="14:1-14:98" resultTypeName="t:ValueSet" name="Glucose lab test" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="9">
               <a:s>valueset &quot;Glucose lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="10" locator="15:1-15:117" resultTypeName="t:ValueSet" name="Hypoglycemics Treatment Medications" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1196.394" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>valueset &quot;Hypoglycemics Treatment Medications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1196.394'</a:s>
            </a:s>
         </annotation>
      </def>
   </valueSets>
   <codes>
      <def localId="12" locator="17:1-17:62" resultTypeName="t:Code" name="Birth date" id="21112-8" display="Birth date" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="12">
               <a:s>code &quot;Birth date&quot;: '21112-8' from </a:s>
               <a:s r="11">
                  <a:s>&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Birth date'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="11" locator="17:35-17:41" resultTypeName="t:CodeSystem" name="LOINC"/>
      </def>
   </codes>
   <contexts>
      <def locator="21:1-21:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="21:1-21:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="21:1-21:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="18" locator="23:1-24:21" name="SDE Ethnicity" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="18">
               <a:s>define &quot;SDE Ethnicity&quot;:
  </a:s>
               <a:s r="17">
                  <a:s r="16">
                     <a:s>SDE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="17">
                     <a:s>&quot;SDE Ethnicity&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="17" locator="24:3-24:21" name="SDE Ethnicity" libraryName="SDE" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def localId="21" locator="26:1-27:17" name="SDE Payer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="21">
               <a:s>define &quot;SDE Payer&quot;:
  </a:s>
               <a:s r="20">
                  <a:s r="19">
                     <a:s>SDE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="20">
                     <a:s>&quot;SDE Payer&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="code">
                  <elementType name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="period">
                  <elementType name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression localId="20" locator="27:3-27:17" name="SDE Payer" libraryName="SDE" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="code">
                     <elementType name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="period">
                     <elementType name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  </element>
               </elementType>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def localId="24" locator="29:1-30:16" name="SDE Race" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="24">
               <a:s>define &quot;SDE Race&quot;:
  </a:s>
               <a:s r="23">
                  <a:s r="22">
                     <a:s>SDE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="23">
                     <a:s>&quot;SDE Race&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="23" locator="30:3-30:16" name="SDE Race" libraryName="SDE" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def localId="27" locator="32:1-33:15" resultTypeName="t:Code" name="SDE Sex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="27">
               <a:s>define &quot;SDE Sex&quot;:
  </a:s>
               <a:s r="26">
                  <a:s r="25">
                     <a:s>SDE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="26">
                     <a:s>&quot;SDE Sex&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="26" locator="33:3-33:15" resultTypeName="t:Code" name="SDE Sex" libraryName="SDE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="31" locator="43:1-44:55" name="Inpatient Encounter During Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="31">
               <a:s>define &quot;Inpatient Encounter During Measurement Period&quot;:
  </a:s>
               <a:s r="30">
                  <a:s>
                     <a:s r="29">
                        <a:s r="28">
                           <a:s r="28">
                              <a:s>[Encounter: </a:s>
                              <a:s>
                                 <a:s>&quot;Encounter Inpatient&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterInpatient</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="30" locator="44:3-44:55" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="29" locator="44:3-44:55" alias="EncounterInpatient">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="28" locator="44:3-44:36" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" codeProperty="type" codeComparator="in" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes locator="44:15-44:35" resultTypeName="t:ValueSet" name="Encounter Inpatient" preserve="true" xsi:type="ValueSetRef"/>
               </expression>
            </source>
         </expression>
      </def>
      <def localId="42" locator="90:1-92:101" name="Qualifying Encounters" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="42">
               <a:s>define &quot;Qualifying Encounters&quot;:
  </a:s>
               <a:s r="41">
                  <a:s>
                     <a:s r="33">
                        <a:s r="32">
                           <a:s>
                              <a:s>&quot;Inpatient Encounter During Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> InpatientEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
        </a:s>
                  <a:s r="40">
                     <a:s>where </a:s>
                     <a:s r="40">
                        <a:s r="38">
                           <a:s>AgeInYearsAt (</a:s>
                           <a:s r="37">
                              <a:s>start of </a:s>
                              <a:s r="36">
                                 <a:s r="34">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="36">
                                    <a:s>&quot;HospitalizationWithObservation&quot;(</a:s>
                                    <a:s r="35">
                                       <a:s>InpatientEncounter</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="39">>=18</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="41" locator="91:3-92:101" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="33" locator="91:3-91:68" alias="InpatientEncounter">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="32" locator="91:3-91:49" name="Inpatient Encounter During Measurement Period" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="40" locator="92:9-92:101" resultTypeName="t:Boolean" xsi:type="GreaterOrEqual">
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="38" locator="92:15-92:97" resultTypeName="t:Integer" precision="Year" xsi:type="CalculateAgeAt">
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand xsi:type="ToDateTime">
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="37" locator="92:29-92:96" resultTypeName="t:DateTime" xsi:type="Start">
                     <signature xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="36" locator="92:38-92:96" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="35" locator="92:78-92:95" resultTypeName="fhir:Encounter" name="InpatientEncounter" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="39" locator="92:100-92:101" resultTypeName="t:Integer" valueType="t:Integer" value="18" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="52" locator="107:1-112:13" name="Qualifying Encounters With Hospitalization Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="52">
               <a:s>/**
 * Create paring of encounters to hospitalization period so this calculation can be inspected and the result 
 * can be reused, making the logic faster.*/
define &quot;Qualifying Encounters With Hospitalization Period&quot;:
  </a:s>
               <a:s r="51">
                  <a:s>
                     <a:s r="44">
                        <a:s r="43">
                           <a:s>
                              <a:s>&quot;Qualifying Encounters&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> QualifyingEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s r="50">
                     <a:s>return </a:s>
                     <a:s r="49">
                        <a:s>Tuple {
              </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="45">
                              <a:s>QualifyingEncounter</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
              </a:s>
                        <a:s>
                           <a:s>hospitalizationPeriod: </a:s>
                           <a:s r="48">
                              <a:s r="46">
                                 <a:s>Global</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="48">
                                 <a:s>&quot;HospitalizationWithObservation&quot; ( </a:s>
                                 <a:s r="47">
                                    <a:s>QualifyingEncounter</a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
            }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="encounter">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="hospitalizationPeriod">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression localId="51" locator="108:3-112:13" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="encounter">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="hospitalizationPeriod">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
               </elementType>
            </resultTypeSpecifier>
            <source localId="44" locator="108:3-108:45" alias="QualifyingEncounter">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="43" locator="108:3-108:25" name="Qualifying Encounters" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <return localId="50" locator="109:13-112:13">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="49" locator="109:20-112:13" xsi:type="Tuple">
                  <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </resultTypeSpecifier>
                  <element name="encounter">
                     <value localId="45" locator="110:26-110:44" resultTypeName="fhir:Encounter" name="QualifyingEncounter" xsi:type="AliasRef"/>
                  </element>
                  <element name="hospitalizationPeriod">
                     <value localId="48" locator="111:38-111:100" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="47" locator="111:80-111:98" resultTypeName="fhir:Encounter" name="QualifyingEncounter" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="76" locator="97:1-102:53" name="Qualifying Encounters With Existing Diabetes Diagnosis" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="76">
               <a:s>/**
 * Using the already calculated pairing of hospitalization periods with encounters, filter on ones with 
 * diabetes and return the encounter.*/
define &quot;Qualifying Encounters With Existing Diabetes Diagnosis&quot;:
  </a:s>
               <a:s r="75">
                  <a:s>
                     <a:s r="54">
                        <a:s r="53">
                           <a:s>
                              <a:s>&quot;Qualifying Encounters With Hospitalization Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterWithHospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="71">
                     <a:s>with </a:s>
                     <a:s r="56">
                        <a:s r="55">
                           <a:s r="55">
                              <a:s>[&quot;Condition&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Diabetes&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> DiabetesDiagnosis</a:s>
                     </a:s>
                     <a:s>
          such that </a:s>
                     <a:s r="70">
                        <a:s r="62">
                           <a:s r="58">
                              <a:s r="57">
                                 <a:s>DiabetesDiagnosis</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="58">
                                 <a:s>verificationStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="61">
                              <a:s>ToConcept(</a:s>
                              <a:s r="60">
                                 <a:s r="59">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="60">
                                    <a:s>&quot;confirmed&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
          and </a:s>
                        <a:s r="69">
                           <a:s>(</a:s>
                           <a:s r="69">
                              <a:s r="65">
                                 <a:s r="63">
                                    <a:s>Global</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="65">
                                    <a:s>&quot;Prevalence Period&quot;(</a:s>
                                    <a:s r="64">
                                       <a:s>DiabetesDiagnosis</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="69"> starts before </a:s>
                              <a:s r="68">
                                 <a:s>end of </a:s>
                                 <a:s r="67">
                                    <a:s r="66">
                                       <a:s>EncounterWithHospitalization</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="67">
                                       <a:s>hospitalizationPeriod</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="74">
                     <a:s>return </a:s>
                     <a:s r="73">
                        <a:s r="72">
                           <a:s>EncounterWithHospitalization</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="73">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="75" locator="98:3-102:53" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="54" locator="98:3-98:82" alias="EncounterWithHospitalization">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="53" locator="98:3-98:53" name="Qualifying Encounters With Hospitalization Period" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="hospitalizationPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship localId="71" locator="99:9-101:133" alias="DiabetesDiagnosis" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="55" locator="99:14-99:38" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes locator="99:28-99:37" resultTypeName="t:ValueSet" name="Diabetes" preserve="true" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat localId="70" locator="100:21-101:133" resultTypeName="t:Boolean" xsi:type="And">
                  <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="62" locator="100:21-100:88" resultTypeName="t:Boolean" xsi:type="Equivalent">
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="58" locator="100:21-100:56" resultTypeName="fhir:CodeableConcept" path="verificationStatus" scope="DiabetesDiagnosis" xsi:type="Property"/>
                     </operand>
                     <operand localId="61" locator="100:60-100:88" resultTypeName="t:Concept" xsi:type="ToConcept">
                        <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="60" locator="100:70-100:87" resultTypeName="t:Code" name="confirmed" libraryName="Global" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand localId="69" locator="101:15-101:133" resultTypeName="t:Boolean" xsi:type="Before">
                     <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand locator="101:62-101:67" xsi:type="Start">
                        <signature xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="65" locator="101:16-101:60" name="Prevalence Period" libraryName="Global" xsi:type="FunctionRef">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <signature name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="64" locator="101:43-101:59" resultTypeName="fhir:Condition" name="DiabetesDiagnosis" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                     <operand localId="68" locator="101:76-101:132" resultTypeName="t:DateTime" xsi:type="End">
                        <signature xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="67" locator="101:83-101:132" path="hospitalizationPeriod" scope="EncounterWithHospitalization" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <return localId="74" locator="102:9-102:53">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="73" locator="102:16-102:53" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithHospitalization" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="98" locator="117:1-122:57" name="Qualifying Encounters With Hypoglycemic Medication" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="98">
               <a:s>/**
 * Using the already calculated pairing of hospitalization periods with encounters, filter on ones with 
 * hypoglycemic medicatons and return the encounter.*/
define &quot;Qualifying Encounters With Hypoglycemic Medication&quot;:
  </a:s>
               <a:s r="97">
                  <a:s>
                     <a:s>from </a:s>
                     <a:s r="79">
                        <a:s r="78">
                           <a:s>
                              <a:s>&quot;Qualifying Encounters With Hospitalization Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterWithHospitalization</a:s>
                     </a:s>
                     <a:s>,
      </a:s>
                     <a:s r="81">
                        <a:s r="80">
                           <a:s r="80">
                              <a:s>[&quot;MedicationAdministration&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Hypoglycemics Treatment Medications&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HypoglycemicMedication</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s r="93">
                     <a:s>where </a:s>
                     <a:s r="93">
                        <a:s r="85">
                           <a:s r="83">
                              <a:s r="82">
                                 <a:s>HypoglycemicMedication</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="83">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="84">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
           and </a:s>
                        <a:s r="92">
                           <a:s r="89">
                              <a:s r="86">
                                 <a:s>Global</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="89">
                                 <a:s>&quot;Normalize Interval&quot; ( </a:s>
                                 <a:s r="88">
                                    <a:s r="87">
                                       <a:s>HypoglycemicMedication</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="88">
                                       <a:s>effective</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="92">   during </a:s>
                           <a:s r="91">
                              <a:s r="90">
                                 <a:s>EncounterWithHospitalization</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="91">
                                 <a:s>hospitalizationPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>   
            </a:s>
                  <a:s r="96">
                     <a:s>return </a:s>
                     <a:s r="95">
                        <a:s r="94">
                           <a:s>EncounterWithHospitalization</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="95">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="97" locator="118:3-122:57" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="79" locator="118:8-118:87" alias="EncounterWithHospitalization">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="78" locator="118:8-118:58" name="Qualifying Encounters With Hospitalization Period" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="hospitalizationPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <source localId="81" locator="119:7-119:96" alias="HypoglycemicMedication">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:MedicationAdministration" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="80" locator="119:7-119:73" xsi:type="Union">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationAdministration" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <signature xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationAdministration" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <signature xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:MedicationAdministration" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand dataType="fhir:MedicationAdministration" templateId="http://hl7.org/fhir/StructureDefinition/MedicationAdministration" codeProperty="medication" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="119:36-119:72" resultTypeName="t:ValueSet" name="Hypoglycemics Treatment Medications" preserve="true" xsi:type="ValueSetRef"/>
                  </operand>
                  <operand locator="119:7-119:73" dataType="fhir:MedicationAdministration" templateId="http://hl7.org/fhir/StructureDefinition/MedicationAdministration" codeProperty="medication" codeComparator="in" xsi:type="Retrieve">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="fhir:MedicationAdministration" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <codes locator="119:36-119:72" resultTypeName="t:ValueSet" name="Hypoglycemics Treatment Medications" preserve="true" xsi:type="ValueSetRef"/>
                  </operand>
               </expression>
            </source>
            <where localId="93" locator="120:13-121:139" resultTypeName="t:Boolean" xsi:type="And">
               <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <operand localId="85" locator="120:19-120:61" resultTypeName="t:Boolean" xsi:type="Equal">
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:MedicationAdministrationStatus" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="83" locator="120:19-120:47" resultTypeName="fhir:MedicationAdministrationStatus" path="status" scope="HypoglycemicMedication" xsi:type="Property"/>
                  </operand>
                  <operand localId="84" locator="120:51-120:61" resultTypeName="t:String" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="92" locator="121:16-121:139" resultTypeName="t:Boolean" xsi:type="IncludedIn">
                  <signature xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <signature xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="89" locator="121:16-121:79" name="Normalize Interval" libraryName="Global" xsi:type="FunctionRef">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <signature xsi:type="ChoiceTypeSpecifier">
                        <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                        <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                        <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                        <choice name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <choice name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                        <choice name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="88" locator="121:46-121:77" path="effective" scope="HypoglycemicMedication" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                           <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </operand>
                  <operand localId="91" locator="121:90-121:139" path="hospitalizationPeriod" scope="EncounterWithHospitalization" xsi:type="Property">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                  </operand>
               </operand>
            </where>
            <return localId="96" locator="122:13-122:57">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="95" locator="122:20-122:57" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithHospitalization" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="127" locator="127:1-133:49" name="Qualifying Encounters With Elevated Blood Glucose Lab" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="127">
               <a:s>/**
 * Using the already calculated pairing of hospitalization periods with encounters, filter on ones with 
 * any elevated (>= 200) blood glucose reading during the hospitalization*/
define &quot;Qualifying Encounters With Elevated Blood Glucose Lab&quot;:
  </a:s>
               <a:s r="126">
                  <a:s>
                     <a:s r="102">
                        <a:s r="101">
                           <a:s>
                              <a:s>&quot;Qualifying Encounters With Hospitalization Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterWithHospitalization</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="122">
                     <a:s>with </a:s>
                     <a:s r="104">
                        <a:s r="103">
                           <a:s r="103">
                              <a:s>[&quot;Observation&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Glucose lab test&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> BloodGlucoseLab</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="121">
                        <a:s r="116">
                           <a:s r="111">
                              <a:s r="108">
                                 <a:s r="106">
                                    <a:s r="105">
                                       <a:s>BloodGlucoseLab</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="106">
                                       <a:s>effective</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="107">
                                    <a:s>dateTime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="111"> during </a:s>
                              <a:s r="110">
                                 <a:s r="109">
                                    <a:s>EncounterWithHospitalization</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="110">
                                    <a:s>hospitalizationPeriod</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="115">
                              <a:s r="113">
                                 <a:s r="112">
                                    <a:s>BloodGlucoseLab</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="113">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="114">
                                 <a:s>'final'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="120">
                           <a:s r="118">
                              <a:s r="117">
                                 <a:s>BloodGlucoseLab</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="118">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> >= </a:s>
                           <a:s r="119">
                              <a:s>200 'mg/dL'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="125">
                     <a:s>return </a:s>
                     <a:s r="124">
                        <a:s r="123">
                           <a:s>EncounterWithHospitalization</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="124">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="126" locator="128:3-133:49" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="102" locator="128:3-128:82" alias="EncounterWithHospitalization">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="101" locator="128:3-128:53" name="Qualifying Encounters With Hospitalization Period" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="hospitalizationPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship localId="122" locator="129:5-132:48" alias="BloodGlucoseLab" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="103" locator="129:10-129:44" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes locator="129:26-129:43" resultTypeName="t:ValueSet" name="Glucose lab test" preserve="true" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat localId="121" locator="130:17-132:48" resultTypeName="t:Boolean" xsi:type="And">
                  <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="116" locator="130:17-131:44" resultTypeName="t:Boolean" xsi:type="And">
                     <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="111" locator="130:17-130:111" resultTypeName="t:Boolean" xsi:type="In">
                        <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <signature xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="108" locator="130:17-130:53" resultTypeName="fhir:dateTime" strict="false" xsi:type="As">
                              <operand localId="106" locator="130:17-130:41" path="effective" scope="BloodGlucoseLab" xsi:type="Property">
                                 <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                    <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                                    <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                                 </resultTypeSpecifier>
                              </operand>
                              <asTypeSpecifier localId="107" locator="130:46-130:53" resultTypeName="fhir:dateTime" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </operand>
                        <operand localId="110" locator="130:62-130:111" path="hospitalizationPeriod" scope="EncounterWithHospitalization" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </operand>
                     <operand localId="115" locator="131:13-131:44" resultTypeName="t:Boolean" xsi:type="Equal">
                        <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature name="fhir:ObservationStatus" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="113" locator="131:13-131:34" resultTypeName="fhir:ObservationStatus" path="status" scope="BloodGlucoseLab" xsi:type="Property"/>
                        </operand>
                        <operand localId="114" locator="131:38-131:44" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="120" locator="132:13-132:48" resultTypeName="t:Boolean" xsi:type="GreaterOrEqual">
                     <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        <operand asType="fhir:Quantity" xsi:type="As">
                           <operand localId="118" locator="132:13-132:33" path="value" scope="BloodGlucoseLab" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                 <choice name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:integer" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:Ratio" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:SampledData" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:time" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="119" locator="132:38-132:48" resultTypeName="t:Quantity" value="200" unit="mg/dL" xsi:type="Quantity"/>
                  </operand>
               </suchThat>
            </relationship>
            <return localId="125" locator="133:5-133:49">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="124" locator="133:12-133:49" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithHospitalization" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="130" locator="38:1-41:73" name="Initial Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="130">
               <a:s>define &quot;Initial Population&quot;:
  </a:s>
               <a:s r="129">
                  <a:s r="100">
                     <a:s r="77">
                        <a:s>&quot;Qualifying Encounters With Existing Diabetes Diagnosis&quot;</a:s>
                     </a:s>
                     <a:s>
            union </a:s>
                     <a:s r="99">
                        <a:s>&quot;Qualifying Encounters With Hypoglycemic Medication&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            union </a:s>
                  <a:s r="128">
                     <a:s>&quot;Qualifying Encounters With Elevated Blood Glucose Lab&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="129" locator="39:3-41:73" xsi:type="Union">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="100" locator="39:3-40:70" xsi:type="Union">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="77" locator="39:3-39:58" name="Qualifying Encounters With Existing Diabetes Diagnosis" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </operand>
               <operand localId="99" locator="40:19-40:70" name="Qualifying Encounters With Hypoglycemic Medication" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </operand>
            </operand>
            <operand localId="128" locator="41:19-41:73" name="Qualifying Encounters With Elevated Blood Glucose Lab" xsi:type="ExpressionRef">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
            </operand>
         </expression>
      </def>
      <def localId="132" locator="35:1-36:22" name="Denominator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="132">
               <a:s>define &quot;Denominator&quot;:
  </a:s>
               <a:s r="131">
                  <a:s>&quot;Initial Population&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="131" locator="36:3-36:22" name="Initial Population" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def localId="153" locator="164:1-167:4" name="Crop Interval to 10 Days" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="153">
               <a:s>/**
 * Crops an interval to a maximum length of 10 days.*/
define function &quot;Crop Interval to 10 Days&quot;(Period </a:s>
               <a:s r="141">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="140">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="152">
                  <a:s r="152">
                     <a:s>Interval[</a:s>
                     <a:s r="143">
                        <a:s>start of </a:s>
                        <a:s r="142">
                           <a:s>Period</a:s>
                        </a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="151">
                        <a:s>Min(</a:s>
                        <a:s r="150">
                           <a:s>{ 
    </a:s>
                           <a:s r="145">
                              <a:s>end of </a:s>
                              <a:s r="144">
                                 <a:s>Period</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="149">
                              <a:s r="147">
                                 <a:s>start of </a:s>
                                 <a:s r="146">
                                    <a:s>Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="148">
                                 <a:s>10 days</a:s>
                              </a:s>
                           </a:s>
                           <a:s> }</a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s>]</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
            <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="152" locator="165:3-167:4" lowClosed="true" highClosed="true" xsi:type="Interval">
            <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <low localId="143" locator="165:12-165:26" resultTypeName="t:DateTime" xsi:type="Start">
               <signature xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="142" locator="165:21-165:26" name="Period" xsi:type="OperandRef">
                  <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </operand>
            </low>
            <high localId="151" locator="165:29-167:3" resultTypeName="t:DateTime" xsi:type="Min">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="150" locator="165:33-166:46" xsi:type="List">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <element localId="145" locator="166:5-166:17" resultTypeName="t:DateTime" xsi:type="End">
                     <signature xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="144" locator="166:12-166:17" name="Period" xsi:type="OperandRef">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </element>
                  <element localId="149" locator="166:20-166:44" resultTypeName="t:DateTime" xsi:type="Add">
                     <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="147" locator="166:20-166:34" resultTypeName="t:DateTime" xsi:type="Start">
                        <signature xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="146" locator="166:29-166:34" name="Period" xsi:type="OperandRef">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </operand>
                     <operand localId="148" locator="166:38-166:44" resultTypeName="t:Quantity" value="10" unit="days" xsi:type="Quantity"/>
                  </element>
               </source>
            </high>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier localId="141" locator="164:51-164:68" xsi:type="IntervalTypeSpecifier">
               <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <pointType localId="140" locator="164:60-164:67" resultTypeName="t:DateTime" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="179" locator="195:1-199:20" name="Interval To Day Numbers" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="179">
               <a:s>/**
 * Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for
 * the final day if it is less than 24 hours. This also includes the first 24 hour period.*/
define function &quot;Interval To Day Numbers&quot;(Period </a:s>
               <a:s r="164">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="163">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="178">
                  <a:s r="178">
                     <a:s>
                        <a:s r="174">
                           <a:s r="173">
                              <a:s>( </a:s>
                              <a:s r="173">
                                 <a:s>expand </a:s>
                                 <a:s r="172">
                                    <a:s>{ </a:s>
                                    <a:s r="171">
                                       <a:s r="165">Interval[1, </a:s>
                                       <a:s r="170">
                                          <a:s>days between </a:s>
                                          <a:s r="167">
                                             <a:s>start of </a:s>
                                             <a:s r="166">
                                                <a:s>Period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> and 
  </a:s>
                                          <a:s r="169">
                                             <a:s>end of </a:s>
                                             <a:s r="168">
                                                <a:s>Period</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                    <a:s>}</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                           <a:s> DayExpand</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="177">
                        <a:s>return 
    </a:s>
                        <a:s r="176">
                           <a:s>end of </a:s>
                           <a:s r="175">
                              <a:s>DayExpand</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="178" locator="196:3-199:20" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="174" locator="196:3-197:29" alias="DayExpand">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="173" locator="196:3-197:19" xsi:type="Expand">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </resultTypeSpecifier>
                  <signature xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </signature>
                  <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="172" locator="196:12-197:17" xsi:type="List">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </resultTypeSpecifier>
                     <element localId="171" locator="196:14-197:16" lowClosed="true" highClosed="true" xsi:type="Interval">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <low localId="165" locator="196:23" resultTypeName="t:Integer" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        <high localId="170" locator="196:26-197:15" resultTypeName="t:Integer" precision="Day" xsi:type="DurationBetween">
                           <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="167" locator="196:39-196:53" resultTypeName="t:DateTime" xsi:type="Start">
                              <signature xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <operand localId="166" locator="196:48-196:53" name="Period" xsi:type="OperandRef">
                                 <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </resultTypeSpecifier>
                              </operand>
                           </operand>
                           <operand localId="169" locator="197:3-197:15" resultTypeName="t:DateTime" xsi:type="End">
                              <signature xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <operand localId="168" locator="197:10-197:15" name="Period" xsi:type="OperandRef">
                                 <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </resultTypeSpecifier>
                              </operand>
                           </operand>
                        </high>
                     </element>
                  </operand>
                  <operand resultTypeName="t:Quantity" xsi:type="Null"/>
               </expression>
            </source>
            <return localId="177" locator="198:5-199:20">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="176" locator="199:5-199:20" resultTypeName="t:Integer" xsi:type="End">
                  <signature xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="175" locator="199:12-199:20" name="DayExpand" xsi:type="AliasRef">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                  </operand>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier localId="164" locator="195:50-195:67" xsi:type="IntervalTypeSpecifier">
               <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <pointType localId="163" locator="195:59-195:66" resultTypeName="t:DateTime" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="213" locator="171:1-181:5" name="Days In Period" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="213">
               <a:s>/**
 * Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.*/
define function &quot;Days In Period&quot;(Period </a:s>
               <a:s r="161">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="160">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="212">
                  <a:s r="212">
                     <a:s>
                        <a:s r="181">
                           <a:s r="180">
                              <a:s>( </a:s>
                              <a:s r="180">
                                 <a:s>&quot;Interval To Day Numbers&quot;(</a:s>
                                 <a:s r="162">
                                    <a:s>Period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> DayIndex</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="190">
                           <a:s>startPeriod: </a:s>
                           <a:s r="189">
                              <a:s r="183">
                                 <a:s>start of </a:s>
                                 <a:s r="182">
                                    <a:s>Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="188">
                                 <a:s>( </a:s>
                                 <a:s r="188">
                                    <a:s r="184">
                                       <a:s>24 hours</a:s>
                                    </a:s>
                                    <a:s> * </a:s>
                                    <a:s r="187">
                                       <a:s>( </a:s>
                                       <a:s r="187">
                                          <a:s r="185">
                                             <a:s>DayIndex</a:s>
                                          </a:s>
                                          <a:s r="186"> - 1</a:s>
                                       </a:s>
                                       <a:s> )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="205">
                           <a:s>endPeriod: </a:s>
                           <a:s r="204">
                              <a:s>if </a:s>
                              <a:s r="196">
                                 <a:s>( </a:s>
                                 <a:s r="196">
                                    <a:s r="194">
                                       <a:s>hours between </a:s>
                                       <a:s r="191">
                                          <a:s>startPeriod</a:s>
                                       </a:s>
                                       <a:s> and 
      </a:s>
                                       <a:s r="193">
                                          <a:s>end of </a:s>
                                          <a:s r="192">
                                             <a:s>Period</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="195"> &lt; 24</a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                              <a:s> then </a:s>
                              <a:s r="197">
                                 <a:s>startPeriod</a:s>
                              </a:s>
                              <a:s> 
      else </a:s>
                              <a:s r="203">
                                 <a:s r="199">
                                    <a:s>start of </a:s>
                                    <a:s r="198">
                                       <a:s>Period</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="202">
                                    <a:s>( </a:s>
                                    <a:s r="202">
                                       <a:s r="200">
                                          <a:s>24 hours</a:s>
                                       </a:s>
                                       <a:s> * </a:s>
                                       <a:s r="201">
                                          <a:s>DayIndex</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> )</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="211">
                        <a:s>return </a:s>
                        <a:s r="210">
                           <a:s>Tuple {
      </a:s>
                           <a:s>
                              <a:s>dayIndex: </a:s>
                              <a:s r="206">
                                 <a:s>DayIndex</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>dayPeriod: </a:s>
                              <a:s r="209">
                                 <a:s>Interval[</a:s>
                                 <a:s r="207">
                                    <a:s>startPeriod</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="208">
                                    <a:s>endPeriod</a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    }</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="dayIndex">
                  <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="dayPeriod">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression localId="212" locator="172:3-181:5" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="dayIndex">
                     <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="dayPeriod">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
               </elementType>
            </resultTypeSpecifier>
            <source localId="181" locator="172:3-172:47" alias="DayIndex">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="180" locator="172:3-172:38" name="Interval To Day Numbers" xsi:type="FunctionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <signature xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="162" locator="172:31-172:36" name="Period" xsi:type="OperandRef">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                  </operand>
               </expression>
            </source>
            <let localId="190" locator="173:9-173:70" resultTypeName="t:DateTime" identifier="startPeriod">
               <expression localId="189" locator="173:22-173:70" resultTypeName="t:DateTime" xsi:type="Add">
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="183" locator="173:22-173:36" resultTypeName="t:DateTime" xsi:type="Start">
                     <signature xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="182" locator="173:31-173:36" name="Period" xsi:type="OperandRef">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </operand>
                  <operand localId="188" locator="173:40-173:70" resultTypeName="t:Quantity" xsi:type="Multiply">
                     <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="184" locator="173:42-173:49" resultTypeName="t:Quantity" value="24" unit="hours" xsi:type="Quantity"/>
                     <operand xsi:type="ToQuantity">
                        <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="187" locator="173:53-173:68" resultTypeName="t:Integer" xsi:type="Subtract">
                           <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="185" locator="173:55-173:62" resultTypeName="t:Integer" name="DayIndex" xsi:type="AliasRef"/>
                           <operand localId="186" locator="173:66" resultTypeName="t:Integer" valueType="t:Integer" value="1" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
               </expression>
            </let>
            <let localId="205" locator="174:5-177:52" resultTypeName="t:DateTime" identifier="endPeriod">
               <expression localId="204" locator="174:16-177:52" resultTypeName="t:DateTime" xsi:type="If">
                  <condition localId="196" locator="174:19-176:5" resultTypeName="t:Boolean" xsi:type="Less">
                     <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="194" locator="174:21-175:19" resultTypeName="t:Integer" precision="Hour" xsi:type="DurationBetween">
                        <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="191" locator="174:35-174:45" resultTypeName="t:DateTime" name="startPeriod" xsi:type="QueryLetRef"/>
                        <operand localId="193" locator="175:7-175:19" resultTypeName="t:DateTime" xsi:type="End">
                           <signature xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <operand localId="192" locator="175:14-175:19" name="Period" xsi:type="OperandRef">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="195" locator="175:23-175:24" resultTypeName="t:Integer" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </condition>
                  <then localId="197" locator="176:12-176:22" resultTypeName="t:DateTime" name="startPeriod" xsi:type="QueryLetRef"/>
                  <else localId="203" locator="177:12-177:52" resultTypeName="t:DateTime" xsi:type="Add">
                     <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="199" locator="177:12-177:26" resultTypeName="t:DateTime" xsi:type="Start">
                        <signature xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="198" locator="177:21-177:26" name="Period" xsi:type="OperandRef">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </operand>
                     <operand localId="202" locator="177:30-177:52" resultTypeName="t:Quantity" xsi:type="Multiply">
                        <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="200" locator="177:32-177:39" resultTypeName="t:Quantity" value="24" unit="hours" xsi:type="Quantity"/>
                        <operand xsi:type="ToQuantity">
                           <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="201" locator="177:43-177:50" resultTypeName="t:Integer" name="DayIndex" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </else>
               </expression>
            </let>
            <return localId="211" locator="178:5-181:5">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="dayIndex">
                        <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="dayPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="210" locator="178:12-181:5" xsi:type="Tuple">
                  <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                     <element name="dayIndex">
                        <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="dayPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </resultTypeSpecifier>
                  <element name="dayIndex">
                     <value localId="206" locator="179:17-179:24" resultTypeName="t:Integer" name="DayIndex" xsi:type="AliasRef"/>
                  </element>
                  <element name="dayPeriod">
                     <value localId="209" locator="180:18-180:50" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <low localId="207" locator="180:27-180:37" resultTypeName="t:DateTime" name="startPeriod" xsi:type="QueryLetRef"/>
                        <high localId="208" locator="180:40-180:48" resultTypeName="t:DateTime" name="endPeriod" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="Period">
            <operandTypeSpecifier localId="161" locator="171:41-171:58" xsi:type="IntervalTypeSpecifier">
               <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <pointType localId="160" locator="171:50-171:57" resultTypeName="t:DateTime" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="218" locator="58:1-67:13" name="Pertinent Encounters With Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="218">
               <a:s>/***/
define &quot;Pertinent Encounters With Days&quot;:
  </a:s>
               <a:s r="217">
                  <a:s>
                     <a:s r="134">
                        <a:s r="133">
                           <a:s>
                              <a:s>&quot;Initial Population&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> PertinentEncounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="138">
                        <a:s>period: </a:s>
                        <a:s r="137">
                           <a:s r="135">
                              <a:s>Global</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="137">
                              <a:s>&quot;HospitalizationWithObservation&quot; ( </a:s>
                              <a:s r="136">
                                 <a:s>PertinentEncounter</a:s>
                              </a:s>
                              <a:s> )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
            </a:s>
                     <a:s r="155">
                        <a:s>relevantPeriod: </a:s>
                        <a:s r="154">
                           <a:s>&quot;Crop Interval to 10 Days&quot;(</a:s>
                           <a:s r="139">
                              <a:s>period</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s r="216">
                     <a:s>return </a:s>
                     <a:s r="215">
                        <a:s>Tuple {
              </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="156">
                              <a:s>PertinentEncounter</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
              </a:s>
                        <a:s>
                           <a:s>hospitalizationPeriod: </a:s>
                           <a:s r="157">
                              <a:s>period</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
              </a:s>
                        <a:s>
                           <a:s>relevantPeriod: </a:s>
                           <a:s r="158">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
              </a:s>
                        <a:s>
                           <a:s>relevantDays: </a:s>
                           <a:s r="214">
                              <a:s>&quot;Days In Period&quot;(</a:s>
                              <a:s r="159">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
            }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="encounter">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="hospitalizationPeriod">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </element>
               <element name="relevantPeriod">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </element>
               <element name="relevantDays">
                  <elementType xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="dayIndex">
                           <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="dayPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </elementType>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression localId="217" locator="59:3-67:13" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="encounter">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="hospitalizationPeriod">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
                  <element name="relevantPeriod">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
                  <element name="relevantDays">
                     <elementType xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </elementType>
                     </elementType>
                  </element>
               </elementType>
            </resultTypeSpecifier>
            <source localId="134" locator="59:3-59:41" alias="PertinentEncounter">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="133" locator="59:3-59:22" name="Initial Population" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <let localId="138" locator="60:17-60:86" identifier="period">
               <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="137" locator="60:25-60:86" name="HospitalizationWithObservation" libraryName="Global" xsi:type="FunctionRef">
                  <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="136" locator="60:67-60:84" resultTypeName="fhir:Encounter" name="PertinentEncounter" xsi:type="AliasRef"/>
               </expression>
            </let>
            <let localId="155" locator="61:13-61:62" identifier="relevantPeriod">
               <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="154" locator="61:29-61:62" name="Crop Interval to 10 Days" xsi:type="FunctionRef">
                  <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <signature xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="139" locator="61:56-61:61" name="period" xsi:type="QueryLetRef">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                  </operand>
               </expression>
            </let>
            <return localId="216" locator="62:13-67:13">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="215" locator="62:20-67:13" xsi:type="Tuple">
                  <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </resultTypeSpecifier>
                  <element name="encounter">
                     <value localId="156" locator="63:26-63:43" resultTypeName="fhir:Encounter" name="PertinentEncounter" xsi:type="AliasRef"/>
                  </element>
                  <element name="hospitalizationPeriod">
                     <value localId="157" locator="64:38-64:43" name="period" xsi:type="QueryLetRef">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </value>
                  </element>
                  <element name="relevantPeriod">
                     <value localId="158" locator="65:31-65:44" name="relevantPeriod" xsi:type="QueryLetRef">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </value>
                  </element>
                  <element name="relevantDays">
                     <value localId="214" locator="66:29-66:60" name="Days In Period" xsi:type="FunctionRef">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                        <signature xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="159" locator="66:46-66:59" name="relevantPeriod" xsi:type="QueryLetRef">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="296" locator="135:1-160:5" name="Pertinent Encounters With Glucose Result Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="296">
               <a:s>define &quot;Pertinent Encounters With Glucose Result Days&quot;:
  </a:s>
               <a:s r="295">
                  <a:s>
                     <a:s r="220">
                        <a:s r="219">
                           <a:s>
                              <a:s>&quot;Pertinent Encounters With Days&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> PertinentEncounterDays</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="294">
                     <a:s>return </a:s>
                     <a:s r="293">
                        <a:s>Tuple {
      </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="222">
                              <a:s r="221">
                                 <a:s>PertinentEncounterDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="222">
                                 <a:s>encounter</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantPeriod: </a:s>
                           <a:s r="224">
                              <a:s r="223">
                                 <a:s>PertinentEncounterDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="224">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>relevantDays: </a:s>
                           <a:s r="292">
                              <a:s>( </a:s>
                              <a:s r="292">
                                 <a:s>
                                    <a:s r="226">
                                       <a:s r="225">
                                          <a:s>
                                             <a:s>PertinentEncounterDays.relevantDays</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> EncounterDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
          </a:s>
                                 <a:s r="291">
                                    <a:s>return </a:s>
                                    <a:s r="290">
                                       <a:s>Tuple {
            </a:s>
                                       <a:s>
                                          <a:s>dayIndex: </a:s>
                                          <a:s r="228">
                                             <a:s r="227">
                                                <a:s>EncounterDay</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="228">
                                                <a:s>dayIndex</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>dayPeriod: </a:s>
                                          <a:s r="230">
                                             <a:s r="229">
                                                <a:s>EncounterDay</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="230">
                                                <a:s>dayPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>hasSevereResult: </a:s>
                                          <a:s r="251">
                                             <a:s>exists </a:s>
                                             <a:s r="250">
                                                <a:s>( </a:s>
                                                <a:s r="250">
                                                   <a:s>
                                                      <a:s r="232">
                                                         <a:s r="231">
                                                            <a:s r="231">
                                                               <a:s>[&quot;Observation&quot;: </a:s>
                                                               <a:s>
                                                                  <a:s>&quot;Glucose lab test&quot;</a:s>
                                                               </a:s>
                                                               <a:s>]</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> BloodGlucoseLab1</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
                </a:s>
                                                   <a:s r="249">
                                                      <a:s>where </a:s>
                                                      <a:s r="249">
                                                         <a:s r="241">
                                                            <a:s r="236">
                                                               <a:s r="234">
                                                                  <a:s r="233">
                                                                     <a:s>BloodGlucoseLab1</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="234">
                                                                     <a:s>status</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> = </a:s>
                                                               <a:s r="235">
                                                                  <a:s>'final'</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s>
                  and </a:s>
                                                            <a:s r="240">
                                                               <a:s r="238">
                                                                  <a:s r="237">
                                                                     <a:s>BloodGlucoseLab1</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="238">
                                                                     <a:s>value</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> > </a:s>
                                                               <a:s r="239">
                                                                  <a:s>300 'mg/dL'</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>
                  and </a:s>
                                                         <a:s r="248">
                                                            <a:s r="245">
                                                               <a:s r="243">
                                                                  <a:s r="242">
                                                                     <a:s>BloodGlucoseLab1</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="243">
                                                                     <a:s>effective</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> as </a:s>
                                                               <a:s r="244">
                                                                  <a:s>dateTime</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="248"> during </a:s>
                                                            <a:s r="247">
                                                               <a:s r="246">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="247">
                                                                  <a:s>dayPeriod</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
            )</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>hasElevatedResult: </a:s>
                                          <a:s r="272">
                                             <a:s>exists </a:s>
                                             <a:s r="271">
                                                <a:s>( </a:s>
                                                <a:s r="271">
                                                   <a:s>
                                                      <a:s r="253">
                                                         <a:s r="252">
                                                            <a:s r="252">
                                                               <a:s>[&quot;Observation&quot;: </a:s>
                                                               <a:s>
                                                                  <a:s>&quot;Glucose lab test&quot;</a:s>
                                                               </a:s>
                                                               <a:s>]</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> BloodGlucoseLab2</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
                </a:s>
                                                   <a:s r="270">
                                                      <a:s>where </a:s>
                                                      <a:s r="270">
                                                         <a:s r="262">
                                                            <a:s r="257">
                                                               <a:s r="255">
                                                                  <a:s r="254">
                                                                     <a:s>BloodGlucoseLab2</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="255">
                                                                     <a:s>status</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> = </a:s>
                                                               <a:s r="256">
                                                                  <a:s>'final'</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s>
                  and </a:s>
                                                            <a:s r="261">
                                                               <a:s r="259">
                                                                  <a:s r="258">
                                                                     <a:s>BloodGlucoseLab2</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="259">
                                                                     <a:s>value</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> >= </a:s>
                                                               <a:s r="260">
                                                                  <a:s>200 'mg/dL'</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>
                  and </a:s>
                                                         <a:s r="269">
                                                            <a:s r="266">
                                                               <a:s r="264">
                                                                  <a:s r="263">
                                                                     <a:s>BloodGlucoseLab2</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="264">
                                                                     <a:s>effective</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> as </a:s>
                                                               <a:s r="265">
                                                                  <a:s>dateTime</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="269"> during </a:s>
                                                            <a:s r="268">
                                                               <a:s r="267">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="268">
                                                                  <a:s>dayPeriod</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
            )</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>,
            </a:s>
                                       <a:s>
                                          <a:s>hasNoResult: </a:s>
                                          <a:s r="289">
                                             <a:s>not </a:s>
                                             <a:s r="288">
                                                <a:s>exists </a:s>
                                                <a:s r="287">
                                                   <a:s>( </a:s>
                                                   <a:s r="287">
                                                      <a:s>
                                                         <a:s r="274">
                                                            <a:s r="273">
                                                               <a:s r="273">
                                                                  <a:s>[&quot;Observation&quot;: </a:s>
                                                                  <a:s>
                                                                     <a:s>&quot;Glucose lab test&quot;</a:s>
                                                                  </a:s>
                                                                  <a:s>]</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> BloodGlucoseLab3</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>
                </a:s>
                                                      <a:s r="286">
                                                         <a:s>where </a:s>
                                                         <a:s r="286">
                                                            <a:s r="278">
                                                               <a:s r="276">
                                                                  <a:s r="275">
                                                                     <a:s>BloodGlucoseLab3</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="276">
                                                                     <a:s>status</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> = </a:s>
                                                               <a:s r="277">
                                                                  <a:s>'final'</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s>
                  and </a:s>
                                                            <a:s r="285">
                                                               <a:s r="282">
                                                                  <a:s r="280">
                                                                     <a:s r="279">
                                                                        <a:s>BloodGlucoseLab3</a:s>
                                                                     </a:s>
                                                                     <a:s>.</a:s>
                                                                     <a:s r="280">
                                                                        <a:s>effective</a:s>
                                                                     </a:s>
                                                                  </a:s>
                                                                  <a:s> as </a:s>
                                                                  <a:s r="281">
                                                                     <a:s>dateTime</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s r="285"> during </a:s>
                                                               <a:s r="284">
                                                                  <a:s r="283">
                                                                     <a:s>EncounterDay</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="284">
                                                                     <a:s>dayPeriod</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
            )</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
          }</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      )</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="encounter">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="relevantPeriod">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </element>
               <element name="relevantDays">
                  <elementType xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="dayIndex">
                           <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="dayPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="hasSevereResult">
                           <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="hasElevatedResult">
                           <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="hasNoResult">
                           <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </elementType>
                  </elementType>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression localId="295" locator="136:3-160:5" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="encounter">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="relevantPeriod">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
                  <element name="relevantDays">
                     <elementType xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasSevereResult">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="hasElevatedResult">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="hasNoResult">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </elementType>
                  </element>
               </elementType>
            </resultTypeSpecifier>
            <source localId="220" locator="136:3-136:57" alias="PertinentEncounterDays">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="hospitalizationPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="219" locator="136:3-136:34" name="Pertinent Encounters With Days" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="hospitalizationPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="relevantPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="relevantDays">
                           <elementType xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                              </elementType>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <return localId="294" locator="137:5-160:5">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasSevereResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasElevatedResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasNoResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="293" locator="137:12-160:5" xsi:type="Tuple">
                  <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasSevereResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasElevatedResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasNoResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </resultTypeSpecifier>
                  <element name="encounter">
                     <value localId="222" locator="138:18-138:49" resultTypeName="fhir:Encounter" path="encounter" scope="PertinentEncounterDays" xsi:type="Property"/>
                  </element>
                  <element name="relevantPeriod">
                     <value localId="224" locator="139:23-139:59" path="relevantPeriod" scope="PertinentEncounterDays" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </value>
                  </element>
                  <element name="relevantDays">
                     <value localId="292" locator="140:21-159:7" xsi:type="Query">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasSevereResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasElevatedResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasNoResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                        <source localId="226" locator="140:23-140:70" alias="EncounterDay">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                              </elementType>
                           </resultTypeSpecifier>
                           <expression localId="225" locator="140:23-140:57" path="relevantDays" scope="PertinentEncounterDays" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                 <elementType xsi:type="TupleTypeSpecifier">
                                    <element name="dayIndex">
                                       <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                    <element name="dayPeriod">
                                       <elementType xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </elementType>
                                    </element>
                                 </elementType>
                              </resultTypeSpecifier>
                           </expression>
                        </source>
                        <return localId="291" locator="141:11-158:11">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasSevereResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="hasElevatedResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="hasNoResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </elementType>
                           </resultTypeSpecifier>
                           <expression localId="290" locator="141:18-158:11" xsi:type="Tuple">
                              <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasSevereResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="hasElevatedResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="hasNoResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </resultTypeSpecifier>
                              <element name="dayIndex">
                                 <value localId="228" locator="142:23-142:43" resultTypeName="t:Integer" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                              </element>
                              <element name="dayPeriod">
                                 <value localId="230" locator="143:24-143:45" path="dayPeriod" scope="EncounterDay" xsi:type="Property">
                                    <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </resultTypeSpecifier>
                                 </value>
                              </element>
                              <element name="hasSevereResult">
                                 <value localId="251" locator="144:30-148:13" resultTypeName="t:Boolean" xsi:type="Exists">
                                    <signature xsi:type="ListTypeSpecifier">
                                       <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </signature>
                                    <operand localId="250" locator="144:37-148:13" xsi:type="Query">
                                       <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                          <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                       </resultTypeSpecifier>
                                       <source localId="232" locator="144:39-144:90" alias="BloodGlucoseLab1">
                                          <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                             <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                          </resultTypeSpecifier>
                                          <expression localId="231" locator="144:39-144:73" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                             <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                                <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                             </resultTypeSpecifier>
                                             <codes locator="144:55-144:72" resultTypeName="t:ValueSet" name="Glucose lab test" preserve="true" xsi:type="ValueSetRef"/>
                                          </expression>
                                       </source>
                                       <where localId="249" locator="145:17-147:90" resultTypeName="t:Boolean" xsi:type="And">
                                          <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="241" locator="145:23-146:58" resultTypeName="t:Boolean" xsi:type="And">
                                             <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             <operand localId="236" locator="145:23-145:55" resultTypeName="t:Boolean" xsi:type="Equal">
                                                <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                                                <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                                                <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <signature name="fhir:ObservationStatus" xsi:type="NamedTypeSpecifier"/>
                                                   <operand localId="234" locator="145:23-145:45" resultTypeName="fhir:ObservationStatus" path="status" scope="BloodGlucoseLab1" xsi:type="Property"/>
                                                </operand>
                                                <operand localId="235" locator="145:49-145:55" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                                             </operand>
                                             <operand localId="240" locator="146:23-146:58" resultTypeName="t:Boolean" xsi:type="Greater">
                                                <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <signature name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                   <operand asType="fhir:Quantity" xsi:type="As">
                                                      <operand localId="238" locator="146:23-146:44" path="value" scope="BloodGlucoseLab1" xsi:type="Property">
                                                         <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                                            <choice name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:integer" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Ratio" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:SampledData" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:time" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                         </resultTypeSpecifier>
                                                      </operand>
                                                   </operand>
                                                </operand>
                                                <operand localId="239" locator="146:48-146:58" resultTypeName="t:Quantity" value="300" unit="mg/dL" xsi:type="Quantity"/>
                                             </operand>
                                          </operand>
                                          <operand localId="248" locator="147:23-147:90" resultTypeName="t:Boolean" xsi:type="In">
                                             <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                             <signature xsi:type="IntervalTypeSpecifier">
                                                <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                             </signature>
                                             <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                <operand localId="245" locator="147:23-147:60" resultTypeName="fhir:dateTime" strict="false" xsi:type="As">
                                                   <operand localId="243" locator="147:23-147:48" path="effective" scope="BloodGlucoseLab1" xsi:type="Property">
                                                      <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                                         <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                         <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                         <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                                                         <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                                                      </resultTypeSpecifier>
                                                   </operand>
                                                   <asTypeSpecifier localId="244" locator="147:53-147:60" resultTypeName="fhir:dateTime" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand localId="247" locator="147:69-147:90" path="dayPeriod" scope="EncounterDay" xsi:type="Property">
                                                <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                                   <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                </resultTypeSpecifier>
                                             </operand>
                                          </operand>
                                       </where>
                                    </operand>
                                 </value>
                              </element>
                              <element name="hasElevatedResult">
                                 <value localId="272" locator="149:32-153:13" resultTypeName="t:Boolean" xsi:type="Exists">
                                    <signature xsi:type="ListTypeSpecifier">
                                       <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </signature>
                                    <operand localId="271" locator="149:39-153:13" xsi:type="Query">
                                       <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                          <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                       </resultTypeSpecifier>
                                       <source localId="253" locator="149:41-149:92" alias="BloodGlucoseLab2">
                                          <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                             <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                          </resultTypeSpecifier>
                                          <expression localId="252" locator="149:41-149:75" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                             <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                                <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                             </resultTypeSpecifier>
                                             <codes locator="149:57-149:74" resultTypeName="t:ValueSet" name="Glucose lab test" preserve="true" xsi:type="ValueSetRef"/>
                                          </expression>
                                       </source>
                                       <where localId="270" locator="150:17-152:90" resultTypeName="t:Boolean" xsi:type="And">
                                          <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="262" locator="150:23-151:59" resultTypeName="t:Boolean" xsi:type="And">
                                             <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             <operand localId="257" locator="150:23-150:55" resultTypeName="t:Boolean" xsi:type="Equal">
                                                <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                                                <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                                                <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <signature name="fhir:ObservationStatus" xsi:type="NamedTypeSpecifier"/>
                                                   <operand localId="255" locator="150:23-150:45" resultTypeName="fhir:ObservationStatus" path="status" scope="BloodGlucoseLab2" xsi:type="Property"/>
                                                </operand>
                                                <operand localId="256" locator="150:49-150:55" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                                             </operand>
                                             <operand localId="261" locator="151:23-151:59" resultTypeName="t:Boolean" xsi:type="GreaterOrEqual">
                                                <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <signature name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                   <operand asType="fhir:Quantity" xsi:type="As">
                                                      <operand localId="259" locator="151:23-151:44" path="value" scope="BloodGlucoseLab2" xsi:type="Property">
                                                         <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                                            <choice name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:integer" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Ratio" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:SampledData" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:time" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                         </resultTypeSpecifier>
                                                      </operand>
                                                   </operand>
                                                </operand>
                                                <operand localId="260" locator="151:49-151:59" resultTypeName="t:Quantity" value="200" unit="mg/dL" xsi:type="Quantity"/>
                                             </operand>
                                          </operand>
                                          <operand localId="269" locator="152:23-152:90" resultTypeName="t:Boolean" xsi:type="In">
                                             <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                             <signature xsi:type="IntervalTypeSpecifier">
                                                <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                             </signature>
                                             <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                <operand localId="266" locator="152:23-152:60" resultTypeName="fhir:dateTime" strict="false" xsi:type="As">
                                                   <operand localId="264" locator="152:23-152:48" path="effective" scope="BloodGlucoseLab2" xsi:type="Property">
                                                      <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                                         <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                         <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                         <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                                                         <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                                                      </resultTypeSpecifier>
                                                   </operand>
                                                   <asTypeSpecifier localId="265" locator="152:53-152:60" resultTypeName="fhir:dateTime" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </operand>
                                             <operand localId="268" locator="152:69-152:90" path="dayPeriod" scope="EncounterDay" xsi:type="Property">
                                                <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                                   <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                </resultTypeSpecifier>
                                             </operand>
                                          </operand>
                                       </where>
                                    </operand>
                                 </value>
                              </element>
                              <element name="hasNoResult">
                                 <value localId="289" locator="154:26-157:13" resultTypeName="t:Boolean" xsi:type="Not">
                                    <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="288" locator="154:30-157:13" resultTypeName="t:Boolean" xsi:type="Exists">
                                       <signature xsi:type="ListTypeSpecifier">
                                          <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                       </signature>
                                       <operand localId="287" locator="154:37-157:13" xsi:type="Query">
                                          <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                             <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                          </resultTypeSpecifier>
                                          <source localId="274" locator="154:39-154:90" alias="BloodGlucoseLab3">
                                             <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                                <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                             </resultTypeSpecifier>
                                             <expression localId="273" locator="154:39-154:73" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                                <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                                   <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                                </resultTypeSpecifier>
                                                <codes locator="154:55-154:72" resultTypeName="t:ValueSet" name="Glucose lab test" preserve="true" xsi:type="ValueSetRef"/>
                                             </expression>
                                          </source>
                                          <where localId="286" locator="155:17-156:90" resultTypeName="t:Boolean" xsi:type="And">
                                             <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             <operand localId="278" locator="155:23-155:55" resultTypeName="t:Boolean" xsi:type="Equal">
                                                <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                                                <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                                                <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <signature name="fhir:ObservationStatus" xsi:type="NamedTypeSpecifier"/>
                                                   <operand localId="276" locator="155:23-155:45" resultTypeName="fhir:ObservationStatus" path="status" scope="BloodGlucoseLab3" xsi:type="Property"/>
                                                </operand>
                                                <operand localId="277" locator="155:49-155:55" resultTypeName="t:String" valueType="t:String" value="final" xsi:type="Literal"/>
                                             </operand>
                                             <operand localId="285" locator="156:23-156:90" resultTypeName="t:Boolean" xsi:type="In">
                                                <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                <signature xsi:type="IntervalTypeSpecifier">
                                                   <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                </signature>
                                                <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                   <operand localId="282" locator="156:23-156:60" resultTypeName="fhir:dateTime" strict="false" xsi:type="As">
                                                      <operand localId="280" locator="156:23-156:48" path="effective" scope="BloodGlucoseLab3" xsi:type="Property">
                                                         <resultTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                                                            <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                                                            <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                                                         </resultTypeSpecifier>
                                                      </operand>
                                                      <asTypeSpecifier localId="281" locator="156:53-156:60" resultTypeName="fhir:dateTime" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                                   </operand>
                                                </operand>
                                                <operand localId="284" locator="156:69-156:90" path="dayPeriod" scope="EncounterDay" xsi:type="Property">
                                                   <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                                      <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                   </resultTypeSpecifier>
                                                </operand>
                                             </operand>
                                          </where>
                                       </operand>
                                    </operand>
                                 </value>
                              </element>
                           </expression>
                        </return>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="344" locator="70:1-88:13" name="Pertinent Encounters With Hyperglycemic Event Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="344">
               <a:s>/*# hyper days uses &quot;Relevant Encounters With Glucose Result Days&quot; to find if hyper event on each day. Skips 1st day in 'RelevantDays`. Returns boolean based on: Today high result OR Today no result AND Yesterday high result AND 2 days ago high result*/
define &quot;Pertinent Encounters With Hyperglycemic Event Days&quot;:
  </a:s>
               <a:s r="343">
                  <a:s>
                     <a:s r="298">
                        <a:s r="297">
                           <a:s>
                              <a:s>&quot;Pertinent Encounters With Glucose Result Days&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterWithResultDays</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="335">
                        <a:s>eligibleEventDays: </a:s>
                        <a:s r="334">
                           <a:s>
                              <a:s r="300">
                                 <a:s r="299">
                                    <a:s>
                                       <a:s>EncounterWithResultDays.relevantDays</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EncounterDay</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
              </a:s>
                           <a:s r="304">
                              <a:s>where </a:s>
                              <a:s r="304">
                                 <a:s r="302">
                                    <a:s r="301">
                                       <a:s>EncounterDay</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="302">
                                       <a:s>dayIndex</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="303"> > 1</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
              </a:s>
                           <a:s r="333">
                              <a:s>return </a:s>
                              <a:s r="332">
                                 <a:s>Tuple {
                </a:s>
                                 <a:s>
                                    <a:s>dayIndex: </a:s>
                                    <a:s r="306">
                                       <a:s r="305">
                                          <a:s>EncounterDay</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="306">
                                          <a:s>dayIndex</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
                </a:s>
                                 <a:s>
                                    <a:s>dayPeriod: </a:s>
                                    <a:s r="308">
                                       <a:s r="307">
                                          <a:s>EncounterDay</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="308">
                                          <a:s>dayPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
                </a:s>
                                 <a:s>
                                    <a:s>hasHyperglycemicEvent: </a:s>
                                    <a:s r="331">
                                       <a:s>( </a:s>
                                       <a:s r="331">
                                          <a:s r="310">
                                             <a:s r="309">
                                                <a:s>EncounterDay</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="310">
                                                <a:s>hasSevereResult</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
                    or </a:s>
                                          <a:s r="330">
                                             <a:s>( </a:s>
                                             <a:s r="330">
                                                <a:s r="321">
                                                   <a:s r="312">
                                                      <a:s r="311">
                                                         <a:s>EncounterDay</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="312">
                                                         <a:s>hasNoResult</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
                        and </a:s>
                                                   <a:s r="320">
                                                      <a:s r="319">
                                                         <a:s r="314">
                                                            <a:s r="313">
                                                               <a:s>EncounterWithResultDays</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="314">
                                                               <a:s>relevantDays</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>[</a:s>
                                                         <a:s r="318">
                                                            <a:s r="316">
                                                               <a:s r="315">
                                                                  <a:s>EncounterDay</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="316">
                                                                  <a:s>dayIndex</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s r="317"> - 2</a:s>
                                                         </a:s>
                                                         <a:s>]</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="320">
                                                         <a:s>hasElevatedResult</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
                        and </a:s>
                                                <a:s r="329">
                                                   <a:s r="328">
                                                      <a:s r="323">
                                                         <a:s r="322">
                                                            <a:s>EncounterWithResultDays</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="323">
                                                            <a:s>relevantDays</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>[</a:s>
                                                      <a:s r="327">
                                                         <a:s r="325">
                                                            <a:s r="324">
                                                               <a:s>EncounterDay</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="325">
                                                               <a:s>dayIndex</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="326"> - 3</a:s>
                                                      </a:s>
                                                      <a:s>]</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="329">
                                                      <a:s>hasElevatedResult</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
                    )</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
                )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
              }</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s r="342">
                     <a:s>return </a:s>
                     <a:s r="341">
                        <a:s>Tuple {
              </a:s>
                        <a:s>
                           <a:s>encounter: </a:s>
                           <a:s r="337">
                              <a:s r="336">
                                 <a:s>EncounterWithResultDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="337">
                                 <a:s>encounter</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
              </a:s>
                        <a:s>
                           <a:s>relevantPeriod: </a:s>
                           <a:s r="339">
                              <a:s r="338">
                                 <a:s>EncounterWithResultDays</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="339">
                                 <a:s>relevantPeriod</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
              </a:s>
                        <a:s>
                           <a:s>eligibleEventDays: </a:s>
                           <a:s r="340">
                              <a:s>eligibleEventDays</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
            }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="encounter">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="relevantPeriod">
                  <elementType xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </element>
               <element name="eligibleEventDays">
                  <elementType xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="dayIndex">
                           <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="dayPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="hasHyperglycemicEvent">
                           <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </elementType>
                  </elementType>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression localId="343" locator="71:3-88:13" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="encounter">
                     <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="relevantPeriod">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
                  <element name="eligibleEventDays">
                     <elementType xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasHyperglycemicEvent">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </elementType>
                  </element>
               </elementType>
            </resultTypeSpecifier>
            <source localId="298" locator="71:3-71:73" alias="EncounterWithResultDays">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="relevantDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasSevereResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasElevatedResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasNoResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="297" locator="71:3-71:49" name="Pertinent Encounters With Glucose Result Days" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="relevantPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="relevantDays">
                           <elementType xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasSevereResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="hasElevatedResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="hasNoResult">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </elementType>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <let localId="335" locator="72:17-83:15" identifier="eligibleEventDays">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="dayIndex">
                        <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="dayPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="hasHyperglycemicEvent">
                        <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="334" locator="72:36-83:15" xsi:type="Query">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="dayIndex">
                           <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="dayPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="hasHyperglycemicEvent">
                           <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
                  <source localId="300" locator="72:36-72:84" alias="EncounterDay">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasSevereResult">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="hasElevatedResult">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="hasNoResult">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </resultTypeSpecifier>
                     <expression localId="299" locator="72:36-72:71" path="relevantDays" scope="EncounterWithResultDays" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasSevereResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasElevatedResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="hasNoResult">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                     </expression>
                  </source>
                  <where localId="304" locator="73:15-73:45" resultTypeName="t:Boolean" xsi:type="Greater">
                     <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="302" locator="73:21-73:41" resultTypeName="t:Integer" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                     <operand localId="303" locator="73:45" resultTypeName="t:Integer" valueType="t:Integer" value="1" xsi:type="Literal"/>
                  </where>
                  <return localId="333" locator="74:15-83:15">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasHyperglycemicEvent">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </resultTypeSpecifier>
                     <expression localId="332" locator="74:22-83:15" xsi:type="Tuple">
                        <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasHyperglycemicEvent">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </resultTypeSpecifier>
                        <element name="dayIndex">
                           <value localId="306" locator="75:27-75:47" resultTypeName="t:Integer" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                        </element>
                        <element name="dayPeriod">
                           <value localId="308" locator="76:28-76:49" path="dayPeriod" scope="EncounterDay" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </value>
                        </element>
                        <element name="hasHyperglycemicEvent">
                           <value localId="331" locator="77:40-82:17" resultTypeName="t:Boolean" xsi:type="Or">
                              <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="310" locator="77:42-77:69" resultTypeName="t:Boolean" path="hasSevereResult" scope="EncounterDay" xsi:type="Property"/>
                              <operand localId="330" locator="78:24-81:21" resultTypeName="t:Boolean" xsi:type="And">
                                 <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="321" locator="78:26-79:109" resultTypeName="t:Boolean" xsi:type="And">
                                    <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="312" locator="78:26-78:49" resultTypeName="t:Boolean" path="hasNoResult" scope="EncounterDay" xsi:type="Property"/>
                                    <operand localId="320" locator="79:29-79:109" resultTypeName="t:Boolean" path="hasElevatedResult" xsi:type="Property">
                                       <source localId="319" locator="79:29-79:91" xsi:type="Indexer">
                                          <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                                             <element name="dayIndex">
                                                <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                             <element name="dayPeriod">
                                                <elementType xsi:type="IntervalTypeSpecifier">
                                                   <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                </elementType>
                                             </element>
                                             <element name="hasSevereResult">
                                                <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                             <element name="hasElevatedResult">
                                                <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                             <element name="hasNoResult">
                                                <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                          </resultTypeSpecifier>
                                          <signature xsi:type="ListTypeSpecifier">
                                             <elementType xsi:type="TupleTypeSpecifier">
                                                <element name="dayIndex">
                                                   <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                                <element name="dayPeriod">
                                                   <elementType xsi:type="IntervalTypeSpecifier">
                                                      <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                   </elementType>
                                                </element>
                                                <element name="hasSevereResult">
                                                   <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                                <element name="hasElevatedResult">
                                                   <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                                <element name="hasNoResult">
                                                   <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                             </elementType>
                                          </signature>
                                          <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="314" locator="79:29-79:64" path="relevantDays" scope="EncounterWithResultDays" xsi:type="Property">
                                             <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                                <elementType xsi:type="TupleTypeSpecifier">
                                                   <element name="dayIndex">
                                                      <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                                   </element>
                                                   <element name="dayPeriod">
                                                      <elementType xsi:type="IntervalTypeSpecifier">
                                                         <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                      </elementType>
                                                   </element>
                                                   <element name="hasSevereResult">
                                                      <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                   </element>
                                                   <element name="hasElevatedResult">
                                                      <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                   </element>
                                                   <element name="hasNoResult">
                                                      <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                   </element>
                                                </elementType>
                                             </resultTypeSpecifier>
                                          </operand>
                                          <operand localId="318" locator="79:66-79:90" resultTypeName="t:Integer" xsi:type="Subtract">
                                             <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                             <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                             <operand localId="316" locator="79:66-79:86" resultTypeName="t:Integer" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                                             <operand localId="317" locator="79:90" resultTypeName="t:Integer" valueType="t:Integer" value="2" xsi:type="Literal"/>
                                          </operand>
                                       </source>
                                    </operand>
                                 </operand>
                                 <operand localId="329" locator="80:29-80:109" resultTypeName="t:Boolean" path="hasElevatedResult" xsi:type="Property">
                                    <source localId="328" locator="80:29-80:91" xsi:type="Indexer">
                                       <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                                          <element name="dayIndex">
                                             <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                          </element>
                                          <element name="dayPeriod">
                                             <elementType xsi:type="IntervalTypeSpecifier">
                                                <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                             </elementType>
                                          </element>
                                          <element name="hasSevereResult">
                                             <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          </element>
                                          <element name="hasElevatedResult">
                                             <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          </element>
                                          <element name="hasNoResult">
                                             <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                          </element>
                                       </resultTypeSpecifier>
                                       <signature xsi:type="ListTypeSpecifier">
                                          <elementType xsi:type="TupleTypeSpecifier">
                                             <element name="dayIndex">
                                                <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                             <element name="dayPeriod">
                                                <elementType xsi:type="IntervalTypeSpecifier">
                                                   <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                </elementType>
                                             </element>
                                             <element name="hasSevereResult">
                                                <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                             <element name="hasElevatedResult">
                                                <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                             <element name="hasNoResult">
                                                <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                             </element>
                                          </elementType>
                                       </signature>
                                       <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="323" locator="80:29-80:64" path="relevantDays" scope="EncounterWithResultDays" xsi:type="Property">
                                          <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                             <elementType xsi:type="TupleTypeSpecifier">
                                                <element name="dayIndex">
                                                   <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                                <element name="dayPeriod">
                                                   <elementType xsi:type="IntervalTypeSpecifier">
                                                      <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                                   </elementType>
                                                </element>
                                                <element name="hasSevereResult">
                                                   <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                                <element name="hasElevatedResult">
                                                   <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                                <element name="hasNoResult">
                                                   <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                                </element>
                                             </elementType>
                                          </resultTypeSpecifier>
                                       </operand>
                                       <operand localId="327" locator="80:66-80:90" resultTypeName="t:Integer" xsi:type="Subtract">
                                          <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                          <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="325" locator="80:66-80:86" resultTypeName="t:Integer" path="dayIndex" scope="EncounterDay" xsi:type="Property"/>
                                          <operand localId="326" locator="80:90" resultTypeName="t:Integer" valueType="t:Integer" value="3" xsi:type="Literal"/>
                                       </operand>
                                    </source>
                                 </operand>
                              </operand>
                           </value>
                        </element>
                     </expression>
                  </return>
               </expression>
            </let>
            <return localId="342" locator="84:13-88:13">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="eligibleEventDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="341" locator="84:20-88:13" xsi:type="Tuple">
                  <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="eligibleEventDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </resultTypeSpecifier>
                  <element name="encounter">
                     <value localId="337" locator="85:26-85:58" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithResultDays" xsi:type="Property"/>
                  </element>
                  <element name="relevantPeriod">
                     <value localId="339" locator="86:31-86:68" path="relevantPeriod" scope="EncounterWithResultDays" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </value>
                  </element>
                  <element name="eligibleEventDays">
                     <value localId="340" locator="87:34-87:50" name="eligibleEventDays" xsi:type="QueryLetRef">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="357" locator="50:1-55:51" name="Numerator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="357">
               <a:s>/*
                      		where EncounterInpatient.status = 'finished'
                      		       			and EncounterInpatient.period ends during &quot;Measurement Period&quot;
*/
/***/
define &quot;Numerator&quot;:
  </a:s>
               <a:s r="356">
                  <a:s>
                     <a:s r="346">
                        <a:s r="345">
                           <a:s>
                              <a:s>&quot;Pertinent Encounters With Hyperglycemic Event Days&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> EncounterWithEventDays</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s r="352">
                     <a:s>where </a:s>
                     <a:s r="352">
                        <a:s>exists </a:s>
                        <a:s r="351">
                           <a:s>( </a:s>
                           <a:s r="351">
                              <a:s>
                                 <a:s r="348">
                                    <a:s r="347">
                                       <a:s>
                                          <a:s>EncounterWithEventDays.eligibleEventDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> EligibleEventDay</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
                </a:s>
                              <a:s r="350">
                                 <a:s>where </a:s>
                                 <a:s r="350">
                                    <a:s r="349">
                                       <a:s>EligibleEventDay</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="350">
                                       <a:s>hasHyperglycemicEvent</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
            )</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
            </a:s>
                  <a:s r="355">
                     <a:s>return </a:s>
                     <a:s r="354">
                        <a:s r="353">
                           <a:s>EncounterWithEventDays</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="354">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression localId="356" locator="51:3-55:51" xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source localId="346" locator="51:3-51:77" alias="EncounterWithEventDays">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="encounter">
                        <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="relevantPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="eligibleEventDays">
                        <elementType xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </elementType>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression localId="345" locator="51:3-51:54" name="Pertinent Encounters With Hyperglycemic Event Days" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="relevantPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="eligibleEventDays">
                           <elementType xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasHyperglycemicEvent">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </elementType>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where localId="352" locator="52:13-54:13" resultTypeName="t:Boolean" xsi:type="Exists">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="dayIndex">
                        <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="dayPeriod">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                     <element name="hasHyperglycemicEvent">
                        <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </elementType>
               </signature>
               <operand localId="351" locator="52:26-54:13" xsi:type="Query">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="dayIndex">
                           <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="dayPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="hasHyperglycemicEvent">
                           <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
                  <source localId="348" locator="52:28-52:84" alias="EligibleEventDay">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasHyperglycemicEvent">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </resultTypeSpecifier>
                     <expression localId="347" locator="52:28-52:67" path="eligibleEventDays" scope="EncounterWithEventDays" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                     </expression>
                  </source>
                  <where localId="350" locator="53:17-53:60" resultTypeName="t:Boolean" path="hasHyperglycemicEvent" scope="EligibleEventDay" xsi:type="Property"/>
               </operand>
            </where>
            <return localId="355" locator="55:13-55:51">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression localId="354" locator="55:20-55:51" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithEventDays" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="377" locator="186:1-190:3" resultTypeName="t:Integer" name="Denominator Observations" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="377">
               <a:s>/**
 * Counts the number of eligible days in an encounter. This simply filters and counts the data built in
 * &quot;Relevant Encounters With Hyperglycemic Event Days&quot;.*/
define function &quot;Denominator Observations&quot;(QualifyingEncounter </a:s>
               <a:s r="364">
                  <a:s>Encounter</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="376">
                  <a:s r="376">
                     <a:s>singleton from </a:s>
                     <a:s r="375">
                        <a:s>( </a:s>
                        <a:s r="375">
                           <a:s>
                              <a:s r="366">
                                 <a:s r="365">
                                    <a:s>
                                       <a:s>&quot;Pertinent Encounters With Hyperglycemic Event Days&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EncounterWithEventDays</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="370">
                              <a:s>where </a:s>
                              <a:s r="370">
                                 <a:s r="368">
                                    <a:s r="367">
                                       <a:s>EncounterWithEventDays</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="368">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="369">
                                    <a:s>QualifyingEncounter</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="374">
                              <a:s>return </a:s>
                              <a:s r="373">
                                 <a:s>Count(</a:s>
                                 <a:s r="372">
                                    <a:s r="371">
                                       <a:s>EncounterWithEventDays</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="372">
                                       <a:s>eligibleEventDays</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="376" locator="187:3-190:3" resultTypeName="t:Integer" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="375" locator="187:18-190:3" xsi:type="Query">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <source localId="366" locator="187:20-187:94" alias="EncounterWithEventDays">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="relevantPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="eligibleEventDays">
                           <elementType xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasHyperglycemicEvent">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </elementType>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
                  <expression localId="365" locator="187:20-187:71" name="Pertinent Encounters With Hyperglycemic Event Days" xsi:type="ExpressionRef">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="encounter">
                              <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="relevantPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="eligibleEventDays">
                              <elementType xsi:type="ListTypeSpecifier">
                                 <elementType xsi:type="TupleTypeSpecifier">
                                    <element name="dayIndex">
                                       <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                    <element name="dayPeriod">
                                       <elementType xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </elementType>
                                    </element>
                                    <element name="hasHyperglycemicEvent">
                                       <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                 </elementType>
                              </elementType>
                           </element>
                        </elementType>
                     </resultTypeSpecifier>
                  </expression>
               </source>
               <where localId="370" locator="188:7-188:66" resultTypeName="t:Boolean" xsi:type="Equal">
                  <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="368" locator="188:13-188:44" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithEventDays" xsi:type="Property"/>
                  <operand localId="369" locator="188:48-188:66" resultTypeName="fhir:Encounter" name="QualifyingEncounter" xsi:type="OperandRef"/>
               </where>
               <return localId="374" locator="189:7-189:60">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <expression localId="373" locator="189:14-189:60" resultTypeName="t:Integer" xsi:type="Count">
                     <signature xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasHyperglycemicEvent">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </signature>
                     <source localId="372" locator="189:20-189:59" path="eligibleEventDays" scope="EncounterWithEventDays" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                     </source>
                  </expression>
               </return>
            </operand>
         </expression>
         <operand name="QualifyingEncounter">
            <operandTypeSpecifier localId="364" locator="186:64-186:72" resultTypeName="fhir:Encounter" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="397" locator="204:1-210:3" resultTypeName="t:Integer" name="Numerator Observations" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="397">
               <a:s>/**
 * Counts the number of eligible days with a hyperglycemic event in an encounter. This simply filters and counts the data built in
 * &quot;Relevant Encounters With Hyperglycemic Event Days&quot;.*/
define function &quot;Numerator Observations&quot;(QualifyingEncounter </a:s>
               <a:s r="381">
                  <a:s>Encounter</a:s>
               </a:s>
               <a:s> ):
  </a:s>
               <a:s r="396">
                  <a:s r="396">
                     <a:s>singleton from </a:s>
                     <a:s r="395">
                        <a:s>( </a:s>
                        <a:s r="395">
                           <a:s>
                              <a:s r="383">
                                 <a:s r="382">
                                    <a:s>
                                       <a:s>&quot;Pertinent Encounters With Hyperglycemic Event Days&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> EncounterWithEventDays</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="387">
                              <a:s>where </a:s>
                              <a:s r="387">
                                 <a:s r="385">
                                    <a:s r="384">
                                       <a:s>EncounterWithEventDays</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="385">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="386">
                                    <a:s>QualifyingEncounter</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="394">
                              <a:s>return </a:s>
                              <a:s r="393">
                                 <a:s>Count(</a:s>
                                 <a:s r="392">
                                    <a:s>
                                       <a:s r="389">
                                          <a:s r="388">
                                             <a:s>
                                                <a:s>EncounterWithEventDays.eligibleEventDays</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> EligibleEventDay</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
          </a:s>
                                    <a:s r="391">
                                       <a:s>where </a:s>
                                       <a:s r="391">
                                          <a:s r="390">
                                             <a:s>EligibleEventDay</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="391">
                                             <a:s>hasHyperglycemicEvent</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="396" locator="205:3-210:3" resultTypeName="t:Integer" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="395" locator="205:18-210:3" xsi:type="Query">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <source localId="383" locator="205:20-205:94" alias="EncounterWithEventDays">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="TupleTypeSpecifier">
                        <element name="encounter">
                           <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element name="relevantPeriod">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element name="eligibleEventDays">
                           <elementType xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasHyperglycemicEvent">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </elementType>
                           </elementType>
                        </element>
                     </elementType>
                  </resultTypeSpecifier>
                  <expression localId="382" locator="205:20-205:71" name="Pertinent Encounters With Hyperglycemic Event Days" xsi:type="ExpressionRef">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="encounter">
                              <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="relevantPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="eligibleEventDays">
                              <elementType xsi:type="ListTypeSpecifier">
                                 <elementType xsi:type="TupleTypeSpecifier">
                                    <element name="dayIndex">
                                       <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                    <element name="dayPeriod">
                                       <elementType xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </elementType>
                                    </element>
                                    <element name="hasHyperglycemicEvent">
                                       <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                 </elementType>
                              </elementType>
                           </element>
                        </elementType>
                     </resultTypeSpecifier>
                  </expression>
               </source>
               <where localId="387" locator="206:7-206:66" resultTypeName="t:Boolean" xsi:type="Equal">
                  <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  <signature name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="385" locator="206:13-206:44" resultTypeName="fhir:Encounter" path="encounter" scope="EncounterWithEventDays" xsi:type="Property"/>
                  <operand localId="386" locator="206:48-206:66" resultTypeName="fhir:Encounter" name="QualifyingEncounter" xsi:type="OperandRef"/>
               </where>
               <return localId="394" locator="207:7-209:7">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <expression localId="393" locator="207:14-209:7" resultTypeName="t:Integer" xsi:type="Count">
                     <signature xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="TupleTypeSpecifier">
                           <element name="dayIndex">
                              <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element name="dayPeriod">
                              <elementType xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element name="hasHyperglycemicEvent">
                              <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                           </element>
                        </elementType>
                     </signature>
                     <source localId="392" locator="207:20-208:54" xsi:type="Query">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="TupleTypeSpecifier">
                              <element name="dayIndex">
                                 <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element name="dayPeriod">
                                 <elementType xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element name="hasHyperglycemicEvent">
                                 <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                              </element>
                           </elementType>
                        </resultTypeSpecifier>
                        <source localId="389" locator="207:20-207:76" alias="EligibleEventDay">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="TupleTypeSpecifier">
                                 <element name="dayIndex">
                                    <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element name="dayPeriod">
                                    <elementType xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                                 <element name="hasHyperglycemicEvent">
                                    <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                              </elementType>
                           </resultTypeSpecifier>
                           <expression localId="388" locator="207:20-207:59" path="eligibleEventDays" scope="EncounterWithEventDays" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                 <elementType xsi:type="TupleTypeSpecifier">
                                    <element name="dayIndex">
                                       <elementType name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                    <element name="dayPeriod">
                                       <elementType xsi:type="IntervalTypeSpecifier">
                                          <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                       </elementType>
                                    </element>
                                    <element name="hasHyperglycemicEvent">
                                       <elementType name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                 </elementType>
                              </resultTypeSpecifier>
                           </expression>
                        </source>
                        <where localId="391" locator="208:11-208:54" resultTypeName="t:Boolean" path="hasHyperglycemicEvent" scope="EligibleEventDay" xsi:type="Property"/>
                     </source>
                  </expression>
               </return>
            </operand>
         </expression>
         <operand name="QualifyingEncounter">
            <operandTypeSpecifier localId="381" locator="204:62-204:70" resultTypeName="fhir:Encounter" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
   </statements>
</library>
